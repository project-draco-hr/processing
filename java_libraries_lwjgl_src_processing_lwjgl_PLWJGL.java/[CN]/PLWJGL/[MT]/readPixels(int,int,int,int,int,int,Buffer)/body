{
  boolean needEndBegin=format != STENCIL_INDEX && format != DEPTH_COMPONENT && format != DEPTH_STENCIL;
  if (needEndBegin)   pg.beginReadPixels();
  readPixelsImpl(x,y,width,height,format,type,buffer);
  if (needEndBegin)   pg.endReadPixels();
}
