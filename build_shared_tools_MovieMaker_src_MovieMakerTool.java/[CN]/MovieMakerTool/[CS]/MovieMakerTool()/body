{
  initComponents();
  String version=getClass().getPackage().getImplementationVersion();
  if (version != null) {
    setTitle(getTitle() + " " + version);
  }
  ((JComponent)getContentPane()).setBorder(new EmptyBorder(12,18,18,18));
  imageFolderField.setTransferHandler(new FileTextFieldTransferHandler(JFileChooser.DIRECTORIES_ONLY));
  soundFileField.setTransferHandler(new FileTextFieldTransferHandler());
  JComponent[] smallComponents={compressionBox,compressionLabel,fpsField,fpsLabel,heightField,heightLabel,widthField,widthLabel,passThroughCheckBox,noPreparationRadio,fastStartCompressedRadio,fastStartRadio};
  for (  JComponent c : smallComponents) {
    c.putClientProperty("JComponent.sizeVariant","small");
  }
  prefs=Preferences.userNodeForPackage(MovieMakerTool.class);
  imageFolderField.setText(prefs.get("movie.imageFolder",""));
  soundFileField.setText(prefs.get("movie.soundFile",""));
  widthField.setText("" + prefs.getInt("movie.width",320));
  heightField.setText("" + prefs.getInt("movie.height",240));
  passThroughCheckBox.setSelected(prefs.getBoolean("movie.passThrough",false));
  String fps="" + prefs.getDouble("movie.fps",30);
  if (fps.endsWith(".0")) {
    fps=fps.substring(0,fps.length() - 2);
  }
  fpsField.setText(fps);
  compressionBox.setSelectedIndex(Math.max(0,Math.min(compressionBox.getItemCount() - 1,prefs.getInt("movie.compression",1))));
  String streaming=prefs.get("movie.streaming","fastStartCompressed");
  for (Enumeration<AbstractButton> i=streamingGroup.getElements(); i.hasMoreElements(); ) {
    AbstractButton btn=i.nextElement();
    if (btn.getActionCommand().equals(streaming)) {
      btn.setSelected(true);
      break;
    }
  }
}
