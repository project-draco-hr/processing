{
  int fontsize=0;
  try {
    fontsize=Integer.parseInt(sizeSelector.getText().trim());
  }
 catch (  NumberFormatException e) {
  }
  if (fontsize <= 0) {
    JOptionPane.showMessageDialog(this,"Bad font size, try again.","Badness",JOptionPane.WARNING_MESSAGE);
    return;
  }
  String filename=filenameField.getText();
  if (filename.length() == 0) {
    JOptionPane.showMessageDialog(this,"Enter a file name for the font.","Lameness",JOptionPane.WARNING_MESSAGE);
    return;
  }
  if (!filename.endsWith(".vlw")) {
    filename+=".vlw";
  }
  try {
    Font instance=(Font)table.get(list[selection]);
    font=instance.deriveFont(Font.PLAIN,fontsize);
    PFont2 f=new PFont2(font,all,smooth);
    if (!targetFolder.exists())     targetFolder.mkdirs();
    f.write(new FileOutputStream(new File(targetFolder,filename)));
  }
 catch (  IOException e) {
    JOptionPane.showMessageDialog(this,"An error occurred while creating font.","No font for you",JOptionPane.WARNING_MESSAGE);
    e.printStackTrace();
  }
  hide();
}
