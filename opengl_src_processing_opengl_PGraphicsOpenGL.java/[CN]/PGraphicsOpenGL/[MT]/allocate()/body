{
  if (context == null) {
    GLCapabilities capabilities=new GLCapabilities();
    if (hints[ENABLE_OPENGL_2X_SMOOTH]) {
      capabilities.setSampleBuffers(true);
      capabilities.setNumSamples(2);
    }
 else     if (hints[ENABLE_OPENGL_4X_SMOOTH]) {
      capabilities.setSampleBuffers(true);
      capabilities.setNumSamples(4);
    }
    GLDrawableFactory factory=GLDrawableFactory.getFactory();
    GraphicsConfiguration pconfig=parent.getGraphicsConfiguration();
    System.out.println("parent config is " + pconfig);
    AWTGraphicsConfiguration agc=(AWTGraphicsConfiguration)factory.chooseGraphicsConfiguration(capabilities,null,null);
    GraphicsConfiguration config=agc.getGraphicsConfiguration();
    System.out.println("agc config is " + config);
    drawable=factory.getGLDrawable(parent,capabilities,null);
    context=drawable.createContext(null);
    gl=context.getGL();
    settingsInited=false;
  }
 else {
    System.out.println("PGraphicsOpenGL.allocate() again for " + width + " "+ height);
    reapplySettings();
  }
}
