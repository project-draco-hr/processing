{
  this.editor=editor;
  maxLineCount=Preferences.getInteger("console.length");
  consoleDoc=new BufferedStyledDocument(10000,maxLineCount);
  consoleTextPane=new JTextPane(consoleDoc);
  consoleTextPane.setEditable(false);
  updateMode();
  this.setViewportView(consoleTextPane);
  if (Base.isMacOS()) {
    setBorder(null);
  }
  sketchOut=new PrintStream(new EditorConsoleStream(false,this));
  sketchErr=new PrintStream(new EditorConsoleStream(true,this));
  new javax.swing.Timer(250,new ActionListener(){
    public void actionPerformed(    ActionEvent evt){
      if (consoleDoc.hasAppendage) {
        consoleDoc.insertAll();
        consoleTextPane.setCaretPosition(consoleDoc.getLength());
      }
    }
  }
).start();
}
