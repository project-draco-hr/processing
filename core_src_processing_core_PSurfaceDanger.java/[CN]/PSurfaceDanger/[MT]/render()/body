{
  if (!canvas.isDisplayable()) {
    return;
  }
  Canvas c=(Canvas)canvas;
  if (c.getBufferStrategy() == null) {
    c.createBufferStrategy(2);
  }
  BufferStrategy strategy=c.getBufferStrategy();
  if (strategy == null) {
    return;
  }
  do {
    do {
      Graphics2D draw=(Graphics2D)strategy.getDrawGraphics();
      ((PGraphicsJava2D)sketch.g).g2=draw;
      sketch.handleDraw();
      draw.dispose();
    }
 while (strategy.contentsRestored());
    strategy.show();
  }
 while (strategy.contentsLost());
}
