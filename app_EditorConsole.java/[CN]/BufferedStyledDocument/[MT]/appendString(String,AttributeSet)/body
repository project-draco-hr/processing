{
  while (str.indexOf('\n') != -1) {
    elements.add(new ElementSpec(a,ElementSpec.ContentType,str.toCharArray(),0,str.indexOf('\n')));
    elements.add(new ElementSpec(a,ElementSpec.EndTagType));
    elements.add(new ElementSpec(a,ElementSpec.StartTagType));
    currentLineLength=0;
    elements.add(new ElementSpec(a,ElementSpec.ContentType,new char[]{'\0'},0,1));
    str=str.substring(str.indexOf('\n') + 1);
  }
  if (str.length() > 0) {
    if (currentLineLength > maxLineLength) {
      elements.add(new ElementSpec(a,ElementSpec.EndTagType));
      elements.add(new ElementSpec(a,ElementSpec.StartTagType));
      currentLineLength=0;
    }
    elements.add(new ElementSpec(a,ElementSpec.ContentType,str.toCharArray(),0,str.length()));
    currentLineLength+=str.length();
  }
}
