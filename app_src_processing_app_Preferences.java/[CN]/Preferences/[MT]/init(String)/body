{
  try {
    load(Base.getLibStream("preferences.txt"));
  }
 catch (  Exception e) {
    Base.showError(null,"Could not read default settings.\n" + "You'll need to reinstall Processing.",e);
  }
  defaults=(HashMap<String,String>)table.clone();
  setColor("run.window.bgcolor",SystemColor.control);
  if (commandLinePrefs != null) {
    try {
      load(new FileInputStream(commandLinePrefs));
    }
 catch (    Exception poe) {
      Base.showError("Error","Could not read preferences from " + commandLinePrefs,poe);
    }
  }
 else   if (!Base.isCommandLine()) {
    preferencesFile=Base.getSettingsFile(PREFS_FILE);
    if (!preferencesFile.exists()) {
      save();
    }
 else {
      try {
        load(new FileInputStream(preferencesFile));
      }
 catch (      Exception ex) {
        Base.showError("Error reading preferences","Error reading the preferences file. " + "Please delete (or move)\n" + preferencesFile.getAbsolutePath() + " and restart Processing.",ex);
      }
    }
  }
}
