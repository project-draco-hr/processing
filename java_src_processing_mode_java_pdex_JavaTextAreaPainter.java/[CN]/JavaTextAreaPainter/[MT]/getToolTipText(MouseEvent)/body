{
  int line=evt.getY() / getFontMetrics().getHeight() + textArea.getFirstLine();
  if (line >= 0 || line < textArea.getLineCount()) {
    List<Problem> problems=getJavaEditor().findProblems(line);
    for (    Problem problem : problems) {
      int lineStart=textArea.getLineStartOffset(line);
      int lineEnd=textArea.getLineStopOffset(line);
      int errorStart=problem.getStartOffset();
      int errorEnd=problem.getStopOffset() + 1;
      int startOffset=Math.max(errorStart,lineStart) - lineStart;
      int stopOffset=Math.min(errorEnd,lineEnd) - lineStart;
      int x=evt.getX();
      if (x >= getJavaTextArea().offsetToX(line,startOffset) && x <= getJavaTextArea().offsetToX(line,stopOffset)) {
        getJavaEditor().statusToolTip(JavaTextAreaPainter.this,problem.getMessage(),problem.isError());
        return super.getToolTipText(evt);
      }
    }
  }
  setToolTipText(null);
  return super.getToolTipText(evt);
}
