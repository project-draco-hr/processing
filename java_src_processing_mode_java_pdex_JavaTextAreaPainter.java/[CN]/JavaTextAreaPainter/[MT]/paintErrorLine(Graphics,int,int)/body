{
  ErrorCheckerService ecs=getJavaEditor().getErrorChecker();
  if (ecs == null || ecs.problemsList == null) {
    return;
  }
  errorLineCoords.clear();
  LineMarker marker=findError(line);
  if (marker != null) {
    Problem problem=marker.getProblem();
    int y=textArea.lineToY(line) + fm.getLeading() + fm.getMaxDescent();
    int start=textArea.getLineStartOffset(line) + problem.getPDELineStartOffset();
    int length=1 + problem.getPDELineStopOffset() - problem.getPDELineStartOffset();
    try {
      String badCode=null;
      String goodCode=null;
      try {
        SyntaxDocument doc=textArea.getDocument();
        badCode=doc.getText(start,length);
        goodCode=doc.getText(textArea.getLineStartOffset(line),problem.getPDELineStartOffset());
      }
 catch (      BadLocationException bl) {
        return;
      }
      int aw=fm.stringWidth(trimRight(badCode)) + textArea.getHorizontalOffset();
      int rw=fm.stringWidth(badCode.trim());
      int x1=fm.stringWidth(goodCode) + (aw - rw);
      int y1=y + fm.getHeight() - 2, x2=x1 + rw;
      x1+=Editor.LEFT_GUTTER;
      x2+=Editor.LEFT_GUTTER;
      errorLineCoords.add(new ErrorLineCoord(x1,x2,y,y1,problem));
      gfx.setColor(errorUnderlineColor);
      if (marker.getType() == LineMarker.WARNING) {
        gfx.setColor(warningUnderlineColor);
      }
      paintSquiggle(gfx,y1,x1,x2);
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
}
