{
  final Log log=Log.getSwingLog(_configForm.getLogTextArea());
  try {
    if ((!_saved || _configForm.isModified()) && !save()) {
      return;
    }
    log.clear();
    ConfigPersister.getInstance().getConfig().checkInvariants();
    Builder b=new Builder(log);
    _outfile=b.build();
    setRunEnabled(ConfigPersister.getInstance().getConfig().getHeaderType() == Config.GUI_HEADER && (Util.WINDOWS_OS || !ConfigPersister.getInstance().getConfig().isDontWrapJar()));
  }
 catch (  InvariantViolationException ex) {
    setRunEnabled(false);
    ex.setBinding(_configForm.getBinding(ex.getProperty()));
    warn(ex);
  }
catch (  BuilderException ex) {
    setRunEnabled(false);
    log.append(ex.getMessage());
  }
}
