{
  StringBuffer cf=new StringBuffer("[quote] \n \n");
  for (int i=0; i < parent.getLineCount(); i++) {
    cf.append(formatCode(i));
  }
  cf.append("\n [/quote]");
  StringSelection formatted=new StringSelection(cf.toString());
  Clipboard clipboard=Toolkit.getDefaultToolkit().getSystemClipboard();
  clipboard.setContents(formatted,new ClipboardOwner(){
    public void lostOwnership(    Clipboard clipboard,    Transferable contents){
    }
  }
);
  editor.message("Discourse-formatted code has been " + "copied to the clipboard.");
}
