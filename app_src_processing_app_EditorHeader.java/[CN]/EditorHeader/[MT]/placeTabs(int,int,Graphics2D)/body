{
  Sketch sketch=editor.getSketch();
  int x=left;
  final int bottom=getHeight();
  final int top=bottom - TAB_HEIGHT;
  for (int i=0; i < sketch.getCodeCount(); i++) {
    SketchCode code=sketch.getCode(i);
    Tab tab=tabs[i];
    int state=(code == sketch.getCurrentCode()) ? SELECTED : UNSELECTED;
    tab.left=x;
    x+=TEXT_MARGIN;
    int drawWidth=tab.textVisible ? tab.textWidth : NO_TEXT_WIDTH;
    x+=drawWidth + TEXT_MARGIN;
    tab.right=x;
    if (g != null) {
      g.setColor(tabColor[state]);
      drawTab(g,tab.left,tab.right);
      if (tab.textVisible) {
        int textLeft=tab.left + ((tab.right - tab.left) - tab.textWidth) / 2;
        g.setColor(textColor[state]);
        int tabHeight=TAB_HEIGHT;
        int baseline=top + (tabHeight + fontAscent) / 2;
        g.drawString(tab.text,textLeft,baseline);
      }
      if (code.isModified()) {
        g.setColor(modifiedColor);
        g.drawLine(tab.left,top,tab.right,top);
      }
    }
    x+=TAB_BETWEEN;
  }
  return x <= right;
}
