{
  if (okButton == null) {
    cancelButton=new JButton(Preferences.PROMPT_CANCEL);
    okButton=new JButton(Preferences.PROMPT_OK);
    cancelButton.addActionListener(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        if (mode == EDIT) {
          unedit();
          editor.toolbar.clear();
        }
      }
    }
);
    okButton.addActionListener(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        if (mode == EDIT) {
          String answer=editField.getText();
          editor.sketch.nameCode(answer);
          unedit();
        }
      }
    }
);
    if (Base.isMacOS()) {
      cancelButton.setBackground(bgcolor[EDIT]);
      okButton.setBackground(bgcolor[EDIT]);
    }
    setLayout(null);
    add(cancelButton);
    add(okButton);
    cancelButton.setVisible(false);
    okButton.setVisible(false);
    editField=new JTextField();
    editField.addKeyListener(new KeyAdapter(){
      public void keyPressed(      KeyEvent event){
        if (event.getKeyChar() == KeyEvent.VK_ESCAPE) {
          unedit();
          editor.toolbar.clear();
          event.consume();
        }
      }
      public void keyTyped(      KeyEvent event){
        int c=event.getKeyChar();
        if (c == KeyEvent.VK_ENTER) {
          String answer=editField.getText();
          editor.sketch.nameCode(answer);
          unedit();
          event.consume();
        }
 else         if ((c == KeyEvent.VK_BACK_SPACE) || (c == KeyEvent.VK_DELETE) || (c == KeyEvent.VK_RIGHT)|| (c == KeyEvent.VK_LEFT)|| (c == KeyEvent.VK_UP)|| (c == KeyEvent.VK_DOWN)|| (c == KeyEvent.VK_HOME)|| (c == KeyEvent.VK_END)|| (c == KeyEvent.VK_SHIFT)) {
        }
 else         if (c == KeyEvent.VK_SPACE) {
          String t=editField.getText();
          int start=editField.getSelectionStart();
          int end=editField.getSelectionEnd();
          editField.setText(t.substring(0,start) + "_" + t.substring(end));
          editField.setCaretPosition(start + 1);
          event.consume();
        }
 else         if ((c == '_') || (c == '.') || ((c >= 'A') && (c <= 'Z'))|| ((c >= 'a') && (c <= 'z'))) {
        }
 else         if ((c >= '0') && (c <= '9')) {
          if ((editField.getCaretPosition() == 0) || (editField.getSelectionStart() == 0)) {
            event.consume();
          }
        }
 else {
          event.consume();
        }
      }
    }
);
    add(editField);
    editField.setVisible(false);
  }
}
