{
  if (okButton == null)   setup();
  Dimension size=getSize();
  if ((size.width != sizeW) || (size.height != sizeH)) {
    offscreen=null;
  }
  if (offscreen == null) {
    sizeW=size.width;
    sizeH=size.height;
    setButtonBounds();
    if (Toolkit.highResDisplay()) {
      offscreen=createImage(sizeW * 2,sizeH * 2);
    }
 else {
      offscreen=createImage(sizeW,sizeH);
    }
  }
  Graphics g=offscreen.getGraphics();
  Graphics2D g2=(Graphics2D)g;
  if (Toolkit.highResDisplay()) {
    g2.scale(2,2);
    if (Base.isUsableOracleJava()) {
      g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
    }
  }
 else {
    g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,RenderingHints.VALUE_TEXT_ANTIALIAS_ON);
  }
  g.setFont(font);
  if (metrics == null) {
    metrics=g.getFontMetrics();
    ascent=metrics.getAscent();
  }
  g.setColor(bgcolor[mode]);
  g.fillRect(0,0,sizeW,sizeH);
  g.setColor(fgcolor[mode]);
  g.setFont(font);
  g.drawString(message,Preferences.GUI_SMALL,(sizeH + ascent) / 2);
  if (indeterminate) {
    int x=cancelButton.getX();
    int w=cancelButton.getWidth();
    int y=getHeight() / 3;
    int h=getHeight() / 3;
    g.setColor(new Color(0x80000000,true));
    g.drawRect(x,y,w,h);
    for (int i=0; i < 10; i++) {
      int r=(int)(x + Math.random() * w);
      g.drawLine(r,y,r,y + h);
    }
  }
  screen.drawImage(offscreen,0,0,sizeW,sizeH,null);
}
