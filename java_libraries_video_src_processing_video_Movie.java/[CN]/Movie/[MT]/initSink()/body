{
  if (copyHandler != null) {
    try {
      copyBufferMethod=copyHandler.getClass().getMethod("addPixelsToBuffer",new Class[]{Object.class,IntBuffer.class,int.class,int.class});
      copyBufferMode=true;
    }
 catch (    Exception e) {
      copyBufferMode=false;
    }
    if (copyBufferMode) {
      try {
        Method meth=copyHandler.getClass().getMethod("setPixelSource",new Class[]{Object.class});
        meth.invoke(copyHandler,new Object[]{this});
      }
 catch (      Exception e) {
        copyBufferMode=false;
      }
      if (copyBufferMode) {
        natSink=new BufferDataAppSink("nat",copyMask,new BufferDataAppSink.Listener(){
          public void bufferFrame(          int w,          int h,          Buffer buffer){
            invokeEvent(w,h,buffer);
          }
        }
);
        natSink.setAutoDisposeBuffer(false);
        gplayer.setVideoSink(natSink);
        natSink.dispose();
      }
    }
  }
  if (!copyBufferMode) {
    rgbSink=new RGBDataAppSink("rgb",new RGBDataAppSink.Listener(){
      public void rgbFrame(      int w,      int h,      IntBuffer buffer){
        invokeEvent(w,h,buffer);
      }
    }
);
    rgbSink.setPassDirectBuffer(Video.passDirectBuffer);
    gplayer.setVideoSink(rgbSink);
    rgbSink.dispose();
  }
  Bus bus=gplayer.getBus();
  bus.connect(new Bus.EOS(){
    public void endOfStream(    GstObject element){
      eosEvent();
    }
  }
);
  sinkReady=true;
  newFrame=false;
}
