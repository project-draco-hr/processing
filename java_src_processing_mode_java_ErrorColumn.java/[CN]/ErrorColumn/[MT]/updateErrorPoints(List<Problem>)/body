{
  final int fheight=this.getHeight();
  SwingWorker<Object,Object> worker=new SwingWorker<Object,Object>(){
    protected Object doInBackground() throws Exception {
      Sketch sketch=editor.getSketch();
      SketchCode sc=sketch.getCurrentCode();
      int totalLines=0;
      int currentTab=sketch.getCurrentCodeIndex();
      try {
        Document doc=sc.getDocument();
        totalLines=Util.countLines(doc.getText(0,doc.getLength())) + 1;
      }
 catch (      BadLocationException e) {
        e.printStackTrace();
      }
      errorPointsOld=errorPoints;
      errorPoints=new ArrayList<>();
synchronized (problems) {
        for (        Problem problem : problems) {
          if (problem.getTabIndex() == currentTab) {
            float y=(problem.getLineNumber() + 1) / ((float)totalLines);
            y*=fheight - 15;
            errorPoints.add(new LineMarker(problem,(int)y,problem.isError() ? LineMarker.ERROR : LineMarker.WARNING));
          }
        }
      }
      return null;
    }
    protected void done(){
      repaint();
    }
  }
;
  try {
    worker.execute();
  }
 catch (  Exception exp) {
    System.out.println("Errorbar update markers is slacking." + exp.getMessage());
  }
}
