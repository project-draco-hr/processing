{
  if (ogl.gl2f == null) {
    throw new RuntimeException("PShape3D: OpenGL ES 1.1 required");
  }
  if (!PGraphicsOpenGL.vboSupported) {
    throw new RuntimeException("PShape3D: Vertex Buffer Objects are not available");
  }
  readFromOBJ=true;
  objVertices=new ArrayList<PVector>();
  objNormal=new ArrayList<PVector>();
  objTexCoords=new ArrayList<PVector>();
  objFaces=new ArrayList<OBJFace>();
  objMaterials=new ArrayList<OBJMaterial>();
  BufferedReader reader=getBufferedReader(filename);
  if (reader == null) {
    throw new RuntimeException("PShape3D: Cannot read source file");
  }
  if (params == null) {
    params=PShape3D.newParameters(TRIANGLES,STATIC);
  }
 else {
    params.drawMode=TRIANGLES;
  }
  setParameters(params);
  parseOBJ(reader,objVertices,objNormal,objTexCoords,objFaces,objMaterials);
  vertexCount=objVertices.size();
}
