{
  System.out.println("checkCode() " + textModified.get());
  lastTimeStamp=System.currentTimeMillis();
  try {
    sourceCode=preprocessCode(editor.getSketch().getMainProgram());
    syntaxCheck();
    System.out.println(editor.getSketch().getName() + "1 MCO " + mainClassOffset);
    if (problems.length == 0 && editor.compilationCheckEnabled) {
      astGenerator.buildAST(cu);
      sourceCode=xqpreproc.doYourThing(sourceCode,programImports);
      prepareCompilerClasspath();
      compileCheck();
      System.out.println(editor.getSketch().getName() + "2 MCO " + mainClassOffset);
    }
    updateErrorTable();
    editor.updateErrorBar(problemsList);
    updateEditorStatus();
    updatePaintedThingys();
    int x=textModified.get();
    if (x >= 3) {
      textModified.set(3);
      x=3;
    }
    if (x > 0)     textModified.set(x - 1);
 else     textModified.set(0);
    return true;
  }
 catch (  Exception e) {
    System.out.println("Oops! [ErrorCheckerService.checkCode]: " + e);
    e.printStackTrace();
  }
  return false;
}
