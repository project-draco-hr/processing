{
  File sketchbookFolder=null;
  if (platform == MACOSX) {
    try {
      MRJOSType domainDocuments=new MRJOSType("docs");
      File libraryFolder=MRJFileUtils.findFolder(domainDocuments);
      sketchbookFolder=new File(libraryFolder,"Processing");
    }
 catch (    FileNotFoundException e) {
      showError("sketch folder problem","Could not locate default sketch folder location.",e);
    }
  }
 else   if (platform == WINDOWS) {
    try {
      RegistryKey topKey=Registry.HKEY_CURRENT_USER;
      String localKeyPath="Software\\Microsoft\\Windows\\CurrentVersion" + "\\Explorer\\Shell Folders";
      RegistryKey localKey=topKey.openSubKey(localKeyPath);
      String personalPath=localKey.getStringValue("Personal");
      topKey.closeKey();
      localKey.closeKey();
      sketchbookFolder=new File(personalPath,"Processing");
    }
 catch (    Exception e) {
      showError("Problem getting documents folder","Error getting the Processing sketchbook folder.",e);
    }
  }
  if (!sketchbookFolder.exists())   sketchbookFolder.mkdirs();
}
