{
  try {
    popup.removeAll();
    JMenuItem item=new JMenuItem("Open...");
    item.addActionListener(new ActionListener(){
      public void actionPerformed(      ActionEvent e){
        editor.handleOpen(null);
      }
    }
);
    popup.add(item);
    popup.addSeparator();
    boolean sketches=addSketches(popup,new File(PdePreferences.get("sketchbook.path")));
    if (sketches)     popup.addSeparator();
    JMenu examples=new JMenu("Examples");
    addSketches(examples,examplesFolder);
    popup.add(examples);
    builtOnce=true;
    menu.removeAll();
    if (sketches) {
      addSketches(menu,new File(PdePreferences.get("sketchbook.path")));
      menu.addSeparator();
    }
    examples=new JMenu("Examples");
    addSketches(examples,examplesFolder);
    menu.add(examples);
    addlib.removeAll();
    boolean libs=addLibraries(addlib,new File(PdePreferences.get("sketchbook.path")));
    if (libs)     menu.addSeparator();
    addLibraries(addlib,librariesFolder);
  }
 catch (  IOException e) {
    PdeBase.showWarning("Problem while building sketchbook menu","There was a problem with building the\n" + "sketchbook menu. Things might get a little\n" + "kooky around here.",e);
  }
  return menu;
}
