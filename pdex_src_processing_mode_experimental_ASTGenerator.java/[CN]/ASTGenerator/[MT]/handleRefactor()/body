{
  log("Last clicked word:" + lastClickedWord);
  if (lastClickedWord == null && editor.ta.getSelectedText() == null) {
    editor.statusError("Highlight the class/function/variable name first");
    return;
  }
  if (errorCheckerService.hasSyntaxErrors()) {
    editor.statusError("Can't perform action until syntax errors are fixed :(");
    return;
  }
  if (!frmRename.isVisible()) {
    frmRename.setLocation(editor.getX() + (editor.getWidth() - frmRename.getWidth()) / 2,editor.getY() + (editor.getHeight() - frmRename.getHeight()) / 2);
    frmRename.setVisible(true);
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        String selText=lastClickedWord == null ? editor.ta.getSelectedText() : lastClickedWord;
        frmOccurenceList.setTitle("All occurrences of " + selText);
        lblRefactorOldName.setText("Current name: " + selText);
        txtRenameField.setText("");
        txtRenameField.requestFocus();
      }
    }
);
  }
  frmRename.toFront();
}
