{
  ASTNode parent=findClosestParentNode(lineNumber,node);
  if (parent == null)   return null;
  if (getLineNumber(parent) == lineNumber)   return parent;
  List<ASTNode> nodes=null;
  if (parent instanceof TypeDeclaration) {
    nodes=(List<ASTNode>)((TypeDeclaration)parent).getStructuralProperty(TypeDeclaration.BODY_DECLARATIONS_PROPERTY);
  }
 else   if (parent instanceof Block) {
    nodes=(List<ASTNode>)((Block)parent).getStructuralProperty(Block.STATEMENTS_PROPERTY);
  }
 else {
    System.err.println("THIS CONDITION SHOULD NOT OCCUR - findClosestNode " + getNodeAsString(parent));
    return null;
  }
  if (nodes.size() > 0) {
    ASTNode retNode=parent;
    for (int i=nodes.size() - 1; i >= 0; i--) {
      ASTNode cNode=nodes.get(i);
      if (getLineNumber(cNode) == lineNumber)       return cNode;
 else       if (getLineNumber(cNode) <= lineNumber && lineNumber <= getLineNumber(cNode,cNode.getStartPosition() + cNode.getLength()))       retNode=cNode;
    }
    return retNode;
  }
  return parent;
}
