{
  if (family == GROUP) {
    for (int i=0; i < childCount; i++) {
      PShape3D child=(PShape3D)children[i];
      child.tessellate();
    }
  }
 else {
    if (!tessellated && shapeEnded) {
      tess.clear();
      tessellator.setInGeometry(in);
      tessellator.setTessGeometry(tess);
      tessellator.setFill(fill || texture != null);
      tessellator.setStroke(stroke);
      tessellator.setStrokeWeight(strokeWeight);
      tessellator.setStrokeCap(strokeCap);
      tessellator.setStrokeJoin(strokeJoin);
      if (family == GEOMETRY) {
        if (kind == POINTS) {
          tessellator.tessellatePoints();
        }
 else         if (kind == LINES) {
          tessellator.tessellateLines();
        }
 else         if (kind == TRIANGLE || kind == TRIANGLES) {
          if (stroke)           in.addTrianglesEdges();
          if (normalMode == NORMAL_MODE_AUTO)           in.calcTrianglesNormals();
          tessellator.tessellateTriangles();
        }
 else         if (kind == TRIANGLE_FAN) {
          if (stroke)           in.addTriangleFanEdges();
          if (normalMode == NORMAL_MODE_AUTO)           in.calcTriangleFanNormals();
          tessellator.tessellateTriangleFan();
        }
 else         if (kind == TRIANGLE_STRIP) {
          if (stroke)           in.addTriangleStripEdges();
          if (normalMode == NORMAL_MODE_AUTO)           in.calcTriangleStripNormals();
          tessellator.tessellateTriangleStrip();
        }
 else         if (kind == QUAD || kind == QUADS) {
          if (stroke)           in.addQuadsEdges();
          if (normalMode == NORMAL_MODE_AUTO)           in.calcQuadsNormals();
          tessellator.tessellateQuads();
        }
 else         if (kind == QUAD_STRIP) {
          if (stroke)           in.addQuadStripEdges();
          if (normalMode == NORMAL_MODE_AUTO)           in.calcQuadStripNormals();
          tessellator.tessellateQuadStrip();
        }
 else         if (kind == POLYGON) {
          if (stroke)           in.addPolygonEdges(isClosed);
          tessellator.tessellatePolygon(isSolid,isClosed,normalMode == NORMAL_MODE_AUTO);
        }
      }
 else       if (family == PRIMITIVE) {
        if (kind == POINT) {
          tessellatePoint();
        }
 else         if (kind == LINE) {
          tessellateLine();
        }
 else         if (kind == TRIANGLE) {
          tessellateTriangle();
        }
 else         if (kind == QUAD) {
          tessellateQuad();
        }
 else         if (kind == RECT) {
          tessellateRect();
        }
 else         if (kind == ELLIPSE) {
          tessellateEllipse();
        }
 else         if (kind == ARC) {
          tessellateArc();
        }
 else         if (kind == BOX) {
          tessellateBox();
        }
 else         if (kind == SPHERE) {
          tessellateSphere();
        }
      }
 else       if (family == PATH) {
      }
      tess.trim();
      if (texture != null && parent != null) {
        ((PShape3D)parent).addTexture(texture);
      }
    }
  }
  tessellated=true;
  modified=false;
}
