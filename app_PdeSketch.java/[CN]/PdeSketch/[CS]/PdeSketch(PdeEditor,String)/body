{
  this.editor=editor;
  File mainFile=new File(path);
  mainFilename=mainFile.getName();
  if (mainFilename.endsWith(".pde")) {
    name=mainFilename.substring(0,mainFilename.length() - 4);
  }
 else   if (mainFilename.endsWith(".java")) {
    name=mainFilename.substring(0,mainFilename.length() - 5);
  }
  tempBuildFolder=new File(TEMP_BUILD_PATH);
  if (!tempBuildFolder.exists()) {
    tempBuildFolder.mkdirs();
    PdeBase.showError("Required folder missing","A required folder was missing from \n" + "from your installation of Processing.\n" + "It has now been replaced, please restart    \n"+ "the application to complete the repair.",null);
  }
  folder=new File(new File(path).getParent());
  System.out.println("sketch dir is " + folder);
  codeFolder=new File(folder,"code");
  dataFolder=new File(folder,"data");
  load();
}
