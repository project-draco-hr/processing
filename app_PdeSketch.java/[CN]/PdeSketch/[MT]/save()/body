{
  if (current.modified) {
    current.program=editor.getText();
  }
  if (!modified)   return;
  if (isReadOnly()) {
    PdeBase.showMessage("Sketch is read-only","Some files are marked \"read-only\", so you'll\n" + "need to re-save this sketch to another location.");
    if (!saveAs())     return;
  }
  for (int i=0; i < codeCount; i++) {
    if (code[i].modified)     code[i].save();
  }
  calcModified();
}
