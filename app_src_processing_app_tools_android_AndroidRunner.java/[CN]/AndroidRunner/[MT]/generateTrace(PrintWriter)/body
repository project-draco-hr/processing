{
  vm.setDebugTraceMode(debugTraceMode);
  EventThread eventThread=null;
  eventThread=new EventThread(this,vm,excludes,writer);
  eventThread.setEventRequests(watchFields);
  eventThread.start();
  final Process process=vm.process();
  if (process != null) {
    final MessageSiphon ms=new MessageSiphon(process.getErrorStream(),this);
    errThread=ms.getThread();
    outThread=new StreamRedirectThread("output reader",process.getInputStream(),System.out);
    errThread.start();
    outThread.start();
  }
 else {
    System.out.println("process is null, so no streams...");
  }
  vm.resume();
  System.out.println("done with resume");
  try {
    if (eventThread != null) {
      eventThread.join();
    }
    if (editor != null) {
      editor.internalRunnerClosed();
    }
  }
 catch (  final InterruptedException exc) {
  }
  if (writer != null) {
    writer.close();
  }
}
