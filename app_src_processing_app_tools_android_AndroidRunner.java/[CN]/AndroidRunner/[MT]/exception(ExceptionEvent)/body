{
  final ObjectReference or=event.exception();
  final ReferenceType rt=or.referenceType();
  final String exceptionName=rt.name();
  final Field messageField=rt.fieldByName("detailMessage");
  final Value messageValue=or.getValue(messageField);
  final int last=exceptionName.lastIndexOf('.');
  String message=exceptionName.substring(last + 1);
  if (messageValue != null) {
    String messageStr=messageValue.toString();
    if (messageStr.startsWith("\"")) {
      messageStr=messageStr.substring(1,messageStr.length() - 1);
    }
    message+=": " + messageStr;
  }
  reportException(message,event.thread());
  if (editor != null) {
    editor.internalRunnerClosed();
  }
}
