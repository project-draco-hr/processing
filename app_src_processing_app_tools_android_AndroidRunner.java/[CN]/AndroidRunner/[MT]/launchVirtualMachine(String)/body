{
  LaunchingConnector connector=findLaunchingConnector("com.sun.jdi.SocketAttach");
  Map arguments=connector.defaultArguments();
  Connector.Argument portArg=(Connector.Argument)arguments.get("port");
  portArg.setValue(port);
  try {
    return connector.launch(arguments);
  }
 catch (  IOException exc) {
    throw new Error("Unable to launch target VM: " + exc);
  }
catch (  IllegalConnectorArgumentsException exc) {
    throw new Error("Internal error: " + exc);
  }
catch (  VMStartException exc) {
    Process p=exc.process();
    String[] errorStrings=PApplet.loadStrings(p.getErrorStream());
    PApplet.loadStrings(p.getInputStream());
    if (errorStrings != null && errorStrings.length > 1) {
      PApplet.println(errorStrings);
      System.err.println("Using startup command:");
      PApplet.println(arguments);
    }
 else {
      exc.printStackTrace();
      System.err.println("Could not run the sketch (Target VM failed to initialize).");
      if (Preferences.getBoolean("run.options.memory")) {
        System.err.println("Make sure that you haven't set the maximum available memory too high.");
      }
      System.err.println("For more information, read revisions.txt and Help \u2192 Troubleshooting.");
    }
    listener.statusError("Could not run the sketch.");
    return null;
  }
}
