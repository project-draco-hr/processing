{
  if ((null == timestamp) || (timestamp == TIMESTAMP_IMMEDIATE)) {
    stream.write(0);
    stream.write(1);
    return;
  }
  long millisecs=timestamp.getTime();
  long secsSince1970=millisecs / 1000;
  long secs=secsSince1970 + SECONDS_FROM_1900_TO_1970.longValue();
  long fraction=((millisecs % 1000) * 0x100000000L) / 1000;
  stream.write((int)secs);
  stream.write((int)fraction);
}
