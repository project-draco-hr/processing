{
  if (primarySurface) {
    parent.updateListeners(parent);
    image=new BufferedImage(width,height,BufferedImage.TYPE_INT_RGB);
    offscreen=new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
    g2=(Graphics2D)offscreen.getGraphics();
  }
 else {
    image=new BufferedImage(width,height,BufferedImage.TYPE_INT_ARGB);
    g2=(Graphics2D)image.getGraphics();
  }
}
