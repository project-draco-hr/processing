{
  if ((pixels == null) || (pixels.length != width * height)) {
    pixels=new int[width * height];
  }
  WritableRaster raster=getRaster();
  raster.getDataElements(0,0,width,height,pixels);
  if (raster.getNumBands() == 3) {
    for (int i=0; i < pixels.length; i++) {
      pixels[i]=0xff000000 | pixels[i];
    }
  }
}
