{
  PImage output=new PImage(w,h);
  output.parent=parent;
  WritableRaster raster=((BufferedImage)(primarySurface ? offscreen : image)).getRaster();
  raster.getDataElements(x,y,w,h,output.pixels);
  return output;
}
