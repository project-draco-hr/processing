{
  this.textarea=(JavaTextArea)textarea;
  this.editor=editor;
  this.insertionPosition=position;
  if (subWord.indexOf('.') != -1) {
    this.subWord=subWord.substring(subWord.lastIndexOf('.') + 1);
  }
 else {
    this.subWord=subWord;
  }
  loadIcons();
  popupMenu=new JPopupMenu();
  popupMenu.removeAll();
  popupMenu.setOpaque(false);
  popupMenu.setBorder(null);
  scrollPane=new JScrollPane();
  styleScrollPane();
  scrollPane.setViewportView(completionList=createSuggestionList(position,items));
  popupMenu.add(scrollPane,BorderLayout.CENTER);
  popupMenu.setPopupSize(calcWidth(),calcHeight(items.getSize()));
  textarea.requestFocusInWindow();
  ASTGenerator astGenerator=editor.getErrorChecker().getASTGenerator();
synchronized (astGenerator) {
    astGenerator.updateJavaDoc(completionList.getSelectedValue());
  }
  popupMenu.show(textarea,location.x,textarea.getBaseline(0,0) + location.y);
}
