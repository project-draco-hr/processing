{
  if (devices.put(device.getId(),device) != null) {
    throw new IllegalStateException("Adding " + device + ", which already exists!");
  }
  try {
    device.initialize();
  }
 catch (  final Exception e) {
    System.err.println("Cannot initialize " + device + ": "+ e);
    devices.remove(device.getId());
  }
  firePropertyChange(DEVICE_ADDED,null,device);
}
