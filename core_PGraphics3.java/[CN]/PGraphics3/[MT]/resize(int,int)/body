{
  width=iwidth;
  height=iheight;
  width1=width - 1;
  height1=height - 1;
  allocate();
  cameraFOV=60 * DEG_TO_RAD;
  cameraX=width / 2.0f;
  cameraY=height / 2.0f;
  cameraZ=cameraY / ((float)tan(cameraFOV / 2.0f));
  cameraNear=cameraZ / 10.0f;
  cameraFar=cameraZ * 10.0f;
  cameraAspect=(float)width / (float)height;
  lightsX=new float[MAX_LIGHTS];
  lightsY=new float[MAX_LIGHTS];
  lightsZ=new float[MAX_LIGHTS];
  lightsDiffuseR=new float[MAX_LIGHTS];
  lightsDiffuseG=new float[MAX_LIGHTS];
  lightsDiffuseB=new float[MAX_LIGHTS];
  lightsSpecularR=new float[MAX_LIGHTS];
  lightsSpecularG=new float[MAX_LIGHTS];
  lightsSpecularB=new float[MAX_LIGHTS];
  lights=new int[MAX_LIGHTS];
  lightsNX=new float[MAX_LIGHTS];
  lightsNY=new float[MAX_LIGHTS];
  lightsNZ=new float[MAX_LIGHTS];
  lightsFalloffConstant=new float[MAX_LIGHTS];
  lightsFalloffLinear=new float[MAX_LIGHTS];
  lightsFalloffQuadratic=new float[MAX_LIGHTS];
  lightsSpotAngle=new float[MAX_LIGHTS];
  lightsSpotAngleCos=new float[MAX_LIGHTS];
  lightsSpotConcentration=new float[MAX_LIGHTS];
  projection=new PMatrix();
  modelview=new PMatrix(MATRIX_STACK_DEPTH);
  modelviewInv=new PMatrix(MATRIX_STACK_DEPTH);
  forwardTransform=modelview;
  reverseTransform=modelviewInv;
  camera=new PMatrix();
  cameraInv=new PMatrix();
  camera();
  perspective();
}
