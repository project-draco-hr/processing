{
  int peModifiers=nativeEvent.getModifiers() & (InputEvent.SHIFT_MASK | InputEvent.CTRL_MASK | InputEvent.META_MASK| InputEvent.ALT_MASK);
  char keyChar;
  if (nativeEvent.getKeyChar() == 0) {
    keyChar=PConstants.CODED;
  }
 else {
    keyChar=nativeEvent.getKeyChar();
  }
  KeyEvent ke=new KeyEvent(nativeEvent,nativeEvent.getWhen(),peAction,peModifiers,keyChar,nativeEvent.getKeySymbol());
  sketch.postEvent(ke);
}
