{
  super.paint(gfx);
  if (interactiveMode && handles != null) {
    int currentTab=ta.editor.getSketch().getCurrentCodeIndex();
    Graphics2D g2d=(Graphics2D)gfx;
    g2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,RenderingHints.VALUE_ANTIALIAS_ON);
    for (    Handle n : handles[currentTab]) {
      int lineStartChar=ta.getLineStartOffset(n.line);
      int x=ta.offsetToX(n.line,n.newStartChar - lineStartChar);
      int y=ta.lineToY(n.line) + fm.getHeight() + 1;
      int end=ta.offsetToX(n.line,n.newEndChar - lineStartChar);
      n.setPos(x,y);
      n.setWidth(end - x);
      n.draw(g2d,n == mouseHandle);
    }
    for (    ColorControlBox cBox : colorBoxes[currentTab]) {
      int lineStartChar=ta.getLineStartOffset(cBox.getLine());
      int x=ta.offsetToX(cBox.getLine(),cBox.getCharIndex() - lineStartChar);
      int y=ta.lineToY(cBox.getLine()) + fm.getDescent();
      cBox.setPos(x,y + 1);
      cBox.draw(g2d);
    }
  }
}
