{
  if (lineShader == null) {
    lineShader=new PShader(parent);
    lineShader.loadVertexShader(PGraphicsAndroid3D.class.getResource("LineShaderVert.glsl"));
    lineShader.loadFragmentShader(PGraphicsAndroid3D.class.getResource("LineShaderFrag.glsl"));
    lineShader.setup();
    lineModelviewLoc=lineShader.getUniformLocation("modelviewMatrix");
    lineProjectionLoc=lineShader.getUniformLocation("projectionMatrix");
    lineViewportLoc=lineShader.getUniformLocation("viewport");
    linePerspectiveLoc=lineShader.getUniformLocation("perspective");
    lineVertexAttribLoc=lineShader.getAttribLocation("inVertex");
    lineColorAttribLoc=lineShader.getAttribLocation("inColor");
    lineNormalAttribLoc=lineShader.getAttribLocation("inNormal");
    lineDirWidthAttribLoc=lineShader.getAttribLocation("inDirWidth");
  }
  lineShader.start();
  modelview.get(glModelview);
  lineShader.set4x4MatUniform(lineModelviewLoc,glModelview);
  projection.get(glProjection);
  lineShader.set4x4MatUniform(lineProjectionLoc,glProjection);
  lineShader.set4FloatUniform(lineViewportLoc,viewport[0],viewport[1],viewport[2],viewport[3]);
  if (hints[ENABLE_PERSPECTIVE_CORRECTED_LINES]) {
    lineShader.setIntUniform(linePerspectiveLoc,1);
  }
 else {
    lineShader.setIntUniform(linePerspectiveLoc,0);
  }
}
