{
  flush();
  PImage newbie=parent.createImage(w,h,ARGB);
  IntBuffer newbieBuffer=IntBuffer.allocate(w * h);
  boolean notCurrent=!primarySurface && offscreenFramebuffer != currentFramebuffer;
  if (notCurrent) {
    pushFramebuffer();
    setFramebuffer(offscreenFramebuffer);
  }
  newbieBuffer.rewind();
  if (primarySurface) {
    pgl.setReadBuffer(PGL.FRONT);
  }
  pgl.readPixels(newbieBuffer,x,height - y - h,w,h);
  if (notCurrent) {
    popFramebuffer();
  }
  newbie.loadPixels();
  newbieBuffer.get(newbie.pixels);
  nativeToJavaARGB(newbie);
  return newbie;
}
