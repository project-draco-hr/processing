{
  recordingShape=false;
  if (0 < recordedVertices.size() && shape != null) {
    shape.beginUpdate(VERTICES);
    shape.setVertex(recordedVertices);
    shape.endUpdate();
    shape.beginUpdate(COLORS);
    shape.setColor(recordedColors);
    shape.endUpdate();
    shape.beginUpdate(NORMALS);
    shape.setNormal(recordedNormals);
    shape.endUpdate();
    for (int t=0; t < numRecordedTextures; t++) {
      shape.beginUpdate(TEXTURES0 + textureUnit);
      shape.setTexCoord(recordedTexCoords[t]);
      shape.endUpdate();
    }
    shape.setGroups(recordedGroups);
    shape.optimizeGroups();
    recordedVertices.clear();
    recordedColors.clear();
    recordedNormals.clear();
    for (int t=0; t < maxTextureUnits; t++) {
      recordedTexCoords[t].clear();
    }
    recordedGroups.clear();
  }
}
