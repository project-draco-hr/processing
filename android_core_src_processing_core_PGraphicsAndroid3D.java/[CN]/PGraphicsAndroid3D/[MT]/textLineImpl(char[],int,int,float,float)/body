{
  if (gl11 == null || gl11x == null) {
    throw new RuntimeException("A3D: Text rendering requires OpenGL ES 1.1");
  }
  gl.glEnable(GL10.GL_TEXTURE_2D);
  if (!blend || blendMode != BLEND) {
    gl.glEnable(GL10.GL_BLEND);
    if (blendEqSupported)     gl11xp.glBlendEquation(GL11ExtensionPack.GL_FUNC_ADD);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA,GL10.GL_ONE_MINUS_SRC_ALPHA);
  }
  if (textFont.textures == null) {
    textFont.initTexture(parent,maxTextureSize,maxTextureSize);
    textFont.addAllGlyphsToTexture();
  }
  gl.glEnable(GL10.GL_TEXTURE_2D);
  textFont.setFirstTexture();
  gl.glColor4f(fillR,fillG,fillB,fillA);
  if (textMode == MODEL) {
    if (textVertexBuffer == null) {
      allocateTextModel();
    }
    gl.glNormal3f(0,0,1);
    textVertexCount=0;
  }
  super.textLineImpl(buffer,start,stop,x,y);
  if (textMode == MODEL && 0 < textVertexCount) {
    renderTextModel();
  }
  if (blend) {
    blend(blendMode);
  }
 else {
    noBlend();
  }
  gl.glDisable(GL10.GL_TEXTURE_2D);
}
