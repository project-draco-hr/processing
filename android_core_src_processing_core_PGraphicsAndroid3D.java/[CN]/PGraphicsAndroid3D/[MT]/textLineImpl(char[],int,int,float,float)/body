{
  if (gl11 == null || gl11x == null) {
    throw new RuntimeException("A3D: Text rendering requires OpenGL ES 1.1");
  }
  gl.glEnable(GL10.GL_TEXTURE_2D);
  if (screenBlendMode != BLEND) {
    gl.glEnable(GL10.GL_BLEND);
    if (blendEqSupported)     gl11xp.glBlendEquation(GL11ExtensionPack.GL_FUNC_ADD);
    gl.glBlendFunc(GL10.GL_SRC_ALPHA,GL10.GL_ONE_MINUS_SRC_ALPHA);
  }
  textTex=(PFontTexture)textFont.getCache(a3d);
  if (textTex == null) {
    textTex=new PFontTexture(parent,textFont,maxTextureSize,maxTextureSize);
    textFont.setCache(this,textTex);
    textTex.addAllGlyphsToTexture();
  }
  textTex.setFirstTexture();
  setFillColor();
  if (textMode == MODEL) {
    if (textVertexBuffer == null) {
      allocateTextModel();
    }
    setDefNormals(0,0,1);
    textVertexCount=0;
  }
  super.textLineImpl(buffer,start,stop,x,y);
  if (textMode == MODEL && 0 < textVertexCount) {
    renderTextModel();
  }
  screenBlend(screenBlendMode);
  gl.glBindTexture(GL10.GL_TEXTURE_2D,0);
  gl.glDisable(GL10.GL_TEXTURE_2D);
}
