{
  offscreenTexCrop=new int[4];
  offscreenTexCrop[0]=0;
  offscreenTexCrop[1]=0;
  offscreenTexCrop[2]=width;
  offscreenTexCrop[3]=height;
  offscreenImages=new PImage[2];
  offscreenParams=new PTexture.Parameters[2];
  if (primarySurface) {
    offscreenParams[0]=new PTexture.Parameters(ARGB,POINT);
    offscreenParams[1]=new PTexture.Parameters(ARGB,POINT);
    offscreenImages[0]=parent.createImage(width,height,ARGB,offscreenParams[0]);
    offscreenImages[1]=parent.createImage(width,height,ARGB,offscreenParams[1]);
  }
 else {
    offscreenParams[0]=new PTexture.Parameters(ARGB,BILINEAR);
    offscreenParams[1]=new PTexture.Parameters(ARGB,BILINEAR);
    offscreenImages[0]=parent.createImage(width,height,ARGB,offscreenParams[0]);
    offscreenImages[1]=parent.createImage(width,height,ARGB,offscreenParams[1]);
  }
  offscreenTextures=new PTexture[2];
  offscreenTextures[0]=addTexture(offscreenImages[0]);
  offscreenTextures[1]=addTexture(offscreenImages[1]);
  offscreenTextures[0].setFlippedY(true);
  offscreenTextures[1].setFlippedY(true);
  offscreenIndex=0;
  offscreenFramebuffer=new PFramebuffer(parent,offscreenTextures[0].getGLWidth(),offscreenTextures[0].getGLHeight(),false);
  offscreenFramebuffer.addDepthBuffer(offscreenDepthBits);
  if (0 < offscreenStencilBits) {
    offscreenFramebuffer.addStencilBuffer(offscreenStencilBits);
  }
  texture=offscreenTextures[offscreenIndex];
  this.setCache(a3d,offscreenTextures[offscreenIndex]);
  this.setParams(a3d,offscreenParams[offscreenIndex]);
}
