{
  if (!fillVBOsCreated) {
    createFillBuffers();
    fillVBOsCreated=true;
  }
  startFillShader();
  enableFillVertex();
  enableFillColor();
  if (lights) {
    enableFillNormal();
    enableFillMaterials();
  }
  int size=tessGeo.fillVertexCount;
  pgl.bindVertexBuffer(glFillVertexBufferID);
  pgl.copyVertexBufferData(tessGeo.fillVertices,3 * size,vboMode);
  setFillVertexFormat(3,0);
  pgl.bindVertexBuffer(glFillColorBufferID);
  pgl.copyVertexBufferData(tessGeo.fillColors,4 * size,vboMode);
  setFillColorFormat(4,0);
  if (lights) {
    pgl.bindVertexBuffer(glFillNormalBufferID);
    pgl.copyVertexBufferData(tessGeo.fillNormals,3 * size,vboMode);
    setFillNormalFormat(3,0);
  }
  if (texCache.hasTexture) {
    pgl.setActiveTexUnit(0);
    enableFillTexCoord();
    pgl.bindVertexBuffer(glFillTexCoordBufferID);
    pgl.copyVertexBufferData(tessGeo.fillTexcoords,2 * size,vboMode);
    setFillTexCoordFormat(2,0);
  }
  pgl.bindIndexBuffer(glFillIndexBufferID);
  PTexture tex0=null;
  for (int i=0; i < texCache.count; i++) {
    PImage img=texCache.textures[i];
    PTexture tex=null;
    if (img != null) {
      tex=pg.getTexture(img);
      if (tex != null) {
        tex.bind();
        tex0=tex;
        enableFillTexturing();
      }
 else {
        disableFillTexturing();
      }
    }
 else {
      disableFillTexturing();
    }
    if (tex == null && tex0 != null) {
      tex0.unbind();
      pgl.disableTexturing(tex0.glTarget);
    }
    int offset=texCache.firstIndex[i];
    size=texCache.lastIndex[i] - texCache.firstIndex[i] + 1;
    pgl.copyIndexBufferData(tessGeo.fillIndices,offset,size,vboMode);
    pgl.renderIndexBuffer(size);
  }
  if (texCache.hasTexture) {
    for (int i=0; i < texCache.count; i++) {
      PImage img=texCache.textures[i];
      if (img != null) {
        PTexture tex=pg.getTexture(img);
        if (tex != null) {
          tex.unbind();
        }
      }
    }
    for (int i=0; i < texCache.count; i++) {
      PImage img=texCache.textures[i];
      if (img != null) {
        PTexture tex=pg.getTexture(img);
        if (tex != null) {
          pgl.disableTexturing(tex.glTarget);
        }
      }
    }
    disableFillTexCoord();
    disableFillTexturing();
  }
  pgl.unbindIndexBuffer();
  pgl.unbindVertexBuffer();
  disableFillVertex();
  disableFillColor();
  if (lights) {
    disableFillNormal();
  }
  stopFillShader();
}
