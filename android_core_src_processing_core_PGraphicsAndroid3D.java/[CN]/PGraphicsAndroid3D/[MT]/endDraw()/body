{
  report("top endDraw()");
  if (primarySurface) {
    if (!clearColorBuffer0) {
      if (fboSupported) {
        if (offscreenFramebuffer != null) {
          popFramebuffer();
          gl.glClearColor(0,0,0,0);
          gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
          drawOffscreenTexture(offscreenIndex);
          swapOffscreenIndex();
        }
      }
 else {
        if (texture != null) {
          copyFrameToTexture();
        }
      }
    }
  }
 else {
    if (offscreenFramebuffer != null) {
      popFramebuffer();
      swapOffscreenIndex();
    }
  }
  if (primarySurface) {
    gl.glFlush();
  }
 else {
    ((PGraphicsAndroid3D)parent.g).restoreGLState();
  }
  report("bot endDraw()");
}
