{
  PImage newbie=new PImage(w,h,format);
  newbie.parent=parent;
  if (pixels == null) {
    bitmap.getPixels(newbie.pixels,0,w,x,y,w,h);
  }
 else {
    int index=y * width + x;
    int index2=0;
    for (int row=y; row < y + h; row++) {
      System.arraycopy(pixels,index,newbie.pixels,index2,w);
      index+=width;
      index2+=w;
    }
  }
  return newbie;
}
