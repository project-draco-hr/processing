{
  BufferedInputStream from=new BufferedInputStream(new FileInputStream(sourceFile));
  BufferedOutputStream to=new BufferedOutputStream(new FileOutputStream(targetFile));
  byte[] buffer=new byte[16 * 1024];
  int bytesRead;
  int totalRead=0;
  while ((bytesRead=from.read(buffer)) != -1) {
    to.write(buffer,0,bytesRead);
    totalRead+=bytesRead;
    if (totalRead >= 524288) {
      progress+=totalRead;
      progBar.setProgressBarStatus((int)Math.min(Math.ceil(progress * 100.0 / totalSize),100));
      totalRead=0;
    }
  }
  if (sourceFile.length() > 524288) {
    progress+=totalRead;
    progBar.setProgressBarStatus((int)Math.min(Math.ceil(progress * 100.0 / totalSize),100));
  }
  from.close();
  from=null;
  to.flush();
  to.close();
  to=null;
  targetFile.setLastModified(sourceFile.lastModified());
  targetFile.setExecutable(sourceFile.canExecute());
}
