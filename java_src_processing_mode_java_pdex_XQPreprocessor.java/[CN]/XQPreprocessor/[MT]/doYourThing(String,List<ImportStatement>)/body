{
  this.extraImports=programImports;
  Document doc=new Document(source);
  ASTParser parser=ASTParser.newParser(AST.JLS8);
  parser.setSource(doc.get().toCharArray());
  parser.setKind(ASTParser.K_COMPILATION_UNIT);
  @SuppressWarnings("unchecked") Map<String,String> options=JavaCore.getOptions();
  JavaCore.setComplianceOptions(JavaCore.VERSION_1_8,options);
  options.put(JavaCore.COMPILER_SOURCE,JavaCore.VERSION_1_8);
  parser.setCompilerOptions(options);
  CompilationUnit cu=(CompilationUnit)parser.createAST(null);
  cu.recordModifications();
  rewrite=ASTRewrite.create(cu.getAST());
  cu.accept(new XQASTVisitor());
  TextEdit edits=cu.rewrite(doc,null);
  try {
    edits.apply(doc);
  }
 catch (  MalformedTreeException e) {
    e.printStackTrace();
  }
catch (  BadLocationException e) {
    e.printStackTrace();
  }
  return doc.get();
}
