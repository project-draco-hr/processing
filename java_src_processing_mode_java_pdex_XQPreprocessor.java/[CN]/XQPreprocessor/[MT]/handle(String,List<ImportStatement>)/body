{
  this.extraImports=programImports;
  Document doc=new Document(source);
  ASTParser parser=ASTParser.newParser(AST.JLS8);
  parser.setSource(doc.get().toCharArray());
  parser.setKind(ASTParser.K_COMPILATION_UNIT);
  parser.setCompilerOptions(ErrorCheckerService.COMPILER_OPTIONS);
  CompilationUnit cu=(CompilationUnit)parser.createAST(null);
  cu.recordModifications();
  rewrite=ASTRewrite.create(cu.getAST());
  cu.accept(new XQVisitor());
  TextEdit edits=cu.rewrite(doc,null);
  try {
    edits.apply(doc);
  }
 catch (  MalformedTreeException|BadLocationException e) {
    e.printStackTrace();
  }
  return doc.get();
}
