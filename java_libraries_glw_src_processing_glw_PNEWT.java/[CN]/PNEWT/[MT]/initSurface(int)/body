{
  if (profile == null) {
    profile=GLProfile.getDefault();
  }
 else {
    window.removeGLEventListener(listener);
    pg.parent.remove(canvasNEWT);
  }
  GLCapabilities caps=new GLCapabilities(profile);
  caps.setAlphaBits(REQUESTED_ALPHA_BITS);
  caps.setDepthBits(REQUESTED_DEPTH_BITS);
  caps.setStencilBits(REQUESTED_STENCIL_BITS);
  if (1 < antialias) {
    caps.setSampleBuffers(true);
    caps.setNumSamples(antialias);
  }
 else {
    caps.setSampleBuffers(false);
  }
  fboLayerRequested=false;
  window=GLWindow.create(caps);
  window.setSize(pg.width,pg.height);
  window.setVisible(true);
  pg.parent.frame.setVisible(false);
  canvas=canvasNEWT;
  canvasAWT=null;
  window.addWindowListener(new WindowAdapter(){
    @Override public void windowDestroyNotify(    final WindowEvent e){
      System.exit(0);
    }
  }
);
  registerListeners();
}
