{
  String url=Util.class.getClassLoader().getResource(Util.class.getName().replace('.','/') + ".class").getFile().replaceAll("%20"," ");
  if (url.startsWith("file:")) {
    String jar=url.substring(5,url.lastIndexOf('!'));
    int x=jar.lastIndexOf('/');
    if (x == -1) {
      x=jar.lastIndexOf('\\');
    }
    String basedir=jar.substring(0,x + 1);
    return new File(basedir);
  }
 else {
    return new File(".");
  }
}
