{
  if (serialEvent.getEventType() == SerialPortEvent.DATA_AVAILABLE) {
    try {
      while (input.available() > 0) {
synchronized (buffer) {
          if (bufferLast == buffer.length) {
            byte temp[]=new byte[bufferLast << 1];
            System.arraycopy(buffer,0,temp,0,bufferLast);
            buffer=temp;
          }
          buffer[bufferLast++]=(byte)input.read();
          if (serialEventMethod != null) {
            if ((bufferUntil && (buffer[bufferLast - 1] == bufferUntilByte)) || (!bufferUntil && ((bufferLast - bufferIndex) >= bufferSize))) {
              try {
                serialEventMethod.invoke(parent,new Object[]{this});
              }
 catch (              Exception e) {
                String msg="error, disabling serialEvent() for " + port;
                System.err.println(msg);
                e.printStackTrace();
                serialEventMethod=null;
              }
            }
          }
        }
      }
    }
 catch (    IOException e) {
      errorMessage("serialEvent",e);
    }
  }
}
