{
  report("top endDraw()");
  if (!drawing) {
    return;
  }
  flush();
  if (primaryGraphics) {
    endOnscreenDraw();
  }
 else {
    endOffscreenDraw();
  }
  if (primaryGraphics) {
    setCurrentPG(null);
  }
 else {
    getPrimaryPG().setCurrentPG(getPrimaryPG());
  }
  drawing=false;
  report("bot endDraw()");
}
