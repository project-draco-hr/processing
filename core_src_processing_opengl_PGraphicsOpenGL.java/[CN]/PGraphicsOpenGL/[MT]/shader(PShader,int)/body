{
  flush();
  if (kind == TRIANGLES || kind == QUADS || kind == POLYGON) {
    if (shader instanceof TextureShader) {
      textureShader=(TextureShader)shader;
    }
 else     if (shader instanceof ColorShader) {
      colorShader=(ColorShader)shader;
    }
 else     if (shader instanceof TexlightShader) {
      texlightShader=(TexlightShader)shader;
    }
 else     if (shader instanceof LightShader) {
      lightShader=(LightShader)shader;
    }
 else {
      PGraphics.showWarning(WRONG_SHADER_TYPE_ERROR);
    }
  }
 else   if (kind == LINES) {
    if (shader instanceof LineShader) {
      lineShader=(LineShader)shader;
    }
 else {
      PGraphics.showWarning(WRONG_SHADER_TYPE_ERROR);
    }
  }
 else   if (kind == POINTS) {
    if (shader instanceof PointShader) {
      pointShader=(PointShader)shader;
    }
 else {
      PGraphics.showWarning(WRONG_SHADER_TYPE_ERROR);
    }
  }
 else {
    PGraphics.showWarning(UNKNOWN_SHADER_KIND_ERROR);
  }
}
