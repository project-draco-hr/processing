{
  FrameBuffer pixfb=null;
  if (primarySurface) {
    if (op == OP_READ) {
      if (pgl.isFBOBacked() && pgl.isMultisampled()) {
        pgl.syncBackTexture();
        pixfb=readFramebuffer;
      }
 else {
        pixfb=drawFramebuffer;
      }
    }
 else     if (op == OP_WRITE) {
      pixfb=drawFramebuffer;
    }
  }
 else {
    if (op == OP_READ) {
      if (offscreenMultisample) {
        multisampleFramebuffer.copy(offscreenFramebuffer,currentFramebuffer);
      }
      pixfb=offscreenFramebuffer;
    }
 else     if (op == OP_WRITE) {
      pixfb=offscreenMultisample ? multisampleFramebuffer : offscreenFramebuffer;
    }
  }
  if (pixfb != currentFramebuffer) {
    pushFramebuffer();
    setFramebuffer(pixfb);
    pixOpChangedFB=true;
  }
  if (op == OP_READ) {
    pgl.readBuffer(pgl.getDefautDrawBuffer());
  }
 else   if (op == OP_WRITE) {
    pgl.drawBuffer(pgl.getDefautDrawBuffer());
  }
  pixelsOp=op;
}
