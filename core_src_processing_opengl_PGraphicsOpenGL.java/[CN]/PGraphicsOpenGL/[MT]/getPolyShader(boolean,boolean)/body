{
  PolyShader shader;
  if (lit) {
    if (tex) {
      if (polyShader == null) {
        if (defTexlightShader == null) {
          defTexlightShader=new PolyShader(parent,defTexlightShaderVertURL,defTextureShaderFragURL);
        }
        shader=defTexlightShader;
      }
 else {
        shader=polyShader;
      }
    }
 else {
      if (polyShader == null) {
        if (defLightShader == null) {
          defLightShader=new PolyShader(parent,defLightShaderVertURL,defColorShaderFragURL);
        }
        shader=defLightShader;
      }
 else {
        shader=polyShader;
      }
    }
  }
 else {
    if (tex) {
      if (polyShader == null) {
        if (defTextureShader == null) {
          defTextureShader=new PolyShader(parent,defTextureShaderVertURL,defTextureShaderFragURL);
        }
        shader=defTextureShader;
      }
 else {
        shader=polyShader;
      }
    }
 else {
      if (polyShader == null) {
        if (defColorShader == null) {
          defColorShader=new PolyShader(parent,defColorShaderVertURL,defColorShaderFragURL);
        }
        shader=defColorShader;
      }
 else {
        shader=polyShader;
      }
    }
  }
  shader.setRenderer(this);
  shader.loadAttributes();
  shader.loadUniforms();
  return shader;
}
