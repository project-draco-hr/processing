{
  BaseShader shader;
  if (lit) {
    if (tex) {
      if (texlightShader == null) {
        if (defTexlightShader == null) {
          defTexlightShader=new TexlightShader(parent,defTexlightShaderVertURL,defTextureShaderFragURL);
        }
        shader=defTexlightShader;
        texlightShaderCheck();
      }
 else {
        shader=texlightShader;
      }
    }
 else {
      if (lightShader == null) {
        if (defLightShader == null) {
          defLightShader=new LightShader(parent,defLightShaderVertURL,defColorShaderFragURL);
        }
        shader=defLightShader;
        lightShaderCheck();
      }
 else {
        shader=lightShader;
      }
    }
  }
 else {
    if (tex) {
      if (textureShader == null) {
        if (defTextureShader == null) {
          defTextureShader=new TexureShader(parent,defTextureShaderVertURL,defTextureShaderFragURL);
        }
        shader=defTextureShader;
        textureShaderCheck();
      }
 else {
        shader=textureShader;
      }
    }
 else {
      if (colorShader == null) {
        if (defColorShader == null) {
          defColorShader=new ColorShader(parent,defColorShaderVertURL,defColorShaderFragURL);
        }
        shader=defColorShader;
        colorShaderCheck();
      }
 else {
        shader=colorShader;
      }
    }
  }
  shader.setRenderer(this);
  shader.loadAttributes();
  shader.loadUniforms();
  return shader;
}
