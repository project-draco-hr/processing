{
  report("top beginDraw()");
  if (!checkGLThread()) {
    return;
  }
  if (drawing) {
    PGraphics.showWarning(ALREADY_DRAWING_ERROR);
    return;
  }
  if (pgCurrent != null && !pgCurrent.primarySurface && !this.primarySurface) {
    PGraphics.showWarning(NESTED_DRAW_ERROR);
    return;
  }
  if (!glParamsRead) {
    getGLParameters();
  }
  if (primarySurface) {
    beginOnscreenDraw();
  }
 else {
    if (pgPrimary.texCache.containsTexture(this)) {
      pgPrimary.flush();
    }
    beginOffscreenDraw();
  }
  setDefaults();
  pgCurrent=this;
  drawing=true;
  clearCalled=false;
  clearColorBuffer0=clearColorBuffer;
  clearColorBuffer=false;
  report("bot beginDraw()");
}
