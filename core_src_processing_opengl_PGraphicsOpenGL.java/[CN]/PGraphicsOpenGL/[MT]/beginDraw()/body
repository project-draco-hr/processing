{
  if (primarySurface) {
    if (initialized) {
      if (sized)       pgl.reinitSurface();
      if (parent.canDraw())       pgl.requestDraw();
    }
 else {
      initPrimary();
    }
    setCurrentPG(this);
  }
 else {
    pgl.getGL(getPrimaryPGL());
    getPrimaryPG().setCurrentPG(this);
  }
  report("top beginDraw()");
  if (!checkGLThread()) {
    return;
  }
  if (drawing) {
    return;
  }
  if (!primarySurface && getPrimaryPG().texCache.containsTexture(this)) {
    getPrimaryPG().flush();
  }
  if (!glParamsRead) {
    getGLParameters();
  }
  setViewport();
  if (primarySurface) {
    beginOnscreenDraw();
  }
 else {
    beginOffscreenDraw();
  }
  setDrawDefaults();
  drawing=true;
  report("bot beginDraw()");
}
