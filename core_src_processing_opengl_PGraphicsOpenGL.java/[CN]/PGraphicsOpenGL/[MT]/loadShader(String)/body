{
  int shaderType=getTypeFromFragmentShader(fragFilename);
  PShader shader=null;
  if (shaderType == PShader.TEXTURE) {
    shader=new PolyTexShader(parent);
    shader.setVertexShader(defPolyTexShaderVertURL);
  }
 else   if (shaderType == PShader.COLOR) {
    shader=new PolyFlatShader(parent);
    shader.setVertexShader(defPolyFlatShaderVertURL);
  }
  if (shader == null) {
    PGraphics.showWarning("The GLSL code doesn't seem to contain a valid " + "shader to use in Processing.");
  }
 else {
    shader.setFragmentShader(fragFilename);
  }
  return shader;
}
