{
  int shaderType=getShaderType(fragFilename);
  PShader shader=null;
  if (shaderType == PShader.POINT) {
    shader=new PointShader(parent);
    shader.setVertexShader(defPointShaderVertURL);
  }
 else   if (shaderType == PShader.LINE) {
    shader=new LineShader(parent);
    shader.setVertexShader(defLineShaderVertURL);
  }
 else   if (shaderType == PShader.TEXLIGHT) {
    shader=new PolyShader(parent);
    shader.setVertexShader(defTexlightShaderVertURL);
    ((PolyShader)shader).setType(PShader.TEXLIGHT);
  }
 else   if (shaderType == PShader.LIGHT) {
    shader=new PolyShader(parent);
    shader.setVertexShader(defLightShaderVertURL);
    ((PolyShader)shader).setType(PShader.LIGHT);
  }
 else   if (shaderType == PShader.TEXTURE) {
    shader=new PolyShader(parent);
    ((PolyShader)shader).setType(PShader.TEXTURE);
    shader.setVertexShader(defTextureShaderVertURL);
  }
 else   if (shaderType == PShader.COLOR) {
    shader=new PolyShader(parent);
    shader.setVertexShader(defColorShaderVertURL);
    ((PolyShader)shader).setType(PShader.COLOR);
  }
 else {
    shader=new PolyShader(parent);
    shader.setVertexShader(defTextureShaderVertURL);
  }
  shader.setFragmentShader(fragFilename);
  return shader;
}
