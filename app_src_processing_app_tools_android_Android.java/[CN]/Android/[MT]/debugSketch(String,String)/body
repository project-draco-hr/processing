{
  try {
    String port=null;
    long timeout=System.currentTimeMillis() + 15 * 1000;
    while (System.currentTimeMillis() < timeout) {
      if (port != null) {
        System.out.println("Waiting a half second " + "for the application to launch...");
        try {
          Thread.sleep(500);
        }
 catch (        InterruptedException ie) {
        }
      }
      port=getJdwpPort(device);
      if (!port.equals(prevPort)) {
        break;
      }
    }
    System.out.println("Found application on port " + port + ".");
    String[] cmd=new String[]{"adb","-s",device,"forward","tcp:" + ADB_SOCKET_PORT,"jdwp:" + port};
    Pavarotti fwd=new Pavarotti(cmd);
    fwd.printCommand();
    int result=fwd.waitFor();
    fwd.printLines();
    if (result != 0) {
      editor.statusError("Could not connect for debugging.");
      return false;
    }
    System.out.println("creating runner");
    AndroidRunner ar=new AndroidRunner(editor,editor.getSketch());
    return ar.launch(ADB_SOCKET_PORT);
  }
 catch (  IOException e) {
    editor.statusError(e);
  }
catch (  InterruptedException e) {
  }
  return false;
}
