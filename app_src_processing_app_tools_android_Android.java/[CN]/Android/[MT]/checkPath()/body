{
  Platform platform=Base.getPlatform();
  sdkPath=platform.getenv("ANDROID_SDK");
  if (sdkPath == null) {
    Base.showWarning("Android Tools Error","Before using Android mode, you must first set the\n" + "ANDROID_SDK environment variable, and restart Processing.",null);
    return false;
  }
  File toolsFolder=new File(sdkPath,"tools");
  if (!toolsFolder.exists()) {
    Base.showWarning("Android Tools Error","The ANDROID_SDK environment variable is set incorrectly,\n" + "or the directory no longer exists. No tools folder was\n" + "found in " + toolsFolder.getAbsolutePath() + ".\n"+ "Please fix the location and restart Processing.",null);
    return false;
  }
  try {
    String canonicalTools=toolsFolder.getCanonicalPath();
    String envPath=platform.getenv("PATH");
    String[] entries=PApplet.split(envPath,File.pathSeparatorChar);
    for (    String entry : entries) {
      String canonicalEntry=new File(entry).getCanonicalPath();
      if (canonicalEntry.equals(canonicalTools)) {
        if (Base.isWindows()) {
          if (new File(toolsFolder,"android.bat").exists()) {
            toolName="android.bat";
          }
 else           if (new File(toolsFolder,"android.exe").exists()) {
            toolName="android.exe";
          }
        }
        return true;
      }
    }
    Base.showWarning("Android Tools Error","You need to add the tools folder of the Android SDK\n" + "to your PATH environment variable and restart Processing.\n" + "The folder is: " + toolsFolder.getAbsolutePath() + ".",null);
  }
 catch (  IOException e) {
    Base.showWarning("Android Tools Error","Error while trying to check the PATH for the Android tools.",e);
  }
  return false;
}
