{
  try {
    final String lastPort=getJdwpPort(device);
    final Process p=Runtime.getRuntime().exec(new String[]{"adb","-s",device,"shell","am","start","-e","debug","true","-a","android.intent.action.MAIN","-c","android.intent.category.LAUNCHER","-n",build.getPackageName() + "/." + build.getClassName()});
    final int result=p.waitFor();
    if (result != 0) {
      editor.statusError("Could not start the sketch.");
      System.err.println("???adb shell?????for ???am start??? returned " + result + ".");
    }
 else {
      final boolean emu=device.startsWith("emulator");
      editor.statusNotice("Sketch started on the " + (emu ? "emulator" : "phone") + ".");
      return lastPort;
    }
  }
 catch (  final IOException e) {
    editor.statusError(e);
  }
catch (  final InterruptedException e) {
    e.printStackTrace();
  }
  return null;
}
