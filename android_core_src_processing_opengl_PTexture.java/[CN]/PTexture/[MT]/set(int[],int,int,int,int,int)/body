{
  if (pixels == null) {
    pixels=null;
    PGraphics.showWarning("The pixels array is null.");
    return;
  }
  if (pixels.length != w * h) {
    PGraphics.showWarning("The pixels array has the wrong length. It should be " + w * h);
    return;
  }
  pgl.enableTexturing(glTarget);
  pgl.glBindTexture(glTarget,glID);
  if (usingMipmaps) {
    if (PGraphicsOpenGL.autoMipmapGenSupported) {
      int[] rgbaPixels=new int[w * h];
      convertToRGBA(pixels,rgbaPixels,format,w,h);
      setTexels(rgbaPixels,x,y,w,h);
      pgl.glGenerateMipmap(glTarget);
      rgbaPixels=null;
    }
 else {
      int[] rgbaPixels=new int[w * h];
      convertToRGBA(pixels,rgbaPixels,format,w,h);
      setTexels(rgbaPixels,x,y,w,h);
      rgbaPixels=null;
    }
  }
 else {
    int[] rgbaPixels=new int[w * h];
    convertToRGBA(pixels,rgbaPixels,format,w,h);
    setTexels(rgbaPixels,x,y,w,h);
    rgbaPixels=null;
  }
  pgl.glBindTexture(glTarget,0);
  pgl.disableTexturing(glTarget);
}
