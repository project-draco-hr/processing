{
  if (errorCheckerService.tempErrorLog.size() == 0)   return;
  try {
    System.out.println("Writing errors");
    StringBuilder sb=new StringBuilder();
    sb.append("Sketch: " + getSketch().getFolder() + ", "+ new java.sql.Timestamp(new java.util.Date().getTime())+ "\nComma in error msg is substituted with ^ symbol\nFor separating arguments in error args | symbol is used\n");
    sb.append("ERROR TYPE, ERROR ARGS, ERROR MSG\n");
    for (    String errMsg : errorCheckerService.tempErrorLog.keySet()) {
      IProblem ip=errorCheckerService.tempErrorLog.get(errMsg);
      if (ip != null) {
        sb.append(ErrorMessageSimplifier.getIDName(ip.getID()));
        sb.append(',');
        sb.append("{");
        for (int i=0; i < ip.getArguments().length; i++) {
          sb.append(ip.getArguments()[i]);
          if (i < ip.getArguments().length - 1)           sb.append("| ");
        }
        sb.append("}");
        sb.append(',');
        sb.append(ip.getMessage().replace(',','^'));
        sb.append("\n");
      }
    }
    System.out.println(sb);
    File opFile=new File(getSketch().getFolder(),"ErrorLogs" + File.separator + "ErrorLog_"+ System.currentTimeMillis()+ ".csv");
    PApplet.saveStream(opFile,new ByteArrayInputStream(sb.toString().getBytes(Charset.defaultCharset())));
  }
 catch (  Exception e) {
    System.err.println("Failed to save log file for sketch " + getSketch().getName());
    e.printStackTrace();
  }
}
