{
  char c;
  StringBuffer committing=new StringBuffer(count);
  for (c=text.first(); c != AttributedCharacterIterator.DONE && count > 0; c=text.next(), --count) {
    committing.append(c);
  }
  int caret=textArea.getCaretPosition();
  String committing_text=committing.toString();
  try {
    textArea.getDocument().insertString(caret,committing_text,null);
  }
 catch (  BadLocationException e) {
    e.printStackTrace();
  }
}
