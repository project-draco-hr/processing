{
  super("Create Font");
  targetFolder=editor.getSketch().dataFolder;
  Container paine=getContentPane();
  paine.setLayout(new BorderLayout());
  JPanel pain=new JPanel();
  pain.setBorder(new EmptyBorder(13,13,13,13));
  paine.add(pain,BorderLayout.CENTER);
  pain.setLayout(new BoxLayout(pain,BoxLayout.Y_AXIS));
  String labelText="Use this tool to create bitmap fonts for your program.\n" + "Select a font and size, and click 'OK' to generate the font.\n" + "It will be added to the data folder of the current sketch.";
  JTextArea textarea=new JTextArea(labelText);
  textarea.setBorder(new EmptyBorder(10,10,20,10));
  textarea.setBackground(null);
  textarea.setEditable(false);
  textarea.setHighlighter(null);
  textarea.setFont(new Font("Dialog",Font.PLAIN,12));
  pain.add(textarea);
  GraphicsEnvironment ge=GraphicsEnvironment.getLocalGraphicsEnvironment();
  Font fonts[]=ge.getAllFonts();
  String flist[]=new String[fonts.length];
  table=new Hashtable();
  int index=0;
  for (int i=0; i < fonts.length; i++) {
    flist[index++]=fonts[i].getPSName();
    table.put(fonts[i].getPSName(),fonts[i]);
  }
  list=new String[index];
  System.arraycopy(flist,0,list,0,index);
  fontSelector=new JList(list);
  fontSelector.addListSelectionListener(new ListSelectionListener(){
    public void valueChanged(    ListSelectionEvent e){
      if (e.getValueIsAdjusting() == false) {
        selection=fontSelector.getSelectedIndex();
        okButton.setEnabled(true);
        update();
      }
    }
  }
);
  fontSelector.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
  fontSelector.setVisibleRowCount(12);
  JScrollPane fontScroller=new JScrollPane(fontSelector);
  pain.add(fontScroller);
  Dimension d1=new Dimension(13,13);
  pain.add(new Box.Filler(d1,d1,d1));
  sample=new JTextArea("The quick brown fox blah blah."){
    public void paintComponent(    Graphics g){
      Graphics2D g2=(Graphics2D)g;
      g2.setRenderingHint(RenderingHints.KEY_TEXT_ANTIALIASING,smooth ? RenderingHints.VALUE_TEXT_ANTIALIAS_ON : RenderingHints.VALUE_TEXT_ANTIALIAS_OFF);
      super.paintComponent(g2);
    }
  }
;
  sample.setFont(new Font("Dialog",Font.PLAIN,12));
  pain.add(sample);
  Dimension d2=new Dimension(6,6);
  pain.add(new Box.Filler(d2,d2,d2));
  JPanel panel=new JPanel();
  panel.add(new JLabel("Size:"));
  sizeSelector=new JTextField(" 48 ");
  sizeSelector.getDocument().addDocumentListener(new DocumentListener(){
    public void insertUpdate(    DocumentEvent e){
      update();
    }
    public void removeUpdate(    DocumentEvent e){
      update();
    }
    public void changedUpdate(    DocumentEvent e){
    }
  }
);
  panel.add(sizeSelector);
  smoothBox=new JCheckBox("Smooth");
  smoothBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      smooth=smoothBox.isSelected();
      update();
    }
  }
);
  smoothBox.setSelected(smooth);
  panel.add(smoothBox);
  allBox=new JCheckBox("All Characters");
  allBox.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      all=allBox.isSelected();
    }
  }
);
  allBox.setSelected(all);
  panel.add(allBox);
  pain.add(panel);
  JPanel filestuff=new JPanel();
  filestuff.add(new JLabel("Filename:"));
  filestuff.add(filenameField=new JTextField(20));
  filestuff.add(new JLabel(".vlw"));
  pain.add(filestuff);
  JPanel buttons=new JPanel();
  JButton cancelButton=new JButton("Cancel");
  cancelButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      setVisible(false);
    }
  }
);
  okButton=new JButton("OK");
  okButton.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      build();
    }
  }
);
  okButton.setEnabled(false);
  buttons.add(cancelButton);
  buttons.add(okButton);
  pain.add(buttons);
  JRootPane root=getRootPane();
  root.setDefaultButton(okButton);
  ActionListener disposer=new ActionListener(){
    public void actionPerformed(    ActionEvent actionEvent){
      setVisible(false);
    }
  }
;
  Base.registerWindowCloseKeys(root,disposer);
  Base.setIcon(this);
  pack();
  sample.setFont(new Font(list[0],Font.PLAIN,48));
  fontSelector.setSelectedIndex(0);
  Dimension screen=Toolkit.getDefaultToolkit().getScreenSize();
  windowSize=getSize();
  setLocation((screen.width - windowSize.width) / 2,(screen.height - windowSize.height) / 2);
}
