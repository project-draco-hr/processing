{
  ArrayList params=new ArrayList();
  params.add("processing.core.PApplet");
  Point windowLocation=editor.getSketchLocation();
  if (windowLocation != null) {
    params.add(PApplet.ARGS_LOCATION + "=" + windowLocation.x+ ","+ windowLocation.y);
  }
 else {
    Point editorLocation=editor.getLocation();
    params.add(PApplet.ARGS_EDITOR_LOCATION + "=" + editorLocation.x+ ","+ editorLocation.y);
  }
  params.add(PApplet.ARGS_EXTERNAL);
  params.add(PApplet.ARGS_DISPLAY + "=" + Preferences.get("run.display"));
  params.add(PApplet.ARGS_SKETCH_FOLDER + "=" + sketch.folder.getAbsolutePath());
  if (presenting) {
    params.add(PApplet.ARGS_PRESENT);
    params.add(PApplet.ARGS_STOP_COLOR + "=" + Preferences.get("run.present.stop.color"));
    params.add(PApplet.ARGS_BGCOLOR + "=" + Preferences.get("run.present.bgcolor"));
  }
  params.add(sketch.getMainClassName());
  String outgoing[]=new String[params.size()];
  params.toArray(outgoing);
  return outgoing;
}
