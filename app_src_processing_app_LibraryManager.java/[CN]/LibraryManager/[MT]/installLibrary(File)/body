{
  String libName=guessLibraryName(libFile);
  File tmpFolder=null;
  try {
    tmpFolder=Base.createTempFolder(libName,"uncompressed");
  }
 catch (  IOException e) {
    Base.showWarning("Trouble creating temporary folder","Could not create a place to store libary's uncompressed contents,\n" + "so it won't be installed.",e);
  }
  boolean errorEncountered=false;
  unzip(libFile,tmpFolder);
  try {
    ArrayList<Library> discoveredLibs=Library.list(tmpFolder);
    if (discoveredLibs.isEmpty()) {
      File newLibFolder=getUniqueName(tmpFolder,libName);
      if (newLibFolder.mkdirs()) {
        for (        File f : tmpFolder.listFiles()) {
          if (!f.equals(newLibFolder)) {
            if (!f.renameTo(new File(newLibFolder,f.getName()))) {
              errorEncountered=true;
            }
          }
        }
        discoveredLibs=Library.list(tmpFolder);
      }
 else {
        errorEncountered=true;
      }
    }
    System.gc();
    if (!errorEncountered) {
      return installLibraries(discoveredLibs);
    }
  }
 catch (  IOException ioe) {
    Base.showWarning("Trouble discovering libraries","An internal error occured while searching for libraries in the file.\n" + "This may be a one time error, so try again.",ioe);
  }
  return null;
}
