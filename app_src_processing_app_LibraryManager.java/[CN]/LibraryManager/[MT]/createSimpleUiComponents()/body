{
  dialog.setResizable(false);
  Container pane=dialog.getContentPane();
  pane.setLayout(new GridBagLayout());
  urlLabel=new JLabel("Library URL:");
  libraryUrl=new JTextField();
  libraryUrl.setPreferredSize(new Dimension(0,10 + libraryUrl.getFontMetrics(libraryUrl.getFont()).getHeight()));
  installButton=new JButton("Install");
  installProgressBar=new JProgressBar();
  installProgressBar.setVisible(true);
  installProgressBar.setString("");
  installProgressBar.setStringPainted(true);
  installButton.setEnabled(false);
  libraryUrl.getDocument().addDocumentListener(new DocumentListener(){
    private void checkUrl(){
      try {
        new URL(libraryUrl.getText());
        installButton.setEnabled(true);
        installButton.setToolTipText("");
      }
 catch (      MalformedURLException e) {
        installButton.setEnabled(false);
        installButton.setToolTipText("URL is malformed");
      }
    }
    public void removeUpdate(    DocumentEvent de){
      checkUrl();
    }
    public void insertUpdate(    DocumentEvent de){
      checkUrl();
    }
    public void changedUpdate(    DocumentEvent de){
      checkUrl();
    }
  }
);
  ActionListener installLibAction=new ActionListener(){
    public void actionPerformed(    ActionEvent arg){
      try {
        installProgressBar.setVisible(true);
        dialog.pack();
        URL url=new URL(libraryUrl.getText());
        final JProgressMonitor pm=new JProgressMonitor(installProgressBar){
          @Override public void finishedAction(){
          }
        }
;
        dialog.addWindowListener(new WindowAdapter(){
          public void windowClosing(          WindowEvent we){
            pm.cancel();
          }
        }
);
        libraryUrl.setEnabled(false);
        installButton.setEnabled(false);
        installLibraryFromUrl(url,pm);
      }
 catch (      MalformedURLException e) {
        System.err.println("Malformed URL");
      }
      libraryUrl.setText("");
    }
  }
;
  libraryUrl.addActionListener(installLibAction);
  installButton.addActionListener(installLibAction);
  GridBagConstraints c=new GridBagConstraints();
  c.gridx=0;
  c.gridy=0;
  c.weightx=1;
  c.anchor=GridBagConstraints.WEST;
  pane.add(urlLabel,c);
  c=new GridBagConstraints();
  c.gridx=0;
  c.gridy=1;
  c.weightx=1;
  c.fill=GridBagConstraints.HORIZONTAL;
  pane.add(libraryUrl,c);
  c=new GridBagConstraints();
  c.gridx=1;
  c.gridy=1;
  c.anchor=GridBagConstraints.EAST;
  pane.add(installButton,c);
  c=new GridBagConstraints();
  c.gridx=0;
  c.gridy=2;
  c.gridwidth=2;
  c.weightx=1;
  c.fill=GridBagConstraints.HORIZONTAL;
  pane.add(installProgressBar,c);
  Dimension d=dialog.getSize();
  d.width=320;
  dialog.setMinimumSize(d);
}
