{
  dialog.setResizable(true);
  Container pane=dialog.getContentPane();
  pane.setLayout(new GridBagLayout());
  GridBagConstraints c=new GridBagConstraints();
  c.gridx=0;
  c.gridy=0;
  c.gridwidth=2;
  c.weightx=1;
  c.fill=GridBagConstraints.HORIZONTAL;
  filterField=new FilterField();
  pane.add(filterField,c);
  LibraryListFetcher llf=new LibraryListFetcher();
  llf.fetchLibraryList(null);
  while (!llf.isDone()) {
    Thread.yield();
  }
  libraryListPane=new LibraryListPanel(llf.getLibraryListing());
  c=new GridBagConstraints();
  c.fill=GridBagConstraints.BOTH;
  c.gridx=0;
  c.gridy=1;
  c.gridwidth=2;
  c.weighty=1;
  c.weightx=1;
  final JScrollPane scrollPane=new JScrollPane();
  scrollPane.setPreferredSize(new Dimension(300,300));
  scrollPane.setViewportView(libraryListPane);
  scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
  pane.add(scrollPane,c);
  scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
  scrollPane.getViewport().addChangeListener(new ChangeListener(){
    public void stateChanged(    ChangeEvent ce){
      int width=scrollPane.getViewportBorderBounds().width;
      libraryListPane.setWidth(width);
    }
  }
);
  libraryListPane.setPreferredViewPositionListener(new PreferredViewPositionListener(){
    public void handlePreferredLocation(    Point p){
      scrollPane.getViewport().setViewPosition(p);
    }
  }
);
  c=new GridBagConstraints();
  c.gridx=0;
  c.gridy=2;
  pane.add(new Label("Category:"),c);
  c=new GridBagConstraints();
  c.fill=GridBagConstraints.HORIZONTAL;
  c.gridx=1;
  c.gridy=2;
  String[] categories={"Any","3D","Animation","Compilations","Computer Vision","Data and Protocols","Geometry","Graphic Interface","Hardware Interface","Import / Export","Math","Simulation","Sound","Tools","Typography","Video"};
  categoryChooser=new JComboBox(categories);
  pane.add(categoryChooser,c);
  dialog.setMinimumSize(new Dimension(400,400));
}
