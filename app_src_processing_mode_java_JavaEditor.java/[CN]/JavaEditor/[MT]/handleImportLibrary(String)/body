{
  Library lib=mode.findLibraryByName(libraryName);
  if (lib == null) {
    statusError("Unable to locate library: " + libraryName);
    return;
  }
  String jarPath=lib.getJarPath();
  sketch.ensureExistence();
  if (mode.isDefaultExtension(sketch.getCurrentCode())) {
    sketch.setCurrentCode(0);
  }
  String[] libImports=lib.getSpecifiedImports();
  if (libImports == null) {
    libImports=Base.packageListFromClassPath(jarPath);
  }
  StringBuffer buffer=new StringBuffer();
  for (int i=0; i < libImports.length; i++) {
    buffer.append("import ");
    buffer.append(libImports[i]);
    buffer.append(".*;\n");
  }
  buffer.append('\n');
  buffer.append(getText());
  setText(buffer.toString());
  setSelection(0,0);
  sketch.setModified(true);
}
