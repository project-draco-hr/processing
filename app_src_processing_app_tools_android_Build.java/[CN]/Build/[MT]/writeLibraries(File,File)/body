{
  final Sketch sketch=editor.getSketch();
  for (  final File libraryFolder : sketch.getImportedLibraries()) {
    final File exportSettings=new File(libraryFolder,"export.txt");
    final HashMap<String,String> exportTable=Base.readSettings(exportSettings);
    final String androidList=exportTable.get("android");
    String exportList[]=null;
    if (androidList != null) {
      exportList=PApplet.splitTokens(androidList,", ");
    }
 else {
      exportList=libraryFolder.list();
    }
    for (int i=0; i < exportList.length; i++) {
      if (exportList[i].equals(".") || exportList[i].equals("..")) {
        continue;
      }
      exportList[i]=PApplet.trim(exportList[i]);
      if (exportList[i].equals("")) {
        continue;
      }
      final File exportFile=new File(libraryFolder,exportList[i]);
      if (!exportFile.exists()) {
        System.err.println("File " + exportList[i] + " does not exist");
      }
 else       if (exportFile.isDirectory()) {
        System.err.println("Ignoring sub-folder \"" + exportList[i] + "\"");
      }
 else       if (exportFile.getName().toLowerCase().endsWith(".zip")) {
        String exportFilename=exportFile.getName();
        exportFilename=exportFilename.substring(0,exportFilename.length() - 4) + ".jar";
        Base.copyFile(exportFile,new File(libsFolder,exportFilename));
      }
 else       if (exportFile.getName().toLowerCase().endsWith(".jar")) {
        final String exportFilename=exportFile.getName();
        Base.copyFile(exportFile,new File(libsFolder,exportFilename));
      }
 else {
        Base.copyFile(exportFile,new File(assetsFolder,exportFile.getName()));
      }
    }
  }
  final File codeFolder=sketch.getCodeFolder();
  if (codeFolder != null && codeFolder.exists()) {
    final File[] codeFiles=codeFolder.listFiles();
    for (    final File item : codeFiles) {
      if (!item.isDirectory()) {
        String name=item.getName();
        if (name.toLowerCase().endsWith(".jar")) {
          final File targetFile=new File(libsFolder,name);
          Base.copyFile(item,targetFile);
        }
 else         if (name.toLowerCase().endsWith(".zip")) {
          name=name.substring(0,name.length() - 4) + ".jar";
          final File targetFile=new File(libsFolder,name);
          Base.copyFile(item,targetFile);
        }
      }
    }
  }
}
