{
  Canvas canvas=surface.canvas;
  surface.fx.context=canvas.getGraphicsContext2D();
  StackPane stackPane=new StackPane();
  stackPane.getChildren().add(canvas);
  canvas.widthProperty().bind(stackPane.widthProperty());
  canvas.heightProperty().bind(stackPane.heightProperty());
  PApplet sketch=surface.sketch;
  int width=sketch.sketchWidth();
  int height=sketch.sketchHeight();
  int smooth=sketch.sketchSmooth();
  if ((PApplet.platform == PConstants.MACOSX || PApplet.platform == PConstants.LINUX) && PApplet.javaVersionName.equals("1.8.0_60")) {
    System.err.println("smooth() disabled for JavaFX with this Java version due to Oracle bug");
    System.err.println("https://github.com/processing/processing/issues/3795");
    smooth=0;
  }
  SceneAntialiasing sceneAntialiasing=(smooth == 0) ? SceneAntialiasing.DISABLED : SceneAntialiasing.BALANCED;
  stage.setScene(new Scene(stackPane,width,height,false,sceneAntialiasing));
  surface.stage=stage;
}
