{
  PGraphicsOpenGL g=pg.get();
  if (g == null)   return;
  if (tex == null) {
    throw new RuntimeException("Source texture is null");
  }
  if (tempFbo == null) {
    tempFbo=new FrameBuffer(g,glWidth,glHeight);
  }
  tempFbo.setColorBuffer(this);
  tempFbo.disableDepthTest();
  g.pushFramebuffer();
  g.setFramebuffer(tempFbo);
  pgl.clearColor(0,0,0,0);
  pgl.clear(PGL.COLOR_BUFFER_BIT);
  if (scale) {
    pgl.drawTexture(tex.glTarget,tex.glName,tex.glWidth,tex.glHeight,0,0,tempFbo.width,tempFbo.height,1,x,y,x + w,y + h,0,0,width,height);
  }
 else {
    pgl.drawTexture(tex.glTarget,tex.glName,tex.glWidth,tex.glHeight,0,0,tempFbo.width,tempFbo.height,1,x,y,x + w,y + h,x,y,x + w,y + h);
  }
  g.popFramebuffer();
  updateTexels(x,y,w,h);
}
