{
  Random r=new Random();
  long id=r.nextLong();
  String idString=Preferences.get("update.id");
  if (idString != null) {
    id=Long.parseLong(idString);
  }
 else {
    Preferences.set("update.id",String.valueOf(id));
  }
  String info;
  info=URLEncoder.encode(id + "\t" + PApplet.nf(Base.REVISION,4)+ "\t"+ System.getProperty("java.version")+ "\t"+ System.getProperty("java.vendor")+ "\t"+ System.getProperty("os.name")+ "\t"+ System.getProperty("os.version")+ "\t"+ System.getProperty("os.arch"),"UTF-8");
  int latest=readInt(downloadURL + "?" + info);
  String lastString=Preferences.get("update.last");
  long now=System.currentTimeMillis();
  if (lastString != null) {
    long when=Long.parseLong(lastString);
    if (now - when < ONE_DAY) {
      return;
    }
  }
  Preferences.set("update.last",String.valueOf(now));
  if (base.activeEditor != null) {
    boolean offerToUpdateContributions=true;
    if (latest > Base.REVISION) {
      offerToUpdateContributions=!promptToVisitDownloadPage();
    }
    if (offerToUpdateContributions) {
      Thread.sleep(5 * 1000);
      if (!base.libraryManagerFrame.hasAlreadyBeenOpened() && base.libraryManagerFrame.contribListing.hasUpdates()) {
        promptToOpenContributionManager();
      }
    }
  }
}
