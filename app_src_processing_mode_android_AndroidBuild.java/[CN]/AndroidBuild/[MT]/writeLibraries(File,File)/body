{
  for (  Library library : getImportedLibraries()) {
    File libraryFolder=new File(library.getPath());
    final File exportSettings=new File(libraryFolder,"export.txt");
    final HashMap<String,String> exportTable=Base.readSettings(exportSettings);
    final String androidList=exportTable.get("android");
    String exportList[]=null;
    if (androidList != null) {
      exportList=PApplet.splitTokens(androidList,", ");
    }
 else {
      exportList=libraryFolder.list();
    }
    for (int i=0; i < exportList.length; i++) {
      exportList[i]=PApplet.trim(exportList[i]);
      if (exportList[i].equals("") || exportList[i].equals(".") || exportList[i].equals("..")) {
        continue;
      }
      final File exportFile=new File(libraryFolder,exportList[i]);
      if (!exportFile.exists()) {
        System.err.println("File " + exportList[i] + " does not exist");
      }
 else       if (exportFile.isDirectory()) {
        System.err.println("Ignoring sub-folder \"" + exportList[i] + "\"");
      }
 else {
        final String name=exportFile.getName();
        final String lcname=name.toLowerCase();
        if (lcname.endsWith(".zip") || lcname.endsWith(".jar")) {
          final String jarName=name.substring(0,name.length() - 4) + ".jar";
          Base.copyFile(exportFile,new File(libsFolder,jarName));
        }
 else {
          Base.copyFile(exportFile,new File(assetsFolder,name));
        }
      }
    }
  }
  final File codeFolder=sketch.getCodeFolder();
  if (codeFolder != null && codeFolder.exists()) {
    for (    final File item : codeFolder.listFiles()) {
      if (!item.isDirectory()) {
        final String name=item.getName();
        final String lcname=name.toLowerCase();
        if (lcname.endsWith(".jar") || lcname.endsWith(".zip")) {
          String jarName=name.substring(0,name.length() - 4) + ".jar";
          Base.copyFile(item,new File(libsFolder,jarName));
        }
      }
    }
  }
}
