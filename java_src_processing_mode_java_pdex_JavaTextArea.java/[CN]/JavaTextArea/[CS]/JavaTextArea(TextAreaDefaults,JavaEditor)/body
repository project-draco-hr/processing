{
  super(defaults,new JavaInputHandler(editor));
  this.editor=editor;
  mouseListeners=painter.getMouseListeners();
  MouseHandler mouseHandler=new MouseHandler();
  painter.addMouseListener(mouseHandler);
  painter.addMouseMotionListener(mouseHandler);
  add(CENTER,painter);
  Mode mode=editor.getMode();
  gutterBgColor=mode.getColor("editor.gutter.bgcolor");
  gutterLineColor=mode.getColor("editor.gutter.linecolor");
  gutterPadding=mode.getInteger("editor.gutter.padding");
  breakpointMarker=mode.getString("editor.gutter.breakpoint.marker");
  currentLineMarker=mode.getString("editor.gutter.currentline.marker");
  prevCompListeners=painter.getComponentListeners();
  prevMouseListeners=painter.getMouseListeners();
  prevMMotionListeners=painter.getMouseMotionListeners();
  prevKeyListeners=editor.getKeyListeners();
  tweakMode=false;
  addPrevListeners();
}
