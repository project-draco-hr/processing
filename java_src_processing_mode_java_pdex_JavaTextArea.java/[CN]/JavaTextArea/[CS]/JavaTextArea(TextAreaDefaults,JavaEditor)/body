{
  super(defaults,new JavaInputHandler(editor));
  this.editor=editor;
  mouseListeners=painter.getMouseListeners();
  MouseHandler mouseHandler=new MouseHandler();
  painter.addMouseListener(mouseHandler);
  painter.addMouseMotionListener(mouseHandler);
  add(CENTER,painter);
  Mode mode=editor.getMode();
  gutterGradient=mode.makeGradient("editor",Editor.LEFT_GUTTER,500);
  gutterLineColor=mode.getColor("editor.gutter.linecolor");
  gutterPadding=mode.getInteger("editor.gutter.padding");
  prevCompListeners=painter.getComponentListeners();
  prevMouseListeners=painter.getMouseListeners();
  prevMMotionListeners=painter.getMouseMotionListeners();
  prevKeyListeners=editor.getKeyListeners();
  tweakMode=false;
  addPrevListeners();
}
