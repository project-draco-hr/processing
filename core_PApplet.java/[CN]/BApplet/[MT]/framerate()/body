{
  if (fpsLastMillis != 0) {
    float elapsed=(float)(System.currentTimeMillis() - fpsLastMillis);
    if (elapsed != 0) {
      fps=(fps * 0.9f) + ((1.0f / (elapsed / 1000.0f)) * 0.1f);
    }
  }
  fpsLastMillis=System.currentTimeMillis();
  return fps;
}
