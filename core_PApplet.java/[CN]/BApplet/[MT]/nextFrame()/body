{
  mouseX=qmouseX;
  mouseY=qmouseY;
  if (fpsTarget != 0)   framerate_delay();
  if (!drawn) {
synchronized (g) {
      g.beginFrame();
      draw();
      if (drawMethod) {
        g.endFrame();
        update();
        finished=true;
      }
      drawn=true;
    }
  }
  if (!drawMethod) {
synchronized (g) {
      g.beginFrame();
      insideLoop=true;
      loop();
      insideLoop=false;
      if (qmouseMoved) {
        mouseMoved();
        qmouseMoved=false;
      }
      if (qmouseDragged) {
        mouseDragged();
        qmouseDragged=false;
      }
      g.endFrame();
    }
    update();
  }
  if (!loopMethod) {
    finished=true;
  }
  pmouseX=mouseX;
  pmouseY=mouseY;
  frame++;
}
