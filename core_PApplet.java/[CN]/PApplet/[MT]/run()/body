{
  try {
    while ((Thread.currentThread() == thread) && !finished) {
      updated=false;
      if (PApplet.THREAD_DEBUG)       println("nextFrame()");
      if (looping || redraw)       nextFrame();
      redraw=false;
      while (!updated) {
        try {
          if (PApplet.THREAD_DEBUG)           System.out.println(looping + " " + redraw);
          if (PApplet.THREAD_DEBUG)           System.out.println("gonna sleep");
          Thread.sleep(looping ? 1 : 10000);
          if (PApplet.THREAD_DEBUG)           System.out.println("outta sleep");
        }
 catch (        InterruptedException e) {
          break;
        }
      }
    }
  }
 catch (  Exception e) {
    finished=true;
    if (leechErr != null) {
      leechErr.println(LEECH_WAKEUP);
      e.printStackTrace(leechErr);
    }
 else {
      System.err.println(LEECH_WAKEUP);
      e.printStackTrace();
    }
  }
}
