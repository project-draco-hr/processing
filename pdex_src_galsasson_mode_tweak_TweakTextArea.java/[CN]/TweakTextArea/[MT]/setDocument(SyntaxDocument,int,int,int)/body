{
  if (this.document == document)   return;
  if (this.document != null)   this.document.removeDocumentListener(documentHandler);
  this.document=document;
  document.addDocumentListener(documentHandler);
  if (start > document.getLength())   start=document.getLength();
  if (stop > document.getLength())   stop=document.getLength();
  select(start,stop);
  updateScrollBars();
  setScrollPosition(scroll);
  painter.repaint();
}
