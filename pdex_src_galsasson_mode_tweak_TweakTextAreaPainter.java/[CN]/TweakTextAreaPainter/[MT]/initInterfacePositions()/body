{
  SketchCode[] code=ta.editor.getSketch().getCode();
  int prevScroll=ta.getScrollPosition();
  String prevText=ta.getText();
  for (int tab=0; tab < code.length; tab++) {
    String tabCode=((TweakEditor)ta.editor).baseCode[tab];
    ta.setText(tabCode);
    for (    Handle n : handles[tab]) {
      int lineStartChar=ta.getLineStartOffset(n.line);
      int x=ta.offsetToX(n.line,n.newStartChar - lineStartChar);
      int end=ta.offsetToX(n.line,n.newEndChar - lineStartChar);
      int y=ta.lineToY(n.line) + fm.getHeight() + 1;
      n.initInterface(x,y,end - x,fm.getHeight());
    }
    for (    ColorControlBox cBox : colorBoxes[tab]) {
      int lineStartChar=ta.getLineStartOffset(cBox.getLine());
      int x=ta.offsetToX(cBox.getLine(),cBox.getCharIndex() - lineStartChar);
      int y=ta.lineToY(cBox.getLine()) + fm.getDescent();
      cBox.initInterface(this,x,y + 1,fm.getHeight() - 2,fm.getHeight() - 2);
    }
  }
  ta.setText(prevText);
  ta.scrollTo(prevScroll,0);
}
