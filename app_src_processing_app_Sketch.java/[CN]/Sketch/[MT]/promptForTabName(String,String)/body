{
  final JTextField txtTabName=new JTextField();
  txtTabName.addKeyListener(new KeyAdapter(){
    public void keyTyped(    KeyEvent event){
      char ch=event.getKeyChar();
      if ((ch == '_') || (ch == '.') || (('A' <= ch) && (ch <= 'Z'))|| (('a' <= ch) && (ch <= 'z'))) {
      }
 else       if (ch == ' ') {
        String t=txtTabName.getText();
        int start=txtTabName.getSelectionStart();
        int end=txtTabName.getSelectionEnd();
        txtTabName.setText(t.substring(0,start) + "_" + t.substring(end));
        txtTabName.setCaretPosition(start + 1);
        event.consume();
      }
 else       if ((ch >= '0') && (ch <= '9')) {
        if ((txtTabName.getCaretPosition() == 0) || (txtTabName.getSelectionStart() == 0)) {
          event.consume();
        }
      }
 else       if (ch == KeyEvent.VK_ENTER) {
        Container parent=txtTabName.getParent();
        while (!(parent instanceof JOptionPane)) {
          parent=parent.getParent();
        }
        JOptionPane pane=(JOptionPane)parent;
        final JPanel pnlBottom=(JPanel)pane.getComponent(pane.getComponentCount() - 1);
        for (int i=0; i < pnlBottom.getComponents().length; i++) {
          Component component=pnlBottom.getComponents()[i];
          if (component instanceof JButton) {
            final JButton okButton=((JButton)component);
            if (okButton.getText().equalsIgnoreCase("OK")) {
              ActionListener[] actionListeners=okButton.getActionListeners();
              if (actionListeners.length > 0) {
                actionListeners[0].actionPerformed(null);
                event.consume();
              }
            }
          }
        }
      }
 else {
        event.consume();
      }
    }
  }
);
  int userReply=JOptionPane.showOptionDialog(editor,new Object[]{prompt,txtTabName},"Tab Name",JOptionPane.OK_CANCEL_OPTION,JOptionPane.PLAIN_MESSAGE,null,new Object[]{Preferences.PROMPT_OK,Preferences.PROMPT_CANCEL},txtTabName);
  if (userReply == JOptionPane.OK_OPTION) {
    String answer=txtTabName.getText();
    nameCode(answer);
  }
}
