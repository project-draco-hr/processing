{
  ensureExistence();
  if (isReadOnly()) {
    Base.showMessage("Sketch is Read-Only","Some files are marked \"read-only\", so you'll\n" + "need to re-save the sketch in another location,\n" + "and try again.");
    return;
  }
  if (currentIndex == 0 && isUntitled()) {
    Base.showMessage("Cannot Delete","You can't delete a sketch that has not been saved.");
    return;
  }
  Object[] options={"OK","Cancel"};
  String prompt=(currentIndex == 0) ? "Are you sure you want to delete this sketch?" : "Are you sure you want to delete \"" + current.getPrettyName() + "\"?";
  int result=JOptionPane.showOptionDialog(editor,prompt,"Delete",JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE,null,options,options[0]);
  if (result == JOptionPane.YES_OPTION) {
    if (currentIndex == 0) {
      Base.removeDir(folder);
      editor.base.handleClose(editor,LastEditorClosePolicy.QUIT);
    }
 else {
      if (!current.deleteFile()) {
        Base.showMessage("Couldn't do it","Could not delete \"" + current.getFileName() + "\".");
        return;
      }
      removeCode(current);
      setCurrentCode(0);
      editor.header.repaint();
    }
  }
}
