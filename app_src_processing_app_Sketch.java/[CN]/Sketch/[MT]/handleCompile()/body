{
  ensureExistence();
  current.program=editor.getText();
  if (Preferences.getBoolean("editor.external")) {
    current=null;
    load();
  }
  cleanup();
  String suggestedClassName=name;
  mainClassName=build(tempBuildFolder.getAbsolutePath(),suggestedClassName);
  if (!externalRuntime) {
    if (dataFolder.exists()) {
      try {
        Base.copyDir(dataFolder,new File(tempBuildFolder,"data"));
      }
 catch (      IOException e) {
        e.printStackTrace();
        throw new RunnerException("Problem copying files from data folder");
      }
    }
  }
  return (mainClassName != null);
}
