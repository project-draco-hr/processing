{
  ensureExistence();
  if (isReadOnly()) {
    Base.showMessage("Sketch is Read-Only","Some files are marked \"read-only\", so you'll\n" + "need to re-save the sketch in another location,\n" + "and try again.");
    return;
  }
  if (currentIndex == 0) {
    Base.showMessage("Can't do that","You cannot hide the main " + "." + getDefaultExtension() + " file from a sketch\n");
    return;
  }
  if (!current.hideFile()) {
    Base.showWarning("Error","Could not hide " + "\"" + current.getFileName() + "\".",null);
    return;
  }
  if (hiddenCount == hidden.length) {
    hidden=(SketchCode[])PApplet.expand(hidden);
  }
  hidden[hiddenCount++]=current;
  removeCode(current);
  setCurrent(0);
  editor.header.repaint();
}
