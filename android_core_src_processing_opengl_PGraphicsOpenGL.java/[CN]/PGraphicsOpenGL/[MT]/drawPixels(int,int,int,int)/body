{
  int i0=y * width + x;
  int len=w * h;
  if (rgbaPixels == null || rgbaPixels.length < len) {
    rgbaPixels=new int[len];
  }
  PApplet.arrayCopy(pixels,i0,rgbaPixels,0,len);
  PGL.javaToNativeARGB(rgbaPixels,w,h);
  if (primarySurface) {
    loadTextureImpl(POINT,false);
  }
  pgl.copyToTexture(texture.glTarget,texture.glFormat,texture.glName,x,y,w,h,IntBuffer.wrap(rgbaPixels));
  if (primarySurface || offscreenMultisample) {
    beginPixelsOp(OP_WRITE);
    drawTexture(x,y,w,h);
    endPixelsOp();
  }
}
