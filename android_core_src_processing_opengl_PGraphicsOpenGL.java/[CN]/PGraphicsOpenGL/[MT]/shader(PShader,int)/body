{
  flush();
  if (kind == TRIANGLES || kind == QUADS || kind == POLYGON) {
    if (shader instanceof PolyTexShader) {
      polyTexShader=(PolyTexShader)shader;
    }
 else     if (shader instanceof PolyColorShader) {
      polyColorShader=(PolyColorShader)shader;
    }
 else     if (shader instanceof PolyTexlightShader) {
      polyTexlightShader=(PolyTexlightShader)shader;
    }
 else     if (shader instanceof PolyLightShader) {
      polyLightShader=(PolyLightShader)shader;
    }
 else {
      PGraphics.showWarning(WRONG_SHADER_TYPE_ERROR);
    }
  }
 else   if (kind == LINES) {
    if (shader instanceof LineShader) {
      lineShader=(LineShader)shader;
    }
 else {
      PGraphics.showWarning(WRONG_SHADER_TYPE_ERROR);
    }
  }
 else   if (kind == POINTS) {
    if (shader instanceof PointShader) {
      pointShader=(PointShader)shader;
    }
 else {
      PGraphics.showWarning(WRONG_SHADER_TYPE_ERROR);
    }
  }
 else {
    PGraphics.showWarning(UNKNOWN_SHADER_KIND_ERROR);
  }
}
