{
  flush();
  if (kind == TRIANGLES || kind == QUADS || kind == POLYGON) {
    if (shader instanceof PolyTexShader) {
      polyTexShader=(PolyTexShader)shader;
    }
 else     if (shader instanceof PolyColorShader) {
      polyColorShader=(PolyColorShader)shader;
    }
 else     if (shader instanceof PolyTexlightShader) {
      polyTexlightShader=(PolyTexlightShader)shader;
    }
 else     if (shader instanceof PolyLightShader) {
      polyLightShader=(PolyLightShader)shader;
    }
 else {
      showWarning("shader() called with a wrong shader object");
    }
  }
 else   if (kind == LINES) {
    if (shader instanceof LineShader) {
      lineShader=(LineShader)shader;
    }
 else {
      showWarning("shader() called with a wrong shader object");
    }
  }
 else   if (kind == POINTS) {
    if (shader instanceof PointShader) {
      pointShader=(PointShader)shader;
    }
 else {
      showWarning("shader() called with a wrong shader object");
    }
  }
 else {
    showWarning("shader() called with an unknown shader type");
  }
}
