{
  Texture.Parameters params=(Texture.Parameters)img.getParams(pgPrimary);
  if (params == null) {
    params=new Texture.Parameters();
    if (hints[DISABLE_TEXTURE_MIPMAPS]) {
      params.mipmaps=false;
    }
 else {
      params.mipmaps=true;
    }
    params.sampling=textureSampling;
    if (params.sampling == Texture.TRILINEAR && !params.mipmaps) {
      params.sampling=Texture.BILINEAR;
      PGraphics.showWarning("TRILINEAR texture sampling requires mipmaps, which are disabled. I will use BILINEAR instead.");
    }
    params.wrapU=textureWrap;
    params.wrapV=textureWrap;
  }
  return addTexture(img,params);
}
