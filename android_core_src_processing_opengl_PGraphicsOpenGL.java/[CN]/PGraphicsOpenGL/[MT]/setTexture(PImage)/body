{
  if (width != img.width || height != img.height) {
    PGraphics.showWarning("Resolution of image is different from PGraphics " + "object");
    return;
  }
  if (texture == null || texture != img.getCache(pgPrimary)) {
    Texture tex=(Texture)img.getCache(pgPrimary);
    Texture.Parameters params=tex != null ? tex.getParameters() : null;
    if (tex == null || tex.contextIsOutdated() || !validSurfaceTex(tex)) {
      if (primarySurface) {
        params=new Texture.Parameters(ARGB,Texture.POINT,false);
      }
 else {
        params=new Texture.Parameters(ARGB,Texture.BILINEAR,false);
      }
      tex=addTexture(img,params);
    }
    if (tex != null) {
      texture=tex;
      texture.setFlippedY(true);
      this.setCache(pgPrimary,texture);
      this.setParams(pgPrimary,params);
      if (!primarySurface && offscreenFramebuffer != null) {
        offscreenFramebuffer.setColorBuffer(texture);
        offscreenFramebuffer.clear();
      }
    }
  }
}
