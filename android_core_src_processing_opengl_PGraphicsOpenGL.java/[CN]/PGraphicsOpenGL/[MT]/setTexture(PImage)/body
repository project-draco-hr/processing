{
  if (width != img.width || height != img.height) {
    PGraphics.showWarning("Resolution of image is different from PGraphics " + "object");
    return;
  }
  if (texture == null || texture != pgPrimary.getCache(img)) {
    Texture tex=(Texture)pgPrimary.getCache(img);
    Texture.Parameters params=tex != null ? tex.getParameters() : null;
    if (tex == null || tex.contextIsOutdated() || !validSurfaceTex(tex)) {
      if (primarySurface) {
        params=new Texture.Parameters(ARGB,Texture.POINT,false);
      }
 else {
        params=new Texture.Parameters(ARGB,Texture.BILINEAR,false);
      }
      tex=addTexture(img,params);
    }
    if (tex != null) {
      texture=tex;
      texture.invertedY(true);
      pgPrimary.setCache(this,texture);
      if (!primarySurface && offscreenFramebuffer != null) {
        offscreenFramebuffer.setColorBuffer(texture);
        offscreenFramebuffer.clear();
      }
    }
  }
}
