{
  Sketch sketch=editor.getSketch();
  File androidFolder=new File(sketch.getFolder(),"android");
  if (androidFolder.exists()) {
    String stamp=AndroidTool.getDateStamp(androidFolder.lastModified());
    File dest=new File(sketch.getFolder(),"android." + stamp);
    boolean result=androidFolder.renameTo(dest);
    if (!result) {
      ProcessHelper mv;
      ProcessResult pr;
      try {
        System.err.println("createProject renameTo() failed, resorting to mv/move instead.");
        mv=new ProcessHelper("mv",androidFolder.getAbsolutePath(),dest.getAbsolutePath());
        pr=mv.execute();
      }
 catch (      IOException e) {
        editor.statusError(e);
        return null;
      }
catch (      InterruptedException e) {
        e.printStackTrace();
        return null;
      }
      if (!pr.succeeded()) {
        System.err.println(pr.getStderr());
        Base.showWarning("Failed to rename","Could not rename the old ???android??? build folder.\n" + "Please delete, close, or rename the folder\n" + androidFolder.getAbsolutePath() + "\n"+ "and try again.",null);
        Base.openFolder(sketch.getFolder());
        return null;
      }
    }
  }
 else {
    boolean result=androidFolder.mkdirs();
    if (!result) {
      Base.showWarning("Folders, folders, folders","Could not create the necessary folders to build.\n" + "Perhaps you have some file permissions to sort out?",null);
      return null;
    }
  }
  return androidFolder;
}
