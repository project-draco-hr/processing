{
  if (application == null) {
    application=Application.getApplication();
  }
  if (adapter == null) {
    adapter=new ThinkDifferent(base);
  }
  application.addApplicationListener(adapter);
  application.setEnabledAboutMenu(true);
  application.setEnabledPreferencesMenu(true);
  if (PApplet.javaVersion <= 1.6f) {
    try {
      JMenuBar defaultMenuBar=new JMenuBar();
      JMenu fileMenu=buildFileMenu(base);
      defaultMenuBar.add(fileMenu);
      application.setDefaultMenuBar(new JMenuBar());
      Base.defaultFileMenu=fileMenu;
    }
 catch (    Exception e) {
      e.printStackTrace();
    }
  }
 else {
    System.err.println("Skipping default menu bar due to Oracle Java 7 bug:");
    System.err.println("http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=8007267");
  }
}
