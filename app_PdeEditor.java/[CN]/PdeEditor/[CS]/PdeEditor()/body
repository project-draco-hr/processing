{
  setLayout(new BorderLayout());
  Panel leftPanel=new Panel();
  leftPanel.setLayout(new BorderLayout());
  buttons=new PdeEditorButtons(this);
  Color buttonBgColor=PdeBase.getColor("editor.buttons.bgcolor",new Color(153,0,0));
  buttons.setBackground(buttonBgColor);
  leftPanel.add("North",buttons);
  Label dummy=new Label();
  dummy.setBackground(buttonBgColor);
  leftPanel.add("Center",dummy);
  add("West",leftPanel);
  Panel rightPanel=new Panel();
  rightPanel.setLayout(new BorderLayout());
  header=new PdeEditorHeader(this);
  rightPanel.add("North",header);
  textarea=new TextArea("",PdeBase.getInteger("editor.program.rows",20),PdeBase.getInteger("editor.program.columns",60),TextArea.SCROLLBARS_VERTICAL_ONLY);
  textarea.setFont(PdeBase.getFont("editor.program.font",new Font("Monospaced",Font.PLAIN,12)));
  rightPanel.add("Center",textarea);
  Panel statusPanel=new Panel();
  statusPanel.setLayout(new BorderLayout());
  status=new PdeEditorStatus(this);
  statusPanel.add("North",status);
  console=new PdeEditorConsole(this);
  statusPanel.add("South",console);
  rightPanel.add("South",statusPanel);
  add("Center",rightPanel);
  if (!PdeBase.isMacintosh()) {
    PdeEditorListener listener=new PdeEditorListener();
    textarea.addKeyListener(listener);
    textarea.addFocusListener(listener);
  }
  runner=new PdeRunner(this);
  Properties skprops=new Properties();
  try {
    skprops.load(getClass().getResource("sketch.properties").openStream());
    int windowX=Integer.parseInt(skprops.getProperty("window.x"),-1);
    int windowY=Integer.parseInt(skprops.getProperty("window.y"),-1);
    int windowW=Integer.parseInt(skprops.getProperty("window.w"),-1);
    int windowH=Integer.parseInt(skprops.getProperty("window.h"),-1);
    int screenW=Integer.parseInt(skprops.getProperty("screen.w"),-1);
    int screenH=Integer.parseInt(skprops.getProperty("screen.h"),-1);
    Dimension screen=Toolkit.getDefaultToolkit().getScreenSize();
    if ((windowX != -1) && ((screen.width == screenW) || (screen.height == screenH))) {
      PdeBase.frame.setBounds(windowX,windowY,windowW,windowH);
    }
    String name=skprops.getProperty("sketch.name");
    String path=skprops.getProperty("sketch.directory");
    String user=skprops.getProperty("user.name");
    if (new File(path + File.separator + name+ File.separator+ name+ ".pde").exists()) {
      userName=user;
      skOpen(path,name);
    }
 else {
      skNew();
    }
  }
 catch (  Exception e) {
    userName="default";
    skNew();
  }
}
