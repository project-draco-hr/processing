{
  super(WINDOW_TITLE);
  MRJApplicationUtils.registerAboutHandler(this);
  MRJApplicationUtils.registerPrefsHandler(this);
  MRJApplicationUtils.registerQuitHandler(this);
  MRJApplicationUtils.registerOpenDocumentHandler(this);
  PdePreferences.init();
  try {
    icon=PdeBase.getImage("icon.gif",this);
    setIconImage(icon);
  }
 catch (  Exception e) {
  }
  addWindowListener(new WindowAdapter(){
    public void windowClosing(    WindowEvent e){
      handleQuit();
    }
  }
);
  PdeKeywords keywords=new PdeKeywords();
  sketchbook=new PdeSketchbook(this);
  JMenuBar menubar=new JMenuBar();
  menubar.add(buildFileMenu());
  menubar.add(buildEditMenu());
  menubar.add(buildSketchMenu());
  menubar.add(buildToolsMenu());
  menubar.add(buildHelpMenu());
  setJMenuBar(menubar);
  find=new PdeEditorFind(PdeEditor.this);
  Container pain=getContentPane();
  pain.setLayout(new BorderLayout());
  Box box=Box.createVerticalBox();
  Box upper=Box.createVerticalBox();
  buttons=new PdeEditorButtons(this);
  upper.add(buttons);
  header=new PdeEditorHeader(this);
  upper.add(header);
  textarea=new JEditTextArea(new PdeTextAreaDefaults());
  textarea.setRightClickPopup(new TextAreaPopup());
  textarea.setTokenMarker(new PdeKeywords());
  textarea.setHorizontalOffset(6);
  consolePanel=new JPanel();
  consolePanel.setLayout(new BorderLayout());
  status=new PdeEditorStatus(this);
  consolePanel.add(status,BorderLayout.NORTH);
  console=new PdeEditorConsole(this);
  consolePanel.add(console,BorderLayout.CENTER);
  lineStatus=new PdeEditorLineStatus(textarea);
  consolePanel.add(lineStatus,BorderLayout.SOUTH);
  upper.add(textarea);
  splitPane=new JSplitPane(JSplitPane.VERTICAL_SPLIT,upper,consolePanel);
  splitPane.setOneTouchExpandable(true);
  splitPane.setContinuousLayout(true);
  splitPane.setResizeWeight(1D);
  if (PdeBase.isMacOS()) {
    splitPane.setBorder(null);
  }
  int dividerSize=PdePreferences.getInteger("editor.divider.size");
  if (dividerSize != 0) {
    splitPane.setDividerSize(dividerSize);
  }
  splitPane.setMinimumSize(new Dimension(600,600));
  box.add(splitPane);
  listener=new PdeEditorListener(this,textarea);
  pain.add(box);
  Document document=textarea.getDocument();
  document.addUndoableEditListener(new PdeUndoableEditListener());
}
