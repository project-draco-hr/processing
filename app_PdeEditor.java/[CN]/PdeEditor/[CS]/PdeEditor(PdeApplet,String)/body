{
  this.app=app;
  setLayout(new BorderLayout());
  Panel leftPanel=new Panel();
  leftPanel.setLayout(new BorderLayout());
  Color buttonBgColor=PdeApplet.getColor("editor.button_bgcolor",new Color(153,0,0));
  buttons=new PdeEditorButtons(this);
  buttons.setBackground(buttonBgColor);
  leftPanel.add("North",buttons);
  Label dummy=new Label();
  dummy.setBackground(buttonBgColor);
  leftPanel.add("Center",dummy);
  add("West",leftPanel);
  Panel rightPanel=new Panel();
  rightPanel.setLayout(new BorderLayout());
  header=new PdeEditorHeader(this,"untitled","default");
  rightPanel.add("North",header);
  if (program == null)   program=DEFAULT_PROGRAM;
  textarea=new TextArea(program,20,60,TextArea.SCROLLBARS_VERTICAL_ONLY);
  textarea.setFont(PdeApplet.getFont("editor"));
  rightPanel.add("Center",textarea);
  Panel statusPanel=new Panel();
  statusPanel.setLayout(new BorderLayout());
  status=new PdeEditorStatus(this);
  statusPanel.add("North",status);
  PdeEditorLabel stdoutLabel=new PdeEditorLabel(2);
  Color stdoutBgColor=new Color(26,26,26);
  Color stdoutFgColor=new Color(153,153,153);
  stdoutLabel.setBackground(stdoutBgColor);
  stdoutLabel.setForeground(stdoutFgColor);
  stdoutLabel.setFont(new Font("monospaced",Font.PLAIN,11));
  statusPanel.add("South",stdoutLabel);
  rightPanel.add("South",statusPanel);
  add("Center",rightPanel);
  if (!PdeApplet.isMacintosh()) {
    PdeEditorListener listener=new PdeEditorListener();
    textarea.addKeyListener(listener);
    textarea.addFocusListener(listener);
    textarea.addKeyListener(new PdeKeyListener(this));
  }
  runner=new PdeRunner(this);
}
