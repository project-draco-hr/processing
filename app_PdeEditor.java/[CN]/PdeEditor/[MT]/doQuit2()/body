{
  doStop();
  try {
    FileOutputStream output=null;
    if (PdeBase.platform == PdeBase.MACOSX) {
      output=new FileOutputStream("lib/pde.properties");
    }
 else     if (PdeBase.platform == PdeBase.MACOS9) {
      output=new FileOutputStream("lib/pde.properties");
    }
 else {
      URL url=getClass().getResource("buttons.gif");
      String urlstr=url.getFile();
      urlstr=urlstr.substring(0,urlstr.lastIndexOf("/") + 1) + "sketch.properties";
      output=new FileOutputStream(urlstr);
    }
    Properties skprops=new Properties();
    Rectangle window=PdeBase.frame.getBounds();
    Dimension screen=Toolkit.getDefaultToolkit().getScreenSize();
    skprops.put("window.x",String.valueOf(window.x));
    skprops.put("window.y",String.valueOf(window.y));
    skprops.put("window.w",String.valueOf(window.width));
    skprops.put("window.h",String.valueOf(window.height));
    skprops.put("screen.w",String.valueOf(screen.width));
    skprops.put("screen.h",String.valueOf(screen.height));
    skprops.put("sketch.name",sketchName);
    skprops.put("sketch.directory",sketchDir.getCanonicalPath());
    skprops.put("user.name",userName);
    skprops.save(output,"auto-generated by pde, please don't touch");
  }
 catch (  IOException e) {
    System.err.println("doQuit: error saving properties");
    e.printStackTrace();
  }
  System.exit(0);
}
