{
  this.checking=checking;
  openingPath=path;
  openingName=name;
  if (sketchModified) {
    String prompt="Save changes to " + sketchName + "?  ";
    if (checking == DO_QUIT) {
      int result=0;
      if (PdeBase.platform == PdeBase.MACOSX) {
        Object[] options={"Yes","No"};
        result=JOptionPane.showOptionDialog(this,prompt,"Quit",JOptionPane.YES_NO_OPTION,JOptionPane.QUESTION_MESSAGE,null,options,options[0]);
      }
 else {
        Object[] options={"Yes","No","Cancel"};
        result=JOptionPane.showOptionDialog(this,prompt,"Quit",JOptionPane.YES_NO_CANCEL_OPTION,JOptionPane.QUESTION_MESSAGE,null,options,options[2]);
      }
      if (result == JOptionPane.YES_OPTION) {
        doSave();
        checkModified2();
      }
 else       if (result == JOptionPane.NO_OPTION) {
        checkModified2();
      }
 else       if (result == JOptionPane.CANCEL_OPTION) {
      }
    }
 else {
      status.prompt(prompt);
    }
  }
 else {
    checkModified2();
  }
}
