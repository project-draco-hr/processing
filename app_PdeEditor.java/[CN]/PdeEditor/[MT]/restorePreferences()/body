{
  Dimension screen=Toolkit.getDefaultToolkit().getScreenSize();
  boolean windowPositionValid=true;
  if (PdePreferences.get("last.screen.height") != null) {
    int screenW=PdePreferences.getInteger("last.screen.width");
    int screenH=PdePreferences.getInteger("last.screen.height");
    if ((screen.width != screenW) || (screen.height != screenH)) {
      windowPositionValid=false;
    }
    int windowX=PdePreferences.getInteger("last.window.x");
    int windowY=PdePreferences.getInteger("last.window.y");
    if ((windowX < 0) || (windowY < 0) || (windowX > screenW)|| (windowY > screenH)) {
      windowPositionValid=false;
    }
  }
 else {
    windowPositionValid=false;
  }
  if (!windowPositionValid) {
    int windowH=PdePreferences.getInteger("default.window.height");
    int windowW=PdePreferences.getInteger("default.window.width");
    setBounds((screen.width - windowW) / 2,(screen.height - windowH) / 2,windowW,windowH);
    PdePreferences.setInteger("last.divider.location",splitPane.getDividerLocation());
  }
 else {
    setBounds(PdePreferences.getInteger("last.window.x"),PdePreferences.getInteger("last.window.y"),PdePreferences.getInteger("last.window.width"),PdePreferences.getInteger("last.window.height"));
  }
  if (PdeBase.openedAtStartup != null) {
    handleOpen2(PdeBase.openedAtStartup);
  }
 else {
    String sketchPath=PdePreferences.get("last.sketch.path");
    if ((sketchPath != null) && (new File(sketchPath)).exists()) {
      handleOpen2(sketchPath);
    }
 else {
      handleNew2(true);
    }
  }
  int location=PdePreferences.getInteger("last.divider.location");
  splitPane.setDividerLocation(location);
  applyPreferences();
}
