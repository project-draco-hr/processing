{
  if (!isketchFile.exists()) {
    status.error("no file named " + isketchName);
    return;
  }
  try {
    String program=null;
    if (isketchFile.length() != 0) {
      FileInputStream input=new FileInputStream(isketchFile);
      BufferedReader reader=new BufferedReader(new InputStreamReader(input));
      StringBuffer buffer=new StringBuffer();
      String line=null;
      while ((line=reader.readLine()) != null) {
        buffer.append(line);
        buffer.append('\n');
      }
      program=buffer.toString();
      textarea.editorSetText(program);
    }
 else {
      textarea.editorSetText("");
    }
    sketchName=isketchName;
    sketchFile=isketchFile;
    sketchDir=isketchDir;
    setSketchModified(false);
    historyFile=new File(sketchFile.getParent(),"history.gz");
    base.rebuildHistoryMenu(historyFile.getPath());
    historyLast=program;
    header.reset();
    presentLocation=null;
    appletLocation=null;
  }
 catch (  FileNotFoundException e1) {
    e1.printStackTrace();
  }
catch (  IOException e2) {
    e2.printStackTrace();
  }
  buttons.clear();
}
