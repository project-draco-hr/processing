{
  float wide=0;
  float pwide=0;
  char previous=0;
  char s[]=string.toCharArray();
  for (int i=0; i < s.length; i++) {
    if (s[i] == '\n') {
      if (wide > pwide)       pwide=wide;
      wide=0;
      previous=0;
    }
 else {
      wide+=width(s[i]);
      if (previous != 0) {
        wide+=kern(previous,s[i]);
      }
      previous=s[i];
    }
  }
  return (pwide > wide) ? pwide : wide;
}
