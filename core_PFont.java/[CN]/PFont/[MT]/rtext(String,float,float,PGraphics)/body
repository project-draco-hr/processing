{
  float startY=y;
  int index=0;
  char previous=0;
  int length=str.length();
  if (length > textBuffer.length) {
    textBuffer=new char[length + 10];
  }
  str.getChars(0,length,textBuffer,0);
  while (index < length) {
    if (textBuffer[index] == '\n') {
      y=startY;
      x+=leading;
      previous=0;
    }
 else {
      rtext(textBuffer[index],x,y,parent);
      y+=width(textBuffer[index]);
      if (previous != 0)       y+=kern(previous,textBuffer[index]);
      previous=textBuffer[index];
    }
    index++;
  }
}
