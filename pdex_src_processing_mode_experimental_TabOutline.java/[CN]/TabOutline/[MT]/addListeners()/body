{
  searchField.addKeyListener(new KeyAdapter(){
    public void keyPressed(    KeyEvent evt){
      if (tabTree.getRowCount() == 0)       return;
      internalSelection=true;
      if (evt.getKeyCode() == KeyEvent.VK_ESCAPE) {
        close();
      }
 else       if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
        if (tabTree.getLastSelectedPathComponent() != null) {
          DefaultMutableTreeNode tnode=(DefaultMutableTreeNode)tabTree.getLastSelectedPathComponent();
          switchToTab(tnode.toString());
          close();
        }
      }
 else       if (evt.getKeyCode() == KeyEvent.VK_UP) {
        if (tabTree.getLastSelectedPathComponent() == null) {
          tabTree.setSelectionRow(0);
          return;
        }
        int x=tabTree.getLeadSelectionRow() - 1;
        int step=jsp.getVerticalScrollBar().getMaximum() / tabTree.getRowCount();
        if (x == -1) {
          x=tabTree.getRowCount() - 1;
          jsp.getVerticalScrollBar().setValue(jsp.getVerticalScrollBar().getMaximum());
        }
 else {
          jsp.getVerticalScrollBar().setValue((jsp.getVerticalScrollBar().getValue() - step));
        }
        tabTree.setSelectionRow(x);
      }
 else       if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
        if (tabTree.getLastSelectedPathComponent() == null) {
          tabTree.setSelectionRow(0);
          return;
        }
        int x=tabTree.getLeadSelectionRow() + 1;
        int step=jsp.getVerticalScrollBar().getMaximum() / tabTree.getRowCount();
        if (x == tabTree.getRowCount()) {
          x=0;
          jsp.getVerticalScrollBar().setValue(jsp.getVerticalScrollBar().getMinimum());
        }
 else {
          jsp.getVerticalScrollBar().setValue((jsp.getVerticalScrollBar().getValue() + step));
        }
        tabTree.setSelectionRow(x);
      }
    }
  }
);
  searchField.getDocument().addDocumentListener(new DocumentListener(){
    public void insertUpdate(    DocumentEvent e){
      updateSelection();
    }
    public void removeUpdate(    DocumentEvent e){
      updateSelection();
    }
    public void changedUpdate(    DocumentEvent e){
      updateSelection();
    }
    private void updateSelection(){
      SwingWorker<Object,Object> worker=new SwingWorker<Object,Object>(){
        protected Object doInBackground() throws Exception {
          String text=searchField.getText().toLowerCase();
          tempNode=new DefaultMutableTreeNode();
          filterTree(text,tempNode,tabNode);
          return null;
        }
        protected void done(){
          tabTree.setModel(new DefaultTreeModel(tempNode));
          ((DefaultTreeModel)tabTree.getModel()).reload();
          internalSelection=true;
          tabTree.setSelectionRow(0);
        }
      }
;
      worker.execute();
    }
  }
);
  tabTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      if (internalSelection) {
        internalSelection=(false);
        return;
      }
      SwingWorker<Object,Object> worker=new SwingWorker<Object,Object>(){
        protected Object doInBackground() throws Exception {
          return null;
        }
        protected void done(){
          if (tabTree.getLastSelectedPathComponent() == null) {
            return;
          }
          DefaultMutableTreeNode tnode=(DefaultMutableTreeNode)tabTree.getLastSelectedPathComponent();
          switchToTab(tnode.toString());
          close();
        }
      }
;
      worker.execute();
    }
  }
);
  tabTree.addMouseListener(new MouseAdapter(){
    public void mouseClicked(    MouseEvent me){
      if (tabTree.getLastSelectedPathComponent() == null) {
        return;
      }
      DefaultMutableTreeNode tnode=(DefaultMutableTreeNode)tabTree.getLastSelectedPathComponent();
      switchToTab(tnode.toString());
      close();
    }
  }
);
  frmOutlineView.addWindowFocusListener(new WindowFocusListener(){
    public void windowLostFocus(    WindowEvent e){
      close();
    }
    public void windowGainedFocus(    WindowEvent e){
    }
  }
);
}
