{
  int res=Toolkit.highResDisplay() ? 2 : 1;
  String suffix=null;
  Image allButtons=null;
  if (res == 2) {
    suffix="-2x.png";
    allButtons=mode.loadImage("theme/buttons-debug" + suffix);
    if (allButtons == null) {
      res=1;
    }
  }
  if (res == 1) {
    suffix=".png";
    allButtons=mode.loadImage("theme/buttons-debug" + suffix);
    if (allButtons == null) {
      suffix=".gif";
      allButtons=mode.loadImage("theme/buttons-debug" + suffix);
    }
  }
  final int BUTTON_WIDTH=27;
  final int BUTTON_IMAGE_SIZE=33;
  int count=allButtons.getWidth(this) / BUTTON_WIDTH * res;
  final int GRID_SIZE=32;
  Image[][] buttonImages=new Image[count][3];
  for (int i=0; i < count; i++) {
    for (int state=0; state < 3; state++) {
      Image image=new BufferedImage(BUTTON_WIDTH * res,GRID_SIZE * res,BufferedImage.TYPE_INT_ARGB);
      Graphics g=image.getGraphics();
      g.drawImage(allButtons,-(i * BUTTON_IMAGE_SIZE * res) - 3,(state - 2) * BUTTON_IMAGE_SIZE * res,null);
      g.dispose();
      buttonImages[i][state]=image;
    }
  }
  return buttonImages;
}
