{
  int sx=0;
  int sy=0;
  int sw=src.width;
  int sh=src.height;
  if (imageMode == CENTER) {
    dx-=src.width / 2;
    dy-=src.height / 2;
  }
  if (dx < 0) {
    sx-=dx;
    sw+=dx;
    dx=0;
  }
  if (dy < 0) {
    sy-=dy;
    sh+=dy;
    dy=0;
  }
  if (dx + sw > width) {
    sw=width - dx;
  }
  if (dy + sh > height) {
    sh=height - dy;
  }
  if ((sw <= 0) || (sh <= 0))   return;
  setImpl(dx,dy,sx,sy,sw,sh,src);
}
