{
  try {
    Props props=new Props(f);
    _config=new Config();
    String header=props.getProperty(Config.HEADER);
    _config.setHeaderType(header == null || header.toLowerCase().equals("guihead.bin") ? Config.GUI_HEADER : Config.CONSOLE_HEADER);
    _config.setJar(props.getFile(Config.JAR));
    _config.setOutfile(props.getFile(Config.OUTFILE));
    _config.setJre(new Jre());
    _config.getJre().setPath(props.getProperty(Jre.PATH));
    _config.getJre().setMinVersion(props.getProperty(Jre.MIN_VERSION));
    _config.getJre().setMaxVersion(props.getProperty(Jre.MAX_VERSION));
    String args=props.getProperty(Jre.ARGS);
    if (args != null) {
      List jreOptions=new ArrayList();
      jreOptions.add(args);
      _config.getJre().setOptions(jreOptions);
    }
    _config.setCmdLine(props.getProperty(Config.JAR_ARGS));
    _config.setChdir("true".equals(props.getProperty(Config.CHDIR)) ? "." : null);
    _config.setCustomProcName("true".equals(props.getProperty("setProcName")));
    _config.setStayAlive("true".equals(props.getProperty(Config.STAY_ALIVE)));
    _config.setErrTitle(props.getProperty(Config.ERR_TITLE));
    _config.setIcon(props.getFile(Config.ICON));
    File splashFile=props.getFile(Splash.SPLASH_FILE);
    if (splashFile != null) {
      _config.setSplash(new Splash());
      _config.getSplash().setFile(splashFile);
      String waitfor=props.getProperty("waitfor");
      _config.getSplash().setWaitForWindow(waitfor != null && !waitfor.equals(""));
      String splashTimeout=props.getProperty(Splash.TIMEOUT);
      if (splashTimeout != null) {
        _config.getSplash().setTimeout(Integer.parseInt(splashTimeout));
      }
      _config.getSplash().setTimeoutErr("true".equals(props.getProperty(Splash.TIMEOUT_ERR)));
    }
 else {
      _config.setSplash(null);
    }
    setConfigPath(f);
  }
 catch (  IOException e) {
    throw new ConfigPersisterException(e);
  }
}
