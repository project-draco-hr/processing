{
  int modifiers=nativeEvent.getModifiers();
  int peModifiers=modifiers & (InputEvent.SHIFT_MASK | InputEvent.CTRL_MASK | InputEvent.META_MASK| InputEvent.ALT_MASK);
  int peButton=0;
  if ((modifiers & InputEvent.BUTTON1_MASK) != 0) {
    peButton=PConstants.LEFT;
  }
 else   if ((modifiers & InputEvent.BUTTON2_MASK) != 0) {
    peButton=PConstants.CENTER;
  }
 else   if ((modifiers & InputEvent.BUTTON3_MASK) != 0) {
    peButton=PConstants.RIGHT;
  }
  if (PApplet.platform == PConstants.MACOSX) {
    if ((modifiers & InputEvent.CTRL_MASK) != 0) {
      peButton=PConstants.RIGHT;
    }
  }
  int peCount=0;
  if (peAction == MouseEvent.WHEEL) {
    peCount=nativeEvent.isShiftDown() ? (int)nativeEvent.getRotation()[0] : (int)nativeEvent.getRotation()[1];
  }
 else {
    peCount=nativeEvent.getClickCount();
  }
  if (presentMode) {
    if (peAction == KeyEvent.RELEASE && 20 < nativeEvent.getX() && nativeEvent.getX() < 20 + 100 && screenRect.height - 70 < nativeEvent.getY() && nativeEvent.getY() < screenRect.height - 20) {
      System.err.println("clicked on exit button");
      animator.stop();
      PSurfaceJOGL.this.sketch.exit();
      window.destroy();
    }
  }
  final float[] hasSurfacePixelScale=window.getCurrentSurfaceScale(new float[2]);
  int x=nativeEvent.getX() - (int)offsetX;
  int y=nativeEvent.getY() - (int)offsetY;
  if (!graphics.is2X() && 1 < hasSurfacePixelScale[0]) {
    x/=2;
    y/=2;
  }
  MouseEvent me=new MouseEvent(nativeEvent,nativeEvent.getWhen(),peAction,peModifiers,x,y,peButton,peCount);
  sketch.postEvent(me);
}
