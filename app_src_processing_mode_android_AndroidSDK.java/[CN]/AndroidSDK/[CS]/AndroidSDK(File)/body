{
  this.folder=folder;
  if (!folder.exists()) {
    throw new BadSDKException(folder + " does not exist");
  }
  tools=new File(folder,"tools");
  if (!tools.exists()) {
    throw new BadSDKException("There is no tools folder in " + folder);
  }
  platformTools=new File(folder,"platform-tools");
  if (!platformTools.exists()) {
    throw new BadSDKException("There is no platform-tools folder in " + folder);
  }
  androidTool=findAndroidTool(tools);
  final Platform p=Base.getPlatform();
  String path=p.getenv("PATH");
  p.setenv("ANDROID_SDK",folder.getCanonicalPath());
  path=platformTools.getCanonicalPath() + File.pathSeparator + tools.getCanonicalPath()+ File.pathSeparator+ path;
  String javaHomeProp=System.getProperty("java.home");
  File javaHome=new File(javaHomeProp).getCanonicalFile();
  p.setenv("JAVA_HOME",javaHome.getCanonicalPath());
  path=new File(javaHome,"bin").getCanonicalPath() + File.pathSeparator + path;
  p.setenv("PATH",path);
  checkDebugCertificate();
}
