{
  if (i > 0 && i < lwidth && u > 0 && u < lheight) {
    xvel+=(vbuf[i - 1][u - 1].pressure * 0.5f + vbuf[i - 1][u].pressure + vbuf[i - 1][u + 1].pressure * 0.5f - vbuf[i + 1][u - 1].pressure * 0.5f - vbuf[i + 1][u].pressure - vbuf[i + 1][u + 1].pressure * 0.5f) * 0.25f;
    yvel+=(vbuf[i - 1][u - 1].pressure * 0.5f + vbuf[i][u - 1].pressure + vbuf[i + 1][u - 1].pressure * 0.5f - vbuf[i - 1][u + 1].pressure * 0.5f - vbuf[i][u + 1].pressure - vbuf[i + 1][u + 1].pressure * 0.5f) * 0.25f;
  }
}
