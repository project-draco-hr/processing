{
  pixelCount=width * height;
  pixels=new int[pixelCount];
  zbuffer=new float[pixelCount];
  if (mainDrawingSurface) {
    for (int i=0; i < pixelCount; i++)     pixels[i]=backgroundColor;
    cm=new DirectColorModel(32,0x00ff0000,0x0000ff00,0x000000ff);
    ;
    mis=new MemoryImageSource(width,height,pixels,0,width);
    mis.setFullBufferUpdates(true);
    mis.setAnimated(true);
    image=Toolkit.getDefaultToolkit().createImage(mis);
  }
 else {
    for (int i=0; i < pixelCount; i++) {
      zbuffer[i]=Float.MAX_VALUE;
    }
  }
  stencil=new int[pixelCount];
  line=new PLine(this);
  triangle=new PTriangle(this);
  defaultsInited=false;
}
