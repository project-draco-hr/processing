{
  shapeLast=vertexCount;
  shapeLastPlusClipped=shapeLast;
  if (vertexCount == 0) {
    shape=0;
    return;
  }
  endShapeModelToCamera(shapeFirst,shapeLast);
  if (stroke) {
    endShapeStroke(mode);
  }
  if (fill) {
    endShapeFill();
  }
  endShapeLighting(lightCount > 0 && fill);
  endShapeCameraToScreen(shapeFirst,shapeLastPlusClipped);
  if (!hints[ENABLE_DEPTH_SORT]) {
    if (fill) {
      if (triangleCount > 0) {
        renderTriangles(0,triangleCount);
        if (raw != null) {
          rawTriangles(0,triangleCount);
        }
        triangleCount=0;
      }
    }
    if (stroke) {
      if (pointCount > 0) {
        renderPoints(0,pointCount);
        if (raw != null) {
          rawPoints(0,pointCount);
        }
        pointCount=0;
      }
      if (lineCount > 0) {
        renderLines(0,lineCount);
        if (raw != null) {
          rawLines(0,lineCount);
        }
        lineCount=0;
      }
    }
    pathCount=0;
  }
  shape=0;
}
