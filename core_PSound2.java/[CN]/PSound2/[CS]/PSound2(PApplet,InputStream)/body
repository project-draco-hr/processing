{
  this.parent=iparent;
  try {
    AudioInputStream stream=AudioSystem.getAudioInputStream(input);
    AudioFormat format=stream.getFormat();
    if (format.getEncoding() != AudioFormat.Encoding.PCM_SIGNED) {
      format=new AudioFormat(AudioFormat.Encoding.PCM_SIGNED,format.getSampleRate(),format.getSampleSizeInBits() * 2,format.getChannels(),format.getFrameSize() * 2,format.getFrameRate(),true);
      stream=AudioSystem.getAudioInputStream(format,stream);
    }
    int frameLength=(int)stream.getFrameLength();
    int frameSize=format.getFrameSize();
    DataLine.Info info=new DataLine.Info(Clip.class,stream.getFormat(),frameLength * frameSize);
    clip=(Clip)AudioSystem.getLine(info);
    gainControl=(FloatControl)clip.getControl(FloatControl.Type.MASTER_GAIN);
    clip.open(stream);
    parent.registerDispose(this);
    try {
      soundEventMethod=parent.getClass().getMethod("soundEvent",new Class[]{PSound.class});
      clip.addLineListener(new LineListener(){
        public void update(        LineEvent event){
          if (event.getType() == LineEvent.Type.STOP) {
            try {
              soundEventMethod.invoke(parent,new Object[]{PSound2.this});
            }
 catch (            Exception e) {
              System.err.println("error, disabling soundEvent()");
              e.printStackTrace();
              soundEventMethod=null;
            }
          }
        }
      }
);
    }
 catch (    Exception e) {
    }
  }
 catch (  Exception e) {
    error("<init>",e);
  }
}
