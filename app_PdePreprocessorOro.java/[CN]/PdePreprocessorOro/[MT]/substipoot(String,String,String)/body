{
  PatternMatcher matcher=new Perl5Matcher();
  PatternCompiler compiler=new Perl5Compiler();
  Pattern pattern=null;
  try {
    pattern=compiler.compile(incoming);
  }
 catch (  MalformedPatternException e) {
    System.err.println("Bad pattern.");
    System.err.println(e.getMessage());
    System.exit(1);
  }
  Perl5Substitution subst=new Perl5Substitution(outgoing,Perl5Substitution.INTERPOLATE_ALL);
  return Util.substitute(matcher,pattern,subst,what,Util.SUBSTITUTE_ALL);
}
