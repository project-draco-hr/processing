{
  try {
    final String filename=file.getAbsolutePath();
    createPath(filename);
    OutputStream output=new FileOutputStream(file);
    if (file.getName().toLowerCase().endsWith(".gz")) {
      output=new GZIPOutputStream(output);
    }
    saveBytes(output,buffer);
    output.close();
  }
 catch (  final IOException e) {
    System.err.println("error saving bytes to " + file);
    e.printStackTrace();
  }
}
