{
  PGraphics pg=null;
  if (irenderer.equals(JAVA2D)) {
    pg=new PGraphicsAndroid2D();
  }
 else   if (irenderer.equals(P2D)) {
    if (!g.isGL()) {
      throw new RuntimeException("createGraphics() with P2D requires size() to use P2D or P3D");
    }
    pg=new PGraphics2D();
  }
 else   if (irenderer.equals(P3D)) {
    if (!g.isGL()) {
      throw new RuntimeException("createGraphics() with P3D or OPENGL requires size() to use P2D or P3D");
    }
    pg=new PGraphics3D();
  }
 else {
    Class<?> rendererClass=null;
    Constructor<?> constructor=null;
    try {
      rendererClass=this.getClass().getClassLoader().loadClass(irenderer);
    }
 catch (    ClassNotFoundException cnfe) {
      throw new RuntimeException("Missing renderer class");
    }
    if (rendererClass != null) {
      try {
        constructor=rendererClass.getConstructor(new Class[]{});
      }
 catch (      NoSuchMethodException nsme) {
        throw new RuntimeException("Missing renderer constructor");
      }
      if (constructor != null) {
        try {
          pg=(PGraphics)constructor.newInstance();
        }
 catch (        InvocationTargetException e) {
          e.printStackTrace();
          throw new RuntimeException(e.getMessage());
        }
catch (        IllegalAccessException e) {
          e.printStackTrace();
          throw new RuntimeException(e.getMessage());
        }
catch (        InstantiationException e) {
          e.printStackTrace();
          throw new RuntimeException(e.getMessage());
        }
      }
    }
  }
  pg.setParent(this);
  pg.setPrimary(false);
  pg.setSize(iwidth,iheight);
  return pg;
}
