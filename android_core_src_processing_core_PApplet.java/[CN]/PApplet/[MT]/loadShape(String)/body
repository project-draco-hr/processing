{
  String extension;
  String lower=filename.toLowerCase();
  int dot=filename.lastIndexOf('.');
  if (dot == -1) {
    extension="unknown";
  }
  extension=lower.substring(dot + 1);
  int question=extension.indexOf('?');
  if (question != -1) {
    extension=extension.substring(0,question);
  }
  if (extension.equals("svg")) {
    return new PShapeSVG(this,filename);
  }
 else   if (extension.equals("svgz")) {
    try {
      InputStream input=new GZIPInputStream(createInput(filename));
      XML xml=new XML(createReader(input));
      return new PShapeSVG(xml);
    }
 catch (    IOException e) {
      e.printStackTrace();
    }
  }
 else {
    String[] loadShapeFormats=g.getSupportedShapeFormats();
    if (loadShapeFormats != null) {
      for (int i=0; i < loadShapeFormats.length; i++) {
        if (extension.equals(loadShapeFormats[i])) {
          return g.loadShape(filename);
        }
      }
    }
  }
  return null;
}
