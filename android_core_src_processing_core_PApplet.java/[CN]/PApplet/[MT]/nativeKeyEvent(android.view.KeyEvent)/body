{
  char key=(char)event.getUnicodeChar();
  if (key == 0 || key == 0xFFFF) {
    key=CODED;
  }
  int keyCode=event.getKeyCode();
  int keAction=0;
  int action=event.getAction();
  if (action == android.view.KeyEvent.ACTION_DOWN) {
    keAction=KeyEvent.PRESS;
  }
 else   if (action == android.view.KeyEvent.ACTION_UP) {
    keAction=KeyEvent.RELEASE;
  }
  int keModifiers=0;
  KeyEvent ke=new KeyEvent(event,event.getEventTime(),keAction,keModifiers,key,keyCode);
  if (action == android.view.KeyEvent.ACTION_DOWN) {
    if (keyCode == android.view.KeyEvent.KEYCODE_BACK) {
      exit();
    }
  }
  postEvent(ke);
}
