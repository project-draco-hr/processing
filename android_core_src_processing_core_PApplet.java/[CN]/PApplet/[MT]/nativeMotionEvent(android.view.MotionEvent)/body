{
  int metaState=motionEvent.getMetaState();
  int modifiers=0;
  if ((metaState & android.view.KeyEvent.META_SHIFT_ON) != 0) {
    modifiers|=Event.SHIFT;
  }
  if ((metaState & META_CTRL_ON) != 0) {
    modifiers|=Event.CTRL;
  }
  if ((metaState & META_META_ON) != 0) {
    modifiers|=Event.META;
  }
  if ((metaState & android.view.KeyEvent.META_ALT_ON) != 0) {
    modifiers|=Event.ALT;
  }
  int clickCount=1;
  int index;
switch (motionEvent.getAction()) {
case MotionEvent.ACTION_DOWN:
    motionPointerId=motionEvent.getPointerId(0);
  postEvent(new MouseEvent(motionEvent,motionEvent.getEventTime(),MouseEvent.PRESS,modifiers,(int)motionEvent.getX(),(int)motionEvent.getY(),LEFT,clickCount));
break;
case MotionEvent.ACTION_MOVE:
index=motionEvent.findPointerIndex(motionPointerId);
if (index != -1) {
postEvent(new MouseEvent(motionEvent,motionEvent.getEventTime(),MouseEvent.DRAG,modifiers,(int)motionEvent.getX(index),(int)motionEvent.getY(index),LEFT,clickCount));
}
break;
case MotionEvent.ACTION_UP:
index=motionEvent.findPointerIndex(motionPointerId);
if (index != -1) {
postEvent(new MouseEvent(motionEvent,motionEvent.getEventTime(),MouseEvent.RELEASE,modifiers,(int)motionEvent.getX(index),(int)motionEvent.getY(index),LEFT,clickCount));
}
break;
}
}
