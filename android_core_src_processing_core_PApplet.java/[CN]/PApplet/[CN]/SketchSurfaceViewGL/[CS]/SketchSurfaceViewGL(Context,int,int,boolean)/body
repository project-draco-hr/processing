{
  super(context);
  final ActivityManager activityManager=(ActivityManager)getSystemService(Context.ACTIVITY_SERVICE);
  final ConfigurationInfo configurationInfo=activityManager.getDeviceConfigurationInfo();
  final boolean supportsGLES2=configurationInfo.reqGlEsVersion >= 0x20000;
  if (!supportsGLES2) {
    throw new RuntimeException("P3D: OpenGL ES 2.0 is not supported by this device.");
  }
  surfaceHolder=getHolder();
  surfaceHolder.addCallback(this);
  if (is3D) {
    g3=new PGraphics3D();
  }
 else {
    g3=new PGraphics2D();
  }
  g3.setParent(PApplet.this);
  g3.setPrimary(true);
  g3.setSize(wide,high);
  setEGLContextClientVersion(2);
  setRenderer(g3.pgl.getRenderer());
  setRenderMode(GLSurfaceView.RENDERMODE_WHEN_DIRTY);
  g=g3;
  setFocusable(true);
  setFocusableInTouchMode(true);
  requestFocus();
}
