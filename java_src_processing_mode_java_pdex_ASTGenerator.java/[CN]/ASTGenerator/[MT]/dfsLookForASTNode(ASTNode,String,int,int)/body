{
  Stack<ASTNode> stack=new Stack<ASTNode>();
  stack.push(root);
  while (!stack.isEmpty()) {
    ASTNode node=stack.pop();
    Iterator<StructuralPropertyDescriptor> it=node.structuralPropertiesForType().iterator();
    while (it.hasNext()) {
      StructuralPropertyDescriptor prop=it.next();
      if (prop.isChildProperty() || prop.isSimpleProperty()) {
        if (node.getStructuralProperty(prop) instanceof ASTNode) {
          ASTNode temp=(ASTNode)node.getStructuralProperty(prop);
          if (temp.getStartPosition() <= startOffset && (temp.getStartPosition() + temp.getLength()) >= endOffset) {
            if (temp instanceof SimpleName) {
              if (name.equals(temp.toString())) {
                return temp;
              }
            }
 else             stack.push(temp);
          }
        }
      }
 else       if (prop.isChildListProperty()) {
        List<ASTNode> nodelist=(List<ASTNode>)node.getStructuralProperty(prop);
        for (        ASTNode temp : nodelist) {
          if (temp.getStartPosition() <= startOffset && (temp.getStartPosition() + temp.getLength()) >= endOffset) {
            stack.push(temp);
            if (temp instanceof SimpleName) {
              if (name.equals(temp.toString())) {
                return temp;
              }
            }
 else             stack.push(temp);
          }
        }
      }
    }
  }
  return null;
}
