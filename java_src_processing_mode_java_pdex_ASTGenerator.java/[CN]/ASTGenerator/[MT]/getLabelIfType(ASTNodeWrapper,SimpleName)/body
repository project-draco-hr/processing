{
  ASTNode current=node.getNode().getParent();
  String type="";
  StringBuilder fullName=new StringBuilder();
  Stack<String> parents=new Stack<String>();
  String simpleName=(sn == null) ? node.getNode().toString() : sn.toString();
switch (node.getNodeType()) {
case ASTNode.TYPE_DECLARATION:
case ASTNode.METHOD_DECLARATION:
case ASTNode.FIELD_DECLARATION:
    while (current != null) {
      if (current instanceof TypeDeclaration) {
        parents.push(((TypeDeclaration)current).getName().toString());
      }
      current=current.getParent();
    }
  while (parents.size() > 0) {
    fullName.append(parents.pop() + ".");
  }
fullName.append(simpleName);
if (node.getNode() instanceof MethodDeclaration) {
MethodDeclaration md=(MethodDeclaration)node.getNode();
if (!md.isConstructor()) type=md.getReturnType2().toString();
fullName.append('(');
if (!md.parameters().isEmpty()) {
  List<ASTNode> params=md.parameters();
  for (  ASTNode par : params) {
    if (par instanceof SingleVariableDeclaration) {
      SingleVariableDeclaration svd=(SingleVariableDeclaration)par;
      fullName.append(svd.getType() + " " + svd.getName()+ ",");
    }
  }
}
if (fullName.charAt(fullName.length() - 1) == ',') fullName.deleteCharAt(fullName.length() - 1);
fullName.append(')');
}
 else if (node.getNode() instanceof FieldDeclaration) {
type=((FieldDeclaration)node.getNode()).getType().toString();
}
int x=fullName.indexOf(".");
fullName.delete(0,x + 1);
return type + " " + fullName;
case ASTNode.SINGLE_VARIABLE_DECLARATION:
SingleVariableDeclaration svd=(SingleVariableDeclaration)node.getNode();
return svd.getType() + " " + svd.getName();
case ASTNode.VARIABLE_DECLARATION_STATEMENT:
return ((VariableDeclarationStatement)node.getNode()).getType() + " " + simpleName;
case ASTNode.VARIABLE_DECLARATION_EXPRESSION:
return ((VariableDeclarationExpression)node.getNode()).getType() + " " + simpleName;
default :
break;
}
return "";
}
