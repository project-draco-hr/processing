{
  flush();
  if ((pixels == null) || (pixels.length != width * height)) {
    pixels=new int[width * height];
    pixelBuffer=IntBuffer.wrap(pixels);
    pixelsAreDirty=true;
  }
  if (pixelsAreDirty) {
    beginScreenOp(OP_READ);
    pixelBuffer.rewind();
    pgl.glReadPixels(0,0,width,height,PGL.GL_RGBA,PGL.GL_UNSIGNED_BYTE,pixelBuffer);
    endScreenOp();
    PGL.nativeToJavaARGB(pixels,width,height);
    if (primarySurface) {
      loadTextureImpl(POINT);
      pixelsToTexture();
    }
    pixelsAreDirty=false;
  }
}
