{
  FontMetrics fm=textArea.getPainter().getFontMetrics();
  int offsetY=fm.getHeight() - CompositionTextManager.COMPOSING_UNDERBAR_HEIGHT;
  int lineIndex=textArea.getCaretLine();
  int offsetX=composedBeginCaretPosition - textArea.getLineStartOffset(lineIndex);
  return new Point(textArea.offsetToX(lineIndex,offsetX),(lineIndex - textArea.getFirstLine()) * fm.getHeight() + offsetY);
}
