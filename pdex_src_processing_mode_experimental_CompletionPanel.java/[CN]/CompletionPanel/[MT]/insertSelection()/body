{
  if (completionList.getSelectedValue() != null) {
    try {
      String currentSubword=fetchCurrentSubword();
      int currentSubwordLen=currentSubword == null ? 0 : currentSubword.length();
      String selectedSuggestion=((CompletionCandidate)completionList.getSelectedValue()).getCompletionString();
      if (currentSubword != null) {
        selectedSuggestion=selectedSuggestion.substring(currentSubwordLen);
      }
 else {
        currentSubword="";
      }
      logE(subWord + " <= subword, Inserting suggestion=> " + selectedSuggestion+ " Current sub: "+ currentSubword);
      if (currentSubword.length() > 0) {
        textarea.getDocument().remove(insertionPosition - currentSubwordLen,currentSubwordLen);
      }
      textarea.getDocument().insertString(insertionPosition - currentSubwordLen,((CompletionCandidate)completionList.getSelectedValue()).getCompletionString(),null);
      if (selectedSuggestion.endsWith(")")) {
        if (!selectedSuggestion.endsWith("()")) {
          int x=selectedSuggestion.indexOf('(');
          if (x != -1) {
            textarea.setCaretPosition(insertionPosition + (x + 1));
          }
        }
      }
 else {
        textarea.setCaretPosition(insertionPosition + selectedSuggestion.length());
      }
      log("Suggestion inserted: " + System.currentTimeMillis());
      return true;
    }
 catch (    BadLocationException e1) {
      e1.printStackTrace();
    }
catch (    Exception e) {
      e.printStackTrace();
    }
    hide();
  }
  return false;
}
