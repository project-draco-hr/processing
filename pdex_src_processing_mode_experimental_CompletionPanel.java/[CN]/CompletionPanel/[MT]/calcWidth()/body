{
  int maxWidth=300;
  float min=0;
  FontMetrics fm=textarea.getGraphics().getFontMetrics();
  for (int i=0; i < completionList.getModel().getSize(); i++) {
    float h=fm.stringWidth(((CompletionCandidate)completionList.getModel().getElementAt(i)).getLabel());
    System.out.println("H " + h);
    min=Math.max(min,h);
  }
  System.out.println("MIN " + min);
  int w=Math.min((int)min,maxWidth);
  w+=editor.dmode.localVarIcon.getIconWidth();
  w+=fm.stringWidth("         ");
  log("popup width " + w);
  return w;
}
