{
  if (buf.length() == 0) {
    if (s_flag) {
      s_flag=elseFlag=false;
    }
    return;
  }
  if (s_flag) {
    if (continuationFlag)     tabs++;
    printIndentation();
    s_flag=false;
    if (continuationFlag)     tabs--;
  }
  if (elseFlag) {
    if (lastNonSpaceChar() == '}') {
      trimRight(result);
      result.append(' ');
    }
    elseFlag=false;
  }
  result.append(buf);
  buf.setLength(0);
}
