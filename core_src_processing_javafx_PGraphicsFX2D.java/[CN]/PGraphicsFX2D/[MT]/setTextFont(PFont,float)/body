{
  textFont=which;
  String fontName=which.getName();
  textFontInfo=fontCache.get(fontName,size);
  if (textFontInfo == null) {
    Font font;
    String filename=fontCache.nameToFilename.get(fontName);
    if (filename != null) {
      font=Font.loadFont(parent.createInput(filename),size);
    }
 else {
      font=new Font(fontName,size);
    }
    boolean isFallbackFont=filename == null && !fontName.equalsIgnoreCase(font.getName());
    textFontInfo=fontCache.createFontInfo(font,isFallbackFont);
    fontCache.put(fontName,size,textFontInfo);
  }
  context.setFont(textFontInfo.font);
}
