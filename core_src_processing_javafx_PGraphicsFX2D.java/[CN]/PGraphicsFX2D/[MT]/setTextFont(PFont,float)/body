{
  textFont=which;
  String fontName=which.getName();
  textFontInfo=fontCache.get(fontName,size);
  if (textFontInfo == null) {
    Font font;
    String filename=fontCache.nameToFilename.get(fontName);
    if (filename != null) {
      font=Font.loadFont(parent.createInput(filename),size);
    }
 else {
      font=new Font(fontName,size);
    }
    boolean isNotFound=filename == null && !fontName.equalsIgnoreCase(font.getName());
    if (isNotFound) {
      fontCache.namesNotFound.add(fontName);
      textFontInfo=FontInfo.NOT_FOUND;
    }
 else {
      textFontInfo=fontCache.createFontInfo(font);
      fontCache.put(fontName,size,textFontInfo);
    }
  }
  context.setFont(textFontInfo.font);
}
