{
  if (document == null) {
    document=new Document(new Rectangle(width,height));
    try {
      if (file != null) {
        output=new BufferedOutputStream(new FileOutputStream(file),16384);
      }
 else       if (output == null) {
        throw new RuntimeException("PGraphicsPDF requires a path " + "for the location of the output file.");
      }
      writer=PdfWriter.getInstance(document,output);
      document.open();
      content=writer.getDirectContent();
    }
 catch (    Exception e) {
      e.printStackTrace();
      throw new RuntimeException("Problem saving the PDF file.");
    }
    g2=content.createGraphicsShapes(width,height);
  }
  checkSettings();
  resetMatrix();
  vertexCount=0;
  pushMatrix();
}
