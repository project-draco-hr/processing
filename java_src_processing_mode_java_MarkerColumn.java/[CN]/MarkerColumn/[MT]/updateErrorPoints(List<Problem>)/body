{
  try {
    new SwingWorker(){
      protected Object doInBackground() throws Exception {
        Sketch sketch=editor.getSketch();
        SketchCode code=sketch.getCurrentCode();
        int totalLines=0;
        int currentTab=sketch.getCurrentCodeIndex();
        try {
          totalLines=Util.countLines(code.getDocumentText());
        }
 catch (        BadLocationException e) {
          e.printStackTrace();
        }
        errorPoints=new ArrayList<>();
synchronized (problems) {
          for (          Problem problem : problems) {
            if (problem.getTabIndex() == currentTab) {
              float y=(problem.getLineNumber() + 1) / ((float)totalLines);
              y*=getHeight() - 15;
              errorPoints.add(new LineMarker(problem,(int)y,problem.isError()));
            }
          }
        }
        return null;
      }
      protected void done(){
        repaint();
      }
    }
.execute();
  }
 catch (  Exception ex) {
    ex.printStackTrace();
  }
}
