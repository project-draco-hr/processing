{
  String imports[]=new String[100];
  int importCount=0;
  String pieces[]=BApplet.splitStrings(path,File.pathSeparatorChar);
  for (int i=0; i < pieces.length; i++) {
    if (pieces[i].length() == 0)     continue;
    if (pieces[i].toLowerCase().endsWith(".jar") || pieces[i].toLowerCase().endsWith(".zip")) {
      try {
        ZipFile file=new ZipFile(pieces[i]);
        Enumeration entries=file.entries();
        while (entries.hasMoreElements()) {
          ZipEntry entry=(ZipEntry)entries.nextElement();
          if (entry.isDirectory()) {
            String name=entry.getName();
            if (name.equals("META-INF/"))             continue;
            name=name.substring(0,name.length() - 1);
            name=name.replace('/','.');
            if (importCount == imports.length) {
              String temp[]=new String[importCount << 1];
              System.arraycopy(imports,0,temp,0,importCount);
              imports=temp;
            }
            imports[importCount++]=name;
          }
        }
      }
 catch (      IOException e) {
        System.err.println("Error in file " + pieces[i]);
      }
    }
 else {
      File dir=new File(pieces[i]);
      if (dir.exists()) {
        importCount=magicImportsRecursive(dir,null,imports,importCount);
      }
    }
  }
  String output[]=new String[importCount];
  System.arraycopy(imports,0,output,0,importCount);
  return output;
}
