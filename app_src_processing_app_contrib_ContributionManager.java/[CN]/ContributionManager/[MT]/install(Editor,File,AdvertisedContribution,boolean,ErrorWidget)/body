{
  File tempDir=ContributionManager.unzipFileToTemp(libFile,statusBar);
  List<File> libFolders=ContributionManager.discover(ad.getType(),tempDir);
  InstalledContribution outgoing=null;
  if (libFolders.isEmpty()) {
    libFolders=ContributionManager.discover(ad.getType(),tempDir.getParentFile());
  }
  if (libFolders != null && libFolders.size() == 1) {
    File libFolder=libFolders.get(0);
    File propFile=new File(libFolder,ad.getTypeName() + ".properties");
    if (ad.writePropertiesFile(propFile)) {
      InstalledContribution newContrib=ContributionManager.create(editor.getBase(),libFolder,ad.getType());
      outgoing=ContributionManager.installContribution(editor,newContrib,confirmReplace,statusBar);
    }
 else {
      statusBar.setErrorMessage("Error overwriting .properties file.");
    }
  }
 else {
    if (libFolders == null) {
      statusBar.setErrorMessage("An internal error occured while searching " + "for contributions in the downloaded file.");
    }
 else     if (libFolders.isEmpty()) {
      statusBar.setErrorMessage("Maybe it's just me, but it looks like " + "there are no contributions in the file " + "for \"" + ad.getName() + ".\"");
    }
 else {
      statusBar.setErrorMessage("There were multiple libraries in the file, " + "so we're ignoring it.");
    }
  }
  Base.removeDir(tempDir);
  return outgoing;
}
