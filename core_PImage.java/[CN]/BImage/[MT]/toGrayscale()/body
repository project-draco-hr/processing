{
  int col, lum, i;
  for (i=0; i < pixels.length; i++) {
    col=pixels[i];
    lum=(77 * (col >> 16 & 0xff) + 151 * (col >> 8 & 0xff) + 28 * (col & 0xff)) >> 8;
    pixels[i]=(col & ALPHA_MASK) | lum << 16 | lum << 8 | lum;
  }
}
