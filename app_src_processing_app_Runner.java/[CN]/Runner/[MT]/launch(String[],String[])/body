{
  LaunchingConnector connector=findLaunchingConnector();
  Map arguments=connector.defaultArguments();
  Connector.Argument mainArg=(Connector.Argument)arguments.get("main");
  if (mainArg == null) {
    throw new Error("Bad launching connector");
  }
  String mainArgs="";
  if (classParams != null) {
    for (int i=0; i < classParams.length; i++) {
      mainArgs=addArgument(mainArgs,classParams[i],' ');
    }
  }
  mainArg.setValue(mainArgs);
  String optionArgs="";
  for (int i=0; i < vmParams.length; i++) {
    optionArgs=addArgument(optionArgs,vmParams[i],' ');
  }
  Connector.Argument optionArg=(Connector.Argument)arguments.get("options");
  optionArg.setValue(optionArgs);
  try {
    return connector.launch(arguments);
  }
 catch (  IOException exc) {
    throw new Error("Unable to launch target VM: " + exc);
  }
catch (  IllegalConnectorArgumentsException exc) {
    throw new Error("Internal error: " + exc);
  }
catch (  VMStartException exc) {
    throw new Error("Target VM failed to initialize: " + exc.getMessage());
  }
}
