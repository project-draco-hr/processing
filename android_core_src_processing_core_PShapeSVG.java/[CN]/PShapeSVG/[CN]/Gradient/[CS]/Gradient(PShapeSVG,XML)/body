{
  super(parent,properties,true);
  XML elements[]=properties.getChildren();
  offset=new float[elements.length];
  color=new int[elements.length];
  for (int i=0; i < elements.length; i++) {
    XML elem=elements[i];
    String name=elem.getName();
    if (name.equals("stop")) {
      String offsetAttr=elem.getString("offset");
      float div=1.0f;
      if (offsetAttr.endsWith("%")) {
        div=100.0f;
        offsetAttr=offsetAttr.substring(0,offsetAttr.length() - 1);
      }
      offset[count]=PApplet.parseFloat(offsetAttr) / div;
      String style=elem.getString("style");
      HashMap<String,String> styles=parseStyleAttributes(style);
      String colorStr=styles.get("stop-color");
      if (colorStr == null)       colorStr="#000000";
      String opacityStr=styles.get("stop-opacity");
      if (opacityStr == null)       opacityStr="1";
      int tupacity=(int)(PApplet.parseFloat(opacityStr) * 255);
      color[count]=(tupacity << 24) | Integer.parseInt(colorStr.substring(1),16);
      count++;
    }
  }
  offset=PApplet.subset(offset,0,count);
  color=PApplet.subset(color,0,count);
}
