{
  this.editor=editor;
  this.base=base;
  buttons=new ArrayList<Button>();
  rollover=null;
  mode=editor.getMode();
  bgColor=mode.getColor("buttons.bgcolor");
  statusFont=mode.getFont("buttons.status.font");
  statusColor=mode.getColor("buttons.status.color");
  modeTitle=mode.getTitle();
  modeTextFont=mode.getFont("mode.button.font");
  modeButtonColor=mode.getColor("mode.button.color");
  hiding=Preferences.getBoolean("buttons.hide.image");
  hideColor=mode.getColor("buttons.hide.color");
  if (modeArrow == null) {
    String suffix=Toolkit.highResDisplay() ? "-2x.png" : ".png";
    modeArrow=Toolkit.getLibImage("mode-arrow" + suffix);
  }
  addMouseListener(this);
  addMouseMotionListener(this);
}
