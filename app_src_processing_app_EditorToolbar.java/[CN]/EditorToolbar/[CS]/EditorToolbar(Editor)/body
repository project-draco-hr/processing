{
  this.editor=editor;
  base=editor.getBase();
  mode=editor.getMode();
  backgroundGradient=mode.getGradient("header",400,HIGH);
  reverseGradient=mode.getGradient("reversed",100,EditorButton.DIM);
  runButton=new EditorButton(mode,"/lib/toolbar/run",Language.text("toolbar.run"),Language.text("toolbar.present")){
    @Override public void actionPerformed(    ActionEvent e){
      handleRun(e.getModifiers());
    }
  }
;
  stopButton=new EditorButton(mode,"/lib/toolbar/stop",Language.text("toolbar.stop")){
    @Override public void actionPerformed(    ActionEvent e){
      handleStop();
    }
  }
;
  box=Box.createHorizontalBox();
  box.add(Box.createHorizontalStrut(Editor.GUTTER));
  box.add(runButton);
  label=new JLabel();
  label.setFont(mode.getFont("toolbar.sketch.font"));
  label.setForeground(mode.getColor("toolbar.sketch.color"));
  box.add(label);
  currentButton=runButton;
  box.add(Box.createHorizontalGlue());
  Component items=createModeButtons();
  if (items != null) {
    box.add(items);
  }
  ModeSelector ms=new ModeSelector();
  box.add(ms);
  setLayout(new BorderLayout());
  add(box,BorderLayout.CENTER);
}
