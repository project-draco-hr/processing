{
  if (buttonImages == null) {
    loadButtons();
  }
  if (stateImage == null) {
    state=new int[buttonCount];
    stateImage=new Image[buttonCount];
    for (int i=0; i < buttonCount; i++) {
      setState(i,INACTIVE,false);
    }
    y1=0;
    y2=BUTTON_HEIGHT;
    x1=new int[buttonCount];
    x2=new int[buttonCount];
  }
  Dimension size=getSize();
  if ((offscreen == null) || (size.width != width) || (size.height != height)) {
    offscreen=createImage(size.width,size.height);
    width=size.width;
    height=size.height;
    int offsetX=3;
    for (int i=0; i < buttonCount; i++) {
      x1[i]=offsetX;
      if (i == 2)       x1[i]+=BUTTON_GAP;
      x2[i]=x1[i] + BUTTON_WIDTH;
      offsetX=x2[i];
    }
  }
  Graphics g=offscreen.getGraphics();
  g.setColor(bgcolor);
  g.fillRect(0,0,width,height);
  for (int i=0; i < buttonCount; i++) {
    g.drawImage(stateImage[i],x1[i],y1,null);
  }
  g.setColor(statusColor);
  g.setFont(statusFont);
  if (currentRollover != -1) {
    int statusY=(BUTTON_HEIGHT + g.getFontMetrics().getAscent()) / 2;
    String status=shiftPressed ? titleShift[currentRollover] : title[currentRollover];
    g.drawString(status,buttonCount * BUTTON_WIDTH + 3 * BUTTON_GAP,statusY);
  }
  screen.drawImage(offscreen,0,0,null);
}
