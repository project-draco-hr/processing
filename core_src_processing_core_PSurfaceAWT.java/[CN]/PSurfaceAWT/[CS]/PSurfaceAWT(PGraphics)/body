{
  super(graphics);
  canvas=new SmoothCanvas();
  canvas.setIgnoreRepaint(true);
  canvas.setFocusTraversalKeysEnabled(false);
  canvas.addComponentListener(new ComponentAdapter(){
    @Override public void componentResized(    ComponentEvent e){
      if (!sketch.looping) {
        Dimension canvasSize=canvas.getSize();
        if (canvasSize.width != sketch.sketchWidth() || canvasSize.height != sketch.sketchHeight()) {
          sketch.redraw();
        }
      }
    }
  }
);
  addListeners();
}
