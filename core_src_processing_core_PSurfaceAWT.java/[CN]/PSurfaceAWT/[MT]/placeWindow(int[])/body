{
  setFrameSize();
  int contentW=Math.max(sketch.width,MIN_WINDOW_WIDTH);
  int contentH=Math.max(sketch.height,MIN_WINDOW_HEIGHT);
  if (location != null) {
    frame.setLocation(location[0],location[1]);
  }
 else {
    frame.setLocation(screenRect.x + (screenRect.width - sketch.width) / 2,screenRect.y + (screenRect.height - sketch.height) / 2);
  }
  Point frameLoc=frame.getLocation();
  if (frameLoc.y < 0) {
    frame.setLocation(frameLoc.x,30);
  }
  canvas.setBounds((contentW - sketch.width) / 2,(contentH - sketch.height) / 2,sketch.width,sketch.height);
  frame.addWindowListener(new WindowAdapter(){
    @Override public void windowClosing(    WindowEvent e){
      System.exit(0);
    }
  }
);
  setupFrameResizeListener();
  if (sketch.getGraphics().displayable()) {
    setVisible(true);
  }
}
