{
  if (PApplet.DEBUG) {
    new Exception(String.format("setSize(%d, %d)",wide,high)).printStackTrace(System.out);
  }
  if (wide == sketchWidth && high == sketchHeight) {
    if (PApplet.DEBUG) {
      new Exception("w/h unchanged " + wide + " "+ high).printStackTrace(System.out);
    }
    return;
  }
  sketchWidth=wide;
  sketchHeight=high;
  if (frame != null) {
    setFrameSize();
  }
  setCanvasSize();
  GraphicsConfiguration gc=canvas.getGraphicsConfiguration();
  if (gc == null) {
    System.err.println("GraphicsConfiguration null in setSize()");
    GraphicsEnvironment ge=GraphicsEnvironment.getLocalGraphicsEnvironment();
    gc=ge.getDefaultScreenDevice().getDefaultConfiguration();
  }
  int factor=graphics.pixelFactor;
  graphics.image=gc.createCompatibleImage(wide * factor,high * factor);
  sketch.width=wide;
  sketch.height=high;
  graphics.setSize(wide,high);
}
