{
  if (screenFb)   return;
  if (width == 0 || height == 0) {
    throw new RuntimeException("PFramebuffer: size undefined.");
  }
  if (fboMode) {
    pgl.pushFramebuffer();
    pgl.setFramebuffer(this);
    glStencilBufferID=pgl.createGLResource(PGraphicsOpenGL2.GL_RENDER_BUFFER);
    gl.glBindRenderbuffer(GL.GL_RENDERBUFFER,glStencilBufferID);
    int glConst=GL.GL_STENCIL_INDEX1;
    if (bits == 1) {
      glConst=GL.GL_STENCIL_INDEX1;
    }
 else     if (bits == 4) {
      glConst=GL.GL_STENCIL_INDEX4;
    }
 else     if (bits == 8) {
      glConst=GL.GL_STENCIL_INDEX8;
    }
    if (multisample) {
      gl2.glRenderbufferStorageMultisample(GL.GL_RENDERBUFFER,nsamples,glConst,width,height);
    }
 else {
      gl.glRenderbufferStorage(GL.GL_RENDERBUFFER,glConst,width,height);
    }
    gl.glFramebufferRenderbuffer(GL.GL_FRAMEBUFFER,GL.GL_STENCIL_ATTACHMENT,GL.GL_RENDERBUFFER,glStencilBufferID);
    pgl.popFramebuffer();
  }
}
