{
  if (matrix != null) {
    matrix.print();
    boolean flat=g instanceof PGraphics2D;
    g.pushMatrix();
    if (flat) {
      g.applyMatrix(matrix.m00,matrix.m01,matrix.m03,matrix.m10,matrix.m11,matrix.m13);
    }
 else {
      g.applyMatrix(matrix.m00,matrix.m01,matrix.m02,matrix.m03,matrix.m10,matrix.m11,matrix.m12,matrix.m13,matrix.m20,matrix.m21,matrix.m22,matrix.m23,matrix.m30,matrix.m31,matrix.m32,matrix.m33);
    }
  }
  strokeSaved=g.stroke;
  strokeColorSaved=g.strokeColor;
  strokeWeightSaved=g.strokeWeight;
  strokeCapSaved=g.strokeCap;
  strokeJoinSaved=g.strokeJoin;
  fillSaved=g.fill;
  fillColorSaved=g.fillColor;
  ellipseModeSaved=g.ellipseMode;
  if (styles) {
    styles(g);
  }
}
