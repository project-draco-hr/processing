{
  beginCompoundEdit();
  textarea.setText(what);
  endCompoundEdit();
  selectionStart=Math.max(0,Math.min(selectionStart,textarea.getDocumentLength()));
  selectionEnd=Math.max(0,Math.min(selectionStart,textarea.getDocumentLength()));
  textarea.select(selectionStart,selectionEnd);
  textarea.requestFocus();
}
