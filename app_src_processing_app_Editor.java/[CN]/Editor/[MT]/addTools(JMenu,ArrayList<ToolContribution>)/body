{
  HashMap<String,JMenuItem> toolItems=new HashMap<String,JMenuItem>();
  for (  final ToolContribution tool : tools) {
    String title=tool.getMenuTitle();
    JMenuItem item=new JMenuItem(title);
    item.addActionListener(new ActionListener(){
      boolean inited;
      public void actionPerformed(      ActionEvent e){
        if (!inited) {
          tool.init(Editor.this);
          inited=true;
        }
        EventQueue.invokeLater(tool);
      }
    }
);
    toolItems.put(title,item);
  }
  ArrayList<String> toolList=new ArrayList<String>(toolItems.keySet());
  if (toolList.size() > 0) {
    menu.addSeparator();
    Collections.sort(toolList);
    for (    String title : toolList) {
      menu.add(toolItems.get(title));
    }
  }
}
