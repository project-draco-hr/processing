{
  HashMap<String,JMenuItem> toolItems=new HashMap<String,JMenuItem>();
  for (  final ToolContribution tool : tools) {
    try {
      tool.init(Editor.this);
      addToolItem(tool,toolItems);
    }
 catch (    NoSuchMethodError nsme) {
      System.err.println("\"" + tool.getMenuTitle() + "\" is not "+ "compatible with this version of Processing");
      nsme.printStackTrace();
    }
catch (    Exception ex) {
      System.err.println("An error occurred inside \"" + tool.getMenuTitle() + "\"");
      ex.printStackTrace();
    }
  }
  ArrayList<String> toolList=new ArrayList<String>(toolItems.keySet());
  if (toolList.size() > 0) {
    menu.addSeparator();
    Collections.sort(toolList);
    for (    String title : toolList) {
      menu.add(toolItems.get(title));
    }
  }
}
