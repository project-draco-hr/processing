{
  if (line >= textarea.getLineCount()) {
    line=textarea.getLineCount() - 1;
    if (textarea.getLineText(line).length() == 0) {
      line--;
    }
  }
  textarea.select(textarea.getLineStartOffset(line),textarea.getLineStopOffset(line) - 1);
}
