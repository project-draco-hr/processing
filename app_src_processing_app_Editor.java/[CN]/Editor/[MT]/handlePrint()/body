{
  statusNotice("Printing...");
  if (printerJob == null) {
    printerJob=PrinterJob.getPrinterJob();
  }
  if (pageFormat != null) {
    printerJob.setPrintable(textarea.getPainter(),pageFormat);
  }
 else {
    printerJob.setPrintable(textarea.getPainter());
  }
  printerJob.setJobName(sketch.current.name);
  if (printerJob.printDialog()) {
    try {
      printerJob.print();
      statusNotice("Done printing.");
    }
 catch (    PrinterException pe) {
      statusError("Error while printing.");
      pe.printStackTrace();
    }
  }
 else {
    statusNotice("Printing canceled.");
  }
}
