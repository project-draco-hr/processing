{
  super(base,path,state,mode);
  jmode=(JavaMode)mode;
  debugger=new Debugger(this);
  inspector=new VariableInspector(this);
  JMenuItem showUsageItem=new JMenuItem(Language.text("editor.popup.show_usage"));
  showUsageItem.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      handleShowUsage();
    }
  }
);
  getTextArea().getRightClickPopup().add(showUsageItem);
  JMenuItem renameItem=new JMenuItem(Language.text("editor.popup.rename"));
  renameItem.addActionListener(new ActionListener(){
    public void actionPerformed(    ActionEvent e){
      handleRefactor();
    }
  }
);
  textarea.getRightClickPopup().add(renameItem);
  Toolkit.setMenuMnemonics(textarea.getRightClickPopup());
  for (  LineID lineID : stripBreakpointComments()) {
    debugger.setBreakpoint(lineID);
  }
  getSketch().setModified(false);
  hasJavaTabs=checkForJavaTabs();
  JPanel textAndError=new JPanel();
  Box box=(Box)textarea.getParent();
  box.remove(2);
  textAndError.setLayout(new BorderLayout());
  errorColumn=new MarkerColumn(this,textarea.getMinimumSize().height);
  textAndError.add(errorColumn,BorderLayout.EAST);
  textarea.setBounds(0,0,errorColumn.getX() - 1,textarea.getHeight());
  textAndError.add(textarea);
  box.add(textAndError);
  getJavaTextArea().setMode(jmode);
  initPDEX();
  addWindowFocusListener(new WindowFocusListener(){
    public void windowLostFocus(    WindowEvent e){
      getJavaTextArea().hideSuggestion();
    }
    public void windowGainedFocus(    WindowEvent e){
    }
  }
);
  textarea.addCaretListener(new CaretListener(){
    public void caretUpdate(    CaretEvent e){
      updateEditorStatus();
    }
  }
);
}
