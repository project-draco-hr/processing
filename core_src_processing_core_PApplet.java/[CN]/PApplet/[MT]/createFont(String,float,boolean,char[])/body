{
  String lowerName=name.toLowerCase();
  Font baseFont=null;
  try {
    if (lowerName.endsWith(".otf") || lowerName.endsWith(".ttf")) {
      InputStream stream=openStream(name);
      if (stream == null) {
        System.err.println("The font \"" + name + "\" "+ "is missing or inaccessible, make sure "+ "the URL is valid or that the file has been "+ "added to your sketch and is readable.");
        return null;
      }
      baseFont=Font.createFont(Font.TRUETYPE_FONT,openStream(name));
    }
 else {
      baseFont=new Font(name,Font.PLAIN,1);
    }
  }
 catch (  Exception e) {
    System.err.println("Problem using createFont() with " + name);
    e.printStackTrace();
  }
  return new PFont(baseFont.deriveFont(size),smooth,charset);
}
