{
  InputStream stream=null;
  boolean gz=filename.toLowerCase().endsWith(".gz");
  if (filename == null)   return null;
  if (filename.length() == 0) {
    return null;
  }
  try {
    URL url=new URL(filename);
    stream=url.openStream();
    return gz ? new GZIPInputStream(stream) : stream;
  }
 catch (  MalformedURLException mfue) {
  }
catch (  FileNotFoundException fnfe) {
  }
catch (  IOException e) {
    e.printStackTrace();
    return null;
  }
  ClassLoader cl=getClass().getClassLoader();
  stream=cl.getResourceAsStream("data/" + filename);
  if (stream != null) {
    String cn=stream.getClass().getName();
    if (!cn.equals("sun.plugin.cache.EmptyInputStream")) {
      try {
        return gz ? new GZIPInputStream(stream) : stream;
      }
 catch (      IOException e) {
        e.printStackTrace();
        return null;
      }
    }
  }
  stream=cl.getResourceAsStream(filename);
  if (stream != null) {
    String cn=stream.getClass().getName();
    if (!cn.equals("sun.plugin.cache.EmptyInputStream")) {
      try {
        return gz ? new GZIPInputStream(stream) : stream;
      }
 catch (      IOException e) {
        e.printStackTrace();
        return null;
      }
    }
  }
  if (!online) {
    try {
      File file=new File(dataPath(filename));
      if (!file.exists()) {
        file=new File(sketchPath,filename);
      }
      if (file.exists()) {
        try {
          String filePath=file.getCanonicalPath();
          String filenameActual=new File(filePath).getName();
          String filenameShort=new File(filename).getName();
          if (!filenameActual.equals(filenameShort)) {
            throw new RuntimeException("This file is named " + filenameActual + " not "+ filename+ ". Re-name it "+ "or change your code.");
          }
        }
 catch (        IOException e) {
        }
      }
      stream=new FileInputStream(file);
      if (stream != null) {
        return gz ? new GZIPInputStream(stream) : stream;
      }
    }
 catch (    IOException ioe) {
    }
catch (    SecurityException se) {
    }
  }
  try {
    try {
      try {
        stream=new FileInputStream(dataPath(filename));
        if (stream != null) {
          return gz ? new GZIPInputStream(stream) : stream;
        }
      }
 catch (      IOException e2) {
      }
      try {
        stream=new FileInputStream(sketchPath(filename));
        if (stream != null) {
          return gz ? new GZIPInputStream(stream) : stream;
        }
      }
 catch (      Exception e) {
      }
      try {
        stream=new FileInputStream(filename);
        if (stream != null) {
          return gz ? new GZIPInputStream(stream) : stream;
        }
      }
 catch (      IOException e1) {
      }
    }
 catch (    SecurityException se) {
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return null;
}
