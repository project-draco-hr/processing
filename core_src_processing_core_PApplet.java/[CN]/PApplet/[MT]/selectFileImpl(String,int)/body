{
  checkParentFrame();
  try {
    SwingUtilities.invokeAndWait(new Runnable(){
      public void run(){
        FileDialog fileDialog=new FileDialog(parentFrame,prompt,mode);
        fileDialog.setVisible(true);
        String directory=fileDialog.getDirectory();
        String filename=fileDialog.getFile();
        selectedFile=(filename == null) ? null : new File(directory,filename);
      }
    }
);
    return selectedFile;
  }
 catch (  Exception e) {
    e.printStackTrace();
    return null;
  }
}
