{
  if (recorder != null) {
    recorder.endDraw();
    recorder.dispose();
    recorder=null;
  }
  if (g.isRecordingShape()) {
    g.endRecord();
  }
}
