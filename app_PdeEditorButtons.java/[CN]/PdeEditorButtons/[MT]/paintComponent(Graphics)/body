{
  if (inactive == null) {
    inactive=new Image[BUTTON_COUNT];
    rollover=new Image[BUTTON_COUNT];
    active=new Image[BUTTON_COUNT];
    state=new int[BUTTON_COUNT];
    for (int i=0; i < BUTTON_COUNT; i++) {
      inactive[i]=createImage(BUTTON_WIDTH,BUTTON_HEIGHT);
      Graphics g=inactive[i].getGraphics();
      g.drawImage(buttons,-(i * BUTTON_WIDTH),-2 * BUTTON_HEIGHT,null);
      rollover[i]=createImage(BUTTON_WIDTH,BUTTON_HEIGHT);
      g=rollover[i].getGraphics();
      g.drawImage(buttons,-(i * BUTTON_WIDTH),-1 * BUTTON_HEIGHT,null);
      active[i]=createImage(BUTTON_WIDTH,BUTTON_HEIGHT);
      g=active[i].getGraphics();
      g.drawImage(buttons,-(i * BUTTON_WIDTH),-0 * BUTTON_HEIGHT,null);
    }
    state=new int[buttonCount];
    stateImage=new Image[buttonCount];
    for (int i=0; i < buttonCount; i++) {
      setState(i,INACTIVE,false);
    }
  }
  Dimension size=size();
  if ((offscreen == null) || (size.width != width) || (size.height != height)) {
    offscreen=createImage(size.width,size.height);
    width=size.width;
    height=size.height;
    x1=0;
    x2=BUTTON_WIDTH;
    y1=new int[buttonCount];
    y2=new int[buttonCount];
    int offsetY=0;
    for (int i=0; i < buttonCount; i++) {
      y1[i]=offsetY;
      y2[i]=offsetY + BUTTON_HEIGHT;
      offsetY=y2[i];
    }
  }
  Graphics g=offscreen.getGraphics();
  g.setColor(getBackground());
  g.fillRect(0,0,width,height);
  for (int i=0; i < buttonCount; i++) {
    g.drawImage(stateImage[i],x1,y1[i],null);
  }
  g.setColor(statusColor);
  g.setFont(statusFont);
  int statusWidth=g.getFontMetrics().stringWidth(status);
  int statusX=(getSize().width - statusWidth) / 2;
  g.drawString(status,statusX,statusY);
  screen.drawImage(offscreen,0,0,null);
}
