{
  searchField.addKeyListener(new KeyAdapter(){
    public void keyPressed(    KeyEvent evt){
      if (soTree.getRowCount() == 0)       return;
      internalSelection=true;
      if (evt.getKeyCode() == KeyEvent.VK_ENTER) {
        if (soTree.getLastSelectedPathComponent() != null) {
          DefaultMutableTreeNode tnode=(DefaultMutableTreeNode)soTree.getLastSelectedPathComponent();
          if (tnode.getUserObject() instanceof ASTNodeWrapper) {
            ASTNodeWrapper awrap=(ASTNodeWrapper)tnode.getUserObject();
            errorCheckerService.highlightNode(awrap);
          }
        }
        return;
      }
 else       if (evt.getKeyCode() == KeyEvent.VK_UP) {
        if (soTree.getLastSelectedPathComponent() == null) {
          soTree.setSelectionRow(0);
          return;
        }
        int x=soTree.getLeadSelectionRow() - 1;
        int step=jsp.getVerticalScrollBar().getMaximum() / soTree.getRowCount();
        if (x == -1) {
          x=soTree.getRowCount() - 1;
          jsp.getVerticalScrollBar().setValue(jsp.getVerticalScrollBar().getMaximum());
        }
 else {
          jsp.getVerticalScrollBar().setValue((jsp.getVerticalScrollBar().getValue() - step));
        }
        soTree.setSelectionRow(x);
        return;
      }
 else       if (evt.getKeyCode() == KeyEvent.VK_DOWN) {
        if (soTree.getLastSelectedPathComponent() == null) {
          soTree.setSelectionRow(0);
          return;
        }
        int x=soTree.getLeadSelectionRow() + 1;
        int step=jsp.getVerticalScrollBar().getMaximum() / soTree.getRowCount();
        if (x == soTree.getRowCount()) {
          x=0;
          jsp.getVerticalScrollBar().setValue(jsp.getVerticalScrollBar().getMinimum());
        }
 else {
          jsp.getVerticalScrollBar().setValue((jsp.getVerticalScrollBar().getValue() + step));
        }
        soTree.setSelectionRow(x);
        return;
      }
      SwingWorker worker=new SwingWorker(){
        protected Object doInBackground() throws Exception {
          return null;
        }
        protected void done(){
          String text=searchField.getText().toLowerCase();
          tempNode=new DefaultMutableTreeNode();
          filterTree(text,tempNode,soNode);
          soTree.setModel(new DefaultTreeModel(tempNode));
          ((DefaultTreeModel)soTree.getModel()).reload();
          for (int i=0; i < soTree.getRowCount(); i++) {
            soTree.expandRow(i);
          }
          internalSelection=true;
          soTree.setSelectionRow(0);
        }
      }
;
      worker.execute();
    }
  }
);
  frmOutlineView.addWindowFocusListener(new WindowFocusListener(){
    public void windowLostFocus(    WindowEvent e){
      frmOutlineView.setVisible(false);
      frmOutlineView.dispose();
    }
    public void windowGainedFocus(    WindowEvent e){
    }
  }
);
  soTree.addTreeSelectionListener(new TreeSelectionListener(){
    public void valueChanged(    TreeSelectionEvent e){
      if (internalSelection) {
        internalSelection=(false);
        return;
      }
      log(e);
      SwingWorker worker=new SwingWorker(){
        protected Object doInBackground() throws Exception {
          return null;
        }
        protected void done(){
          if (soTree.getLastSelectedPathComponent() == null) {
            return;
          }
          DefaultMutableTreeNode tnode=(DefaultMutableTreeNode)soTree.getLastSelectedPathComponent();
          if (tnode.getUserObject() == null) {
            return;
          }
          if (tnode.getUserObject() instanceof ASTNodeWrapper) {
            ASTNodeWrapper awrap=(ASTNodeWrapper)tnode.getUserObject();
            errorCheckerService.highlightNode(awrap);
          }
        }
      }
;
      worker.execute();
    }
  }
);
}
