{
  int count=0;
synchronized (contributionPanels) {
    for (    ContributionPanel libPanel : contributionPanels) {
      if (libPanel.isVisible() && libPanel.isSelected) {
        libPanel.setBackground(UIManager.getColor("List.selectionBackground"));
        cascadeForgroundColor(libPanel,UIManager.getColor("List.selectionForeground"));
        libPanel.setBorder(UIManager.getBorder("List.focusCellHighlightBorder"));
        count++;
      }
 else {
        Border border=null;
        if (Base.isMacOS() && libPanel.isVisible()) {
          if (count % 2 == 1) {
            border=UIManager.getBorder("List.evenRowBackgroundPainter");
          }
 else {
            border=UIManager.getBorder("List.oddRowBackgroundPainter");
          }
          count++;
        }
        if (border == null) {
          border=BorderFactory.createEmptyBorder(1,1,1,1);
        }
        libPanel.setBorder(border);
        libPanel.setBackground(LibraryListPanel.this.getBackground());
        cascadeForgroundColor(libPanel,UIManager.getColor("List.foreground"));
      }
      libPanel.updateHyperLinkStyles();
    }
  }
}
