{
  try {
    AttributedString text=new AttributedString(textArea.getText());
    FontRenderContext frc=textArea.getFontMetrics(textArea.getFont()).getFontRenderContext();
    AttributedCharacterIterator charIt=text.getIterator();
    LineBreakMeasurer lineMeasurer=new LineBreakMeasurer(charIt,frc);
    lineMeasurer.setPosition(charIt.getBeginIndex());
    int noLines=0;
    while (lineMeasurer.getPosition() < charIt.getEndIndex()) {
      lineMeasurer.nextLayout(width);
      noLines++;
    }
    return noLines;
  }
 catch (  IllegalArgumentException e) {
    return 1;
  }
}
