{
  if (src.format == ALPHA) {
    throw new RuntimeException("set() not available for ALPHA images");
  }
  if (src.bitmap == null) {
    canvas.drawBitmap(src.pixels,0,src.width,x,y,src.width,src.height,false,null);
  }
 else {
    if (src.width != src.bitmap.getWidth() || src.height != src.bitmap.getHeight()) {
      src.bitmap=Bitmap.createBitmap(src.width,src.height,Config.ARGB_8888);
      src.modified=true;
    }
    if (src.modified) {
      if (!src.bitmap.isMutable()) {
        src.bitmap=Bitmap.createBitmap(src.width,src.height,Config.ARGB_8888);
      }
      src.bitmap.setPixels(src.pixels,0,src.width,0,0,src.width,src.height);
      src.modified=false;
    }
    canvas.save(Canvas.MATRIX_SAVE_FLAG);
    canvas.setMatrix(null);
    canvas.drawBitmap(src.bitmap,x,y,null);
    canvas.restore();
  }
}
