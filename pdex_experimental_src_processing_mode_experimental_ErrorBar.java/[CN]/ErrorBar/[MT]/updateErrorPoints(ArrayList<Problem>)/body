{
  final int fheight=this.getHeight();
  SwingWorker worker=new SwingWorker(){
    protected Object doInBackground() throws Exception {
      return null;
    }
    protected void done(){
      int totalLines=0;
      int currentTab=0;
      for (      SketchCode sc : editor.getSketch().getCode()) {
        if (sc.isExtension("pde")) {
          try {
            if (editor.getSketch().getCurrentCode().equals(sc)) {
              totalLines=Base.countLines(sc.getDocument().getText(0,sc.getDocument().getLength())) + 1;
              break;
            }
          }
 catch (          Exception e) {
            e.printStackTrace();
          }
        }
        currentTab++;
      }
      errorPointsOld.clear();
      for (      ErrorMarker marker : errorPoints) {
        errorPointsOld.add(marker);
      }
      errorPoints.clear();
      for (      Problem problem : problems) {
        if (problem.tabIndex == currentTab) {
          float y=(problem.lineNumber - errorCheckerService.defaultImportsOffset) / ((float)totalLines);
          y*=fheight - 15;
          errorPoints.add(new ErrorMarker(problem,(int)y,problem.isError() ? ErrorMarker.Error : ErrorMarker.Warning));
        }
      }
      repaint();
    }
  }
;
  try {
    worker.execute();
  }
 catch (  Exception exp) {
    System.out.println("Errorbar update markers is slacking." + exp.getMessage());
  }
}
