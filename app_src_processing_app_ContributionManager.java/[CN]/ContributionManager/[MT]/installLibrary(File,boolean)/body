{
  File tempDir=ContributionManager.unzipFileToTemp(libFile);
  try {
    ArrayList<Library> discoveredLibs=Library.list(tempDir);
    if (discoveredLibs.isEmpty()) {
      discoveredLibs=Library.list(tempDir.getParentFile());
    }
    if (discoveredLibs != null && discoveredLibs.size() == 1) {
      Library discoveredLib=discoveredLibs.get(0);
      return installLibrary(discoveredLib,confirmReplace);
    }
 else {
      if (discoveredLibs == null) {
        Base.showWarning(ContributionManager.DISCOVERY_ERROR_TITLE,ContributionManager.DISCOVERY_INTERNAL_ERROR_MESSAGE,null);
      }
 else       if (discoveredLibs.isEmpty()) {
        Base.showWarning(ContributionManager.DISCOVERY_ERROR_TITLE,ContributionManager.DISCOVERY_NONE_FOUND_ERROR_MESSAGE,null);
      }
 else {
        Base.showWarning("Too many libraries","We found more than one library in the library file\n" + "we just downloaded. That shouldn't happen, so we're\n" + "going to ignore this file.",null);
      }
    }
  }
 catch (  IOException ioe) {
    Base.showWarning(ContributionManager.DISCOVERY_ERROR_TITLE,ContributionManager.DISCOVERY_INTERNAL_ERROR_MESSAGE,ioe);
  }
  return null;
}
