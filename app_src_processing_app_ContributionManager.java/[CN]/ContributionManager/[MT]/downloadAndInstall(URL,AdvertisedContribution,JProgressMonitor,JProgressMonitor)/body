{
  final File libDest=getTemporaryFile(url);
  new Thread(new Runnable(){
    public void run(){
      FileDownloader.downloadFile(url,libDest,downloadProgressMonitor);
      if (!downloadProgressMonitor.isCanceled() && !downloadProgressMonitor.isError()) {
        installProgressMonitor.startTask("Installing",ProgressMonitor.UNKNOWN);
        InstalledContribution contribution=null;
switch (ad.getType()) {
case LIBRARY:
          contribution=installLibrary(libDest,ad,false);
        break;
case LIBRARY_COMPILATION:
      contribution=installLibraryCompilation(libDest);
    break;
case TOOL:
  contribution=installTool(libDest,ad);
break;
}
if (contribution != null) {
contribListing.replaceContribution(ad,contribution);
refreshInstalled();
}
dialog.pack();
installProgressMonitor.finished();
}
}
}
).start();
}
