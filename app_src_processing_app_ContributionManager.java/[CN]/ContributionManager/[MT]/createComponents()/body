{
  dialog.setResizable(true);
  Container pane=dialog.getContentPane();
  pane.setLayout(new GridBagLayout());
{
    GridBagConstraints c=new GridBagConstraints();
    c.gridx=0;
    c.gridy=0;
    c.gridwidth=2;
    c.weightx=1;
    c.fill=GridBagConstraints.HORIZONTAL;
    filterField=new FilterField();
    pane.add(filterField,c);
  }
{
    GridBagConstraints c=new GridBagConstraints();
    c.fill=GridBagConstraints.BOTH;
    c.gridx=0;
    c.gridy=1;
    c.gridwidth=2;
    c.weighty=1;
    c.weightx=1;
    final JScrollPane scrollPane=new JScrollPane();
    scrollPane.setPreferredSize(new Dimension(300,300));
    scrollPane.setViewportView(contributionListPanel);
    scrollPane.getViewport().setOpaque(true);
    scrollPane.getViewport().setBackground(contributionListPanel.getBackground());
    scrollPane.setVerticalScrollBarPolicy(ScrollPaneConstants.VERTICAL_SCROLLBAR_ALWAYS);
    scrollPane.setHorizontalScrollBarPolicy(JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
    statusBar=new StatusPanel();
    statusBar.setBorder(BorderFactory.createEtchedBorder());
    final JLayeredPane layeredPane=new JLayeredPane();
    layeredPane.add(scrollPane,JLayeredPane.DEFAULT_LAYER);
    layeredPane.add(statusBar,JLayeredPane.PALETTE_LAYER);
    layeredPane.addComponentListener(new ComponentAdapter(){
      void resizeLayers(){
        scrollPane.setSize(layeredPane.getSize());
        scrollPane.updateUI();
      }
      public void componentShown(      ComponentEvent e){
        resizeLayers();
      }
      public void componentResized(      ComponentEvent arg0){
        resizeLayers();
      }
    }
);
    final JViewport viewport=scrollPane.getViewport();
    viewport.addComponentListener(new ComponentAdapter(){
      void resizeLayers(){
        statusBar.setLocation(0,viewport.getHeight() - 18);
        Dimension d=viewport.getSize();
        d.height=20;
        d.width+=3;
        statusBar.setSize(d);
      }
      public void componentShown(      ComponentEvent e){
        resizeLayers();
      }
      public void componentResized(      ComponentEvent e){
        resizeLayers();
      }
    }
);
    pane.add(layeredPane,c);
  }
{
    GridBagConstraints c=new GridBagConstraints();
    c.gridx=0;
    c.gridy=2;
    pane.add(new Label("Category:"),c);
  }
{
    GridBagConstraints c=new GridBagConstraints();
    c.fill=GridBagConstraints.HORIZONTAL;
    c.gridx=1;
    c.gridy=2;
    categoryChooser=new JComboBox();
    updateCategoryChooser();
    pane.add(categoryChooser,c);
    categoryChooser.addItemListener(new ItemListener(){
      public void itemStateChanged(      ItemEvent e){
        category=(String)categoryChooser.getSelectedItem();
        if (ContributionManager.ANY_CATEGORY.equals(category)) {
          category=null;
        }
        filterLibraries(category,filterField.filters);
      }
    }
);
  }
  dialog.setMinimumSize(new Dimension(550,400));
}
