{
  if (containsVersionDirective(fragSrc0)) {
    return fragSrc0;
  }
  String[] fragSrc;
  if (version < 130) {
    String[] search={};
    String[] replace={};
    int offset=1;
    fragSrc=preprocessShaderSource(fragSrc0,search,replace,offset);
    fragSrc[0]="#version " + version;
  }
 else {
    String[] search=new String[]{"varying","attribute","texture","texMap2D","texMap3D","texMap2DRect","texMapCube","gl_FragColor"};
    String[] replace=new String[]{"in","in","texMap","texture","texture","texture","texture","fragColor"};
    int offset=2;
    fragSrc=preprocessShaderSource(fragSrc0,search,replace,offset);
    fragSrc[0]="#version " + version;
    fragSrc[1]="out vec4 fragColor;";
  }
  return fragSrc;
}
