{
  if (cvertexIndex == CVERTEX_ALLOC) {
    System.arraycopy(cvertex[CVERTEX_ALLOC - 3],0,cvertex[0],0,VERTEX_FIELD_COUNT);
    System.arraycopy(cvertex[CVERTEX_ALLOC - 2],0,cvertex[1],0,VERTEX_FIELD_COUNT);
    System.arraycopy(cvertex[CVERTEX_ALLOC - 1],0,cvertex[2],0,VERTEX_FIELD_COUNT);
    cvertexIndex=3;
  }
  if (cverticesFlat) {
    if (z != 0)     cverticesFlat=false;
  }
  float vertex[]=cvertex[cvertexIndex];
  vertex[MX]=x;
  vertex[MY]=y;
  vertex[MZ]=z;
  if (_fill) {
    vertex[R]=fillR;
    vertex[G]=fillG;
    vertex[B]=fillB;
    vertex[A]=fillA;
  }
  if (_stroke) {
    vertex[SR]=strokeR;
    vertex[SG]=strokeG;
    vertex[SB]=strokeB;
    vertex[SA]=strokeA;
    vertex[WT]=strokeWeight;
  }
  if (textureImage != null) {
    vertex[U]=textureU;
    vertex[V]=textureV;
  }
  if (normalChanged) {
    vertex[NX]=normalX;
    vertex[NY]=normalY;
    vertex[NZ]=normalZ;
  }
  cvertexIndex++;
  if (cvertexIndex > 3) {
    if (bezier) {
      if ((cvertexIndex % 4) == 0) {
        if (!bezier_inited)         bezier_init();
        if (cverticesFlat) {
          spline_segment(cvertex[cvertexIndex - 4][MX],cvertex[cvertexIndex - 4][MY],cvertex[cvertexIndex - 3][MX],cvertex[cvertexIndex - 3][MY],cvertex[cvertexIndex - 2][MX],cvertex[cvertexIndex - 2][MY],cvertex[cvertexIndex - 1][MX],cvertex[cvertexIndex - 1][MY],cvertex[cvertexIndex - 4][MX],cvertex[cvertexIndex - 4][MY],bezier_draw,bezier_detail);
        }
 else {
          spline_segment(cvertex[cvertexIndex - 4][MX],cvertex[cvertexIndex - 4][MY],cvertex[cvertexIndex - 4][MZ],cvertex[cvertexIndex - 3][MX],cvertex[cvertexIndex - 3][MY],cvertex[cvertexIndex - 3][MZ],cvertex[cvertexIndex - 2][MX],cvertex[cvertexIndex - 2][MY],cvertex[cvertexIndex - 2][MZ],cvertex[cvertexIndex - 1][MX],cvertex[cvertexIndex - 1][MY],cvertex[cvertexIndex - 1][MZ],cvertex[cvertexIndex - 4][MX],cvertex[cvertexIndex - 4][MY],cvertex[cvertexIndex - 4][MZ],bezier_draw,bezier_detail);
        }
      }
    }
 else {
      if (!curve_inited)       curve_init();
      if (cverticesFlat) {
        spline_segment(cvertex[cvertexIndex - 4][MX],cvertex[cvertexIndex - 4][MY],cvertex[cvertexIndex - 3][MX],cvertex[cvertexIndex - 3][MY],cvertex[cvertexIndex - 2][MX],cvertex[cvertexIndex - 2][MY],cvertex[cvertexIndex - 1][MX],cvertex[cvertexIndex - 1][MY],cvertex[cvertexIndex - 3][MX],cvertex[cvertexIndex - 3][MY],curve_draw,curve_detail);
      }
 else {
        spline_segment(cvertex[cvertexIndex - 4][MX],cvertex[cvertexIndex - 4][MY],cvertex[cvertexIndex - 4][MZ],cvertex[cvertexIndex - 3][MX],cvertex[cvertexIndex - 3][MY],cvertex[cvertexIndex - 3][MZ],cvertex[cvertexIndex - 2][MX],cvertex[cvertexIndex - 2][MY],cvertex[cvertexIndex - 2][MZ],cvertex[cvertexIndex - 1][MX],cvertex[cvertexIndex - 1][MY],cvertex[cvertexIndex - 1][MZ],cvertex[cvertexIndex - 3][MX],cvertex[cvertexIndex - 3][MY],cvertex[cvertexIndex - 3][MZ],curve_draw,curve_detail);
      }
    }
  }
}
