{
  pixelCount=width * height;
  pixels=new int[pixelCount];
  for (int i=0; i < pixelCount; i++)   pixels[i]=0xffffffff;
  cm=new DirectColorModel(32,0x00ff0000,0x0000ff00,0x000000ff);
  ;
  mis=new MemoryImageSource(width,height,pixels,0,width);
  mis.setFullBufferUpdates(true);
  mis.setAnimated(true);
  image=Toolkit.getDefaultToolkit().createImage(mis);
  zbuffer=new float[pixelCount];
  stencil=new int[pixelCount];
  line=new PLine(this);
  triangle=new PTriangle(this);
  light=new boolean[MAX_LIGHTS];
  lightX=new float[MAX_LIGHTS];
  lightY=new float[MAX_LIGHTS];
  lightZ=new float[MAX_LIGHTS];
  lightAmbientR=new float[MAX_LIGHTS];
  lightAmbientG=new float[MAX_LIGHTS];
  lightAmbientB=new float[MAX_LIGHTS];
  lightDiffuseR=new float[MAX_LIGHTS];
  lightDiffuseG=new float[MAX_LIGHTS];
  lightDiffuseB=new float[MAX_LIGHTS];
  lightSpecularR=new float[MAX_LIGHTS];
  lightSpecularG=new float[MAX_LIGHTS];
  lightSpecularB=new float[MAX_LIGHTS];
}
