{
  File settingsFolder=null;
  String preferencesPath=Preferences.get("settings.path");
  if (preferencesPath != null) {
    settingsFolder=new File(preferencesPath);
  }
 else {
    try {
      settingsFolder=platform.getSettingsFolder();
    }
 catch (    Exception e) {
      showError("Problem getting data folder","Error getting the Processing data folder.",e);
    }
  }
  if (!settingsFolder.exists()) {
    if (!settingsFolder.mkdirs()) {
      showError("Settings issues","Processing cannot run because it could not\n" + "create a folder to store your settings.",null);
    }
  }
  return settingsFolder;
}
