{
  boolean success=editor.checkModified(false);
  if (success) {
    editor.setVisible(false);
    editor.dispose();
    for (int i=0; i < editorCount; i++) {
      if (editor == editors[i]) {
        for (int j=i; j < editorCount - 1; j++) {
          editors[j]=editors[j + 1];
        }
        editorCount--;
        editors[editorCount]=null;
      }
    }
    if (!quitting && (editorCount == 0)) {
      storeSketches();
      Preferences.save();
      Base.cleanSketchbook();
      System.exit(0);
    }
    return true;
  }
  return false;
}
