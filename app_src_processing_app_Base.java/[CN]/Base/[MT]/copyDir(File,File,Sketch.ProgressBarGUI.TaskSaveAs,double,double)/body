{
  if (sourceDir.equals(targetDir)) {
    final String urDum="source and target directories are identical";
    throw new IllegalArgumentException(urDum);
  }
  targetDir.mkdirs();
  String files[]=sourceDir.list();
  for (int i=0; i < files.length; i++) {
    if (files[i].charAt(0) == '.')     continue;
    File source=new File(sourceDir,files[i]);
    File target=new File(targetDir,files[i]);
    if (source.isDirectory()) {
      progress=copyDir(source,target,progBar,progress,totalSize);
      progBar.setProgressBarStatus((int)Math.min(Math.ceil((double)progress * 100.0 / (double)totalSize),100));
      target.setLastModified(source.lastModified());
    }
 else {
      copyFile(source,target,progBar,progress,totalSize);
      progress+=source.length();
      progBar.setProgressBarStatus((int)Math.min(Math.ceil((double)progress * 100.0 / (double)totalSize),100));
    }
  }
  return progress;
}
